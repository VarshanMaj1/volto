{"ast":null,"code":"import _objectSpread from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/**\n * Upload reducer.\n * @module reducers/content\n *\n * Customized copy of Volto's content reducer\n */\n\nimport config from '@plone/volto/registry';\nimport { UPLOAD_CONTENT } from '@plone/volto-slate/constants';\nconst initialState = {};\n\n/**\n * Content reducer.\n * @function content\n * @param {Object} state Current state.\n * @param {Object} action Action to be handled.\n * @returns {Object} New state.\n */\nexport default function upload_content(state = initialState, action = {}) {\n  let {\n    result,\n    origin\n  } = action;\n  switch (action.type) {\n    case `${UPLOAD_CONTENT}_PENDING`:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        [origin]: _objectSpread(_objectSpread({}, state[origin]), {}, {\n          upload: {\n            loading: true,\n            loaded: false,\n            error: null\n          }\n        })\n      });\n    case `${UPLOAD_CONTENT}_SUCCESS`:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        [origin]: _objectSpread(_objectSpread({}, state[origin]), {}, {\n          data: _objectSpread(_objectSpread({}, result), {}, {\n            items: action.result && action.result.items && action.result.items.map(item => _objectSpread(_objectSpread({}, item), {}, {\n              url: item['@id'].replace(config.settings.apiPath, '')\n            }))\n          }),\n          upload: {\n            loading: false,\n            loaded: true,\n            error: null\n          }\n        })\n      });\n    case `${UPLOAD_CONTENT}_FAIL`:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        [origin]: _objectSpread(_objectSpread({}, state[origin]), {}, {\n          data: null,\n          upload: {\n            loading: false,\n            loaded: false,\n            error: action.error\n          }\n        })\n      });\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["config","UPLOAD_CONTENT","initialState","upload_content","state","action","result","origin","type","_objectSpread","upload","loading","loaded","error","data","items","map","item","url","replace","settings","apiPath"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto-slate/src/reducers/content.js"],"sourcesContent":["/**\n * Upload reducer.\n * @module reducers/content\n *\n * Customized copy of Volto's content reducer\n */\n\nimport config from '@plone/volto/registry';\n\nimport { UPLOAD_CONTENT } from '@plone/volto-slate/constants';\n\nconst initialState = {};\n\n/**\n * Content reducer.\n * @function content\n * @param {Object} state Current state.\n * @param {Object} action Action to be handled.\n * @returns {Object} New state.\n */\nexport default function upload_content(state = initialState, action = {}) {\n  let { result, origin } = action;\n  switch (action.type) {\n    case `${UPLOAD_CONTENT}_PENDING`:\n      return {\n        ...state,\n        [origin]: {\n          ...state[origin],\n          upload: {\n            loading: true,\n            loaded: false,\n            error: null,\n          },\n        },\n      };\n    case `${UPLOAD_CONTENT}_SUCCESS`:\n      return {\n        ...state,\n        [origin]: {\n          ...state[origin],\n          data: {\n            ...result,\n            items:\n              action.result &&\n              action.result.items &&\n              action.result.items.map((item) => ({\n                ...item,\n                url: item['@id'].replace(config.settings.apiPath, ''),\n              })),\n          },\n          upload: {\n            loading: false,\n            loaded: true,\n            error: null,\n          },\n        },\n      };\n    case `${UPLOAD_CONTENT}_FAIL`:\n      return {\n        ...state,\n        [origin]: {\n          ...state[origin],\n          data: null,\n          upload: {\n            loading: false,\n            loaded: false,\n            error: action.error,\n          },\n        },\n      };\n    default:\n      return state;\n  }\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,MAAM,MAAM,uBAAuB;AAE1C,SAASC,cAAc,QAAQ,8BAA8B;AAE7D,MAAMC,YAAY,GAAG,CAAC,CAAC;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,cAAcA,CAACC,KAAK,GAAGF,YAAY,EAAEG,MAAM,GAAG,CAAC,CAAC,EAAE;EACxE,IAAI;IAAEC,MAAM;IAAEC;EAAO,CAAC,GAAGF,MAAM;EAC/B,QAAQA,MAAM,CAACG,IAAI;IACjB,KAAK,GAAGP,cAAc,UAAU;MAC9B,OAAAQ,aAAA,CAAAA,aAAA,KACKL,KAAK;QACR,CAACG,MAAM,GAAAE,aAAA,CAAAA,aAAA,KACFL,KAAK,CAACG,MAAM,CAAC;UAChBG,MAAM,EAAE;YACNC,OAAO,EAAE,IAAI;YACbC,MAAM,EAAE,KAAK;YACbC,KAAK,EAAE;UACT;QAAC;MACF;IAEL,KAAK,GAAGZ,cAAc,UAAU;MAC9B,OAAAQ,aAAA,CAAAA,aAAA,KACKL,KAAK;QACR,CAACG,MAAM,GAAAE,aAAA,CAAAA,aAAA,KACFL,KAAK,CAACG,MAAM,CAAC;UAChBO,IAAI,EAAAL,aAAA,CAAAA,aAAA,KACCH,MAAM;YACTS,KAAK,EACHV,MAAM,CAACC,MAAM,IACbD,MAAM,CAACC,MAAM,CAACS,KAAK,IACnBV,MAAM,CAACC,MAAM,CAACS,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAAR,aAAA,CAAAA,aAAA,KACxBQ,IAAI;cACPC,GAAG,EAAED,IAAI,CAAC,KAAK,CAAC,CAACE,OAAO,CAACnB,MAAM,CAACoB,QAAQ,CAACC,OAAO,EAAE,EAAE;YAAC,EACrD;UAAC,EACN;UACDX,MAAM,EAAE;YACNC,OAAO,EAAE,KAAK;YACdC,MAAM,EAAE,IAAI;YACZC,KAAK,EAAE;UACT;QAAC;MACF;IAEL,KAAK,GAAGZ,cAAc,OAAO;MAC3B,OAAAQ,aAAA,CAAAA,aAAA,KACKL,KAAK;QACR,CAACG,MAAM,GAAAE,aAAA,CAAAA,aAAA,KACFL,KAAK,CAACG,MAAM,CAAC;UAChBO,IAAI,EAAE,IAAI;UACVJ,MAAM,EAAE;YACNC,OAAO,EAAE,KAAK;YACdC,MAAM,EAAE,KAAK;YACbC,KAAK,EAAER,MAAM,CAACQ;UAChB;QAAC;MACF;IAEL;MACE,OAAOT,KAAK;EAChB;AACF","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}