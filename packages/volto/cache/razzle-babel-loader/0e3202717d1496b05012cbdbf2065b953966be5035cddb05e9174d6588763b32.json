{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/ContactForm/ContactForm.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useCallback, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Container, Message, Icon } from 'semantic-ui-react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { emailNotification } from '@plone/volto/actions/emailNotification/emailNotification';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Toolbar from '@plone/volto/components/manage/Toolbar/Toolbar';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { getBaseUrl } from '@plone/volto/helpers/Url/Url';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { usePrevious } from '@plone/volto/helpers/Utils/usePrevious';\nimport { useClient } from '@plone/volto/hooks/client/useClient';\nconst messages = defineMessages({\n  send: {\n    \"id\": \"Send\",\n    \"defaultMessage\": \"Send\"\n  },\n  contactForm: {\n    \"id\": \"Contact form\",\n    \"defaultMessage\": \"Contact form\"\n  },\n  default: {\n    \"id\": \"Default\",\n    \"defaultMessage\": \"Default\"\n  },\n  name: {\n    \"id\": \"Name\",\n    \"defaultMessage\": \"Name\"\n  },\n  from: {\n    \"id\": \"From\",\n    \"defaultMessage\": \"From\"\n  },\n  subject: {\n    \"id\": \"Subject\",\n    \"defaultMessage\": \"Subject\"\n  },\n  message: {\n    \"id\": \"Message\",\n    \"defaultMessage\": \"Message\"\n  },\n  error: {\n    \"id\": \"Error\",\n    \"defaultMessage\": \"Error\"\n  },\n  messageSent: {\n    \"id\": \"Email sent\",\n    \"defaultMessage\": \"Email sent\"\n  },\n  back: {\n    \"id\": \"Back\",\n    \"defaultMessage\": \"Back\"\n  },\n  success: {\n    \"id\": \"Success\",\n    \"defaultMessage\": \"Success\"\n  }\n});\nconst useEmailNotification = () => {\n  const loading = useSelector(state => state.emailNotification.loading);\n  const loaded = useSelector(state => state.emailNotification.loaded);\n  const error = useSelector(state => state.emailNotification.error);\n  return {\n    loading,\n    loaded,\n    error\n  };\n};\nconst ContactFormComponent = () => {\n  const history = useHistory();\n  const {\n    pathname\n  } = useLocation();\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const isClient = useClient();\n  const {\n    loaded,\n    loading,\n    error\n  } = useEmailNotification();\n  const prevloading = usePrevious(loading);\n  useEffect(() => {\n    if (prevloading && loaded) {\n      toast.success(__jsx(Toast, {\n        success: true,\n        title: intl.formatMessage(messages.success),\n        content: intl.formatMessage(messages.messageSent),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, [intl, loaded, prevloading]);\n  const onSubmit = data => {\n    const {\n      from,\n      message,\n      name,\n      subject\n    } = data;\n    dispatch(emailNotification(from, message, name, subject));\n  };\n  const onCancel = useCallback(() => {\n    history.goBack();\n  }, [history]);\n  return __jsx(\"div\", {\n    id: \"contact-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    id: \"view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, __jsx(Helmet, {\n    title: intl.formatMessage(messages.contactForm),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), error && __jsx(Message, {\n    icon: \"warning\",\n    negative: true,\n    attached: true,\n    header: intl.formatMessage(messages.error),\n    content: error.message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), __jsx(Form, {\n    onSubmit: onSubmit,\n    onCancel: onCancel,\n    formData: {\n      blocksLayoutFieldname: {}\n    },\n    submitLabel: intl.formatMessage(messages.send),\n    resetAfterSubmit: true,\n    title: intl.formatMessage(messages.contactForm),\n    loading: loading,\n    schema: {\n      fieldsets: [{\n        fields: ['name', 'from', 'subject', 'message'],\n        id: 'default',\n        title: intl.formatMessage(messages.default)\n      }],\n      properties: {\n        name: {\n          title: intl.formatMessage(messages.name),\n          type: 'string'\n        },\n        from: {\n          title: intl.formatMessage(messages.from),\n          type: 'email'\n        },\n        subject: {\n          title: intl.formatMessage(messages.subject),\n          type: 'string'\n        },\n        message: {\n          title: intl.formatMessage(messages.message),\n          type: 'string',\n          widget: 'textarea'\n        }\n      },\n      required: ['from', 'message']\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }), isClient && /*#__PURE__*/createPortal(__jsx(Toolbar, {\n    pathname: pathname,\n    hideDefaultViewButtons: true,\n    inner: __jsx(Link, {\n      to: `${getBaseUrl(pathname)}`,\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, __jsx(Icon, {\n      name: \"arrow left\",\n      size: \"big\",\n      color: \"blue\",\n      title: intl.formatMessage(messages.back),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }), document.getElementById('toolbar'))));\n};\nexport default ContactFormComponent;","map":{"version":3,"names":["useCallback","useEffect","createPortal","Container","Message","Icon","defineMessages","useIntl","Link","useHistory","useLocation","toast","emailNotification","useDispatch","useSelector","Toolbar","Toast","Form","getBaseUrl","Helmet","usePrevious","useClient","messages","send","contactForm","default","name","from","subject","message","error","messageSent","back","success","useEmailNotification","loading","state","loaded","ContactFormComponent","history","pathname","dispatch","intl","isClient","prevloading","__jsx","title","formatMessage","content","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","data","onCancel","goBack","id","icon","negative","attached","header","formData","blocksLayoutFieldname","submitLabel","resetAfterSubmit","schema","fieldsets","fields","properties","type","widget","required","hideDefaultViewButtons","inner","to","className","size","color","document","getElementById"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/ContactForm/ContactForm.jsx"],"sourcesContent":["import { useCallback, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Container, Message, Icon } from 'semantic-ui-react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport { emailNotification } from '@plone/volto/actions/emailNotification/emailNotification';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Toolbar from '@plone/volto/components/manage/Toolbar/Toolbar';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { getBaseUrl } from '@plone/volto/helpers/Url/Url';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { usePrevious } from '@plone/volto/helpers/Utils/usePrevious';\nimport { useClient } from '@plone/volto/hooks/client/useClient';\n\nconst messages = defineMessages({\n  send: {\n    id: 'Send',\n    defaultMessage: 'Send',\n  },\n  contactForm: {\n    id: 'Contact form',\n    defaultMessage: 'Contact form',\n  },\n  default: {\n    id: 'Default',\n    defaultMessage: 'Default',\n  },\n  name: {\n    id: 'Name',\n    defaultMessage: 'Name',\n  },\n  from: {\n    id: 'From',\n    defaultMessage: 'From',\n  },\n  subject: {\n    id: 'Subject',\n    defaultMessage: 'Subject',\n  },\n  message: {\n    id: 'Message',\n    defaultMessage: 'Message',\n  },\n  error: {\n    id: 'Error',\n    defaultMessage: 'Error',\n  },\n  messageSent: {\n    id: 'Email sent',\n    defaultMessage: 'Email sent',\n  },\n  back: {\n    id: 'Back',\n    defaultMessage: 'Back',\n  },\n  success: {\n    id: 'Success',\n    defaultMessage: 'Success',\n  },\n});\n\nconst useEmailNotification = () => {\n  const loading = useSelector((state) => state.emailNotification.loading);\n  const loaded = useSelector((state) => state.emailNotification.loaded);\n  const error = useSelector((state) => state.emailNotification.error);\n\n  return { loading, loaded, error };\n};\n\nconst ContactFormComponent = () => {\n  const history = useHistory();\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n  const intl = useIntl();\n  const isClient = useClient();\n\n  const { loaded, loading, error } = useEmailNotification();\n\n  const prevloading = usePrevious(loading);\n\n  useEffect(() => {\n    if (prevloading && loaded) {\n      toast.success(\n        <Toast\n          success\n          title={intl.formatMessage(messages.success)}\n          content={intl.formatMessage(messages.messageSent)}\n        />,\n      );\n    }\n  }, [intl, loaded, prevloading]);\n\n  const onSubmit = (data) => {\n    const { from, message, name, subject } = data;\n    dispatch(emailNotification(from, message, name, subject));\n  };\n\n  const onCancel = useCallback(() => {\n    history.goBack();\n  }, [history]);\n\n  return (\n    <div id=\"contact-form\">\n      <Container id=\"view\">\n        <Helmet title={intl.formatMessage(messages.contactForm)} />\n        {error && (\n          <Message\n            icon=\"warning\"\n            negative\n            attached\n            header={intl.formatMessage(messages.error)}\n            content={error.message}\n          />\n        )}\n        <Form\n          onSubmit={onSubmit}\n          onCancel={onCancel}\n          formData={{ blocksLayoutFieldname: {} }}\n          submitLabel={intl.formatMessage(messages.send)}\n          resetAfterSubmit\n          title={intl.formatMessage(messages.contactForm)}\n          loading={loading}\n          schema={{\n            fieldsets: [\n              {\n                fields: ['name', 'from', 'subject', 'message'],\n                id: 'default',\n                title: intl.formatMessage(messages.default),\n              },\n            ],\n            properties: {\n              name: {\n                title: intl.formatMessage(messages.name),\n                type: 'string',\n              },\n              from: {\n                title: intl.formatMessage(messages.from),\n                type: 'email',\n              },\n              subject: {\n                title: intl.formatMessage(messages.subject),\n                type: 'string',\n              },\n              message: {\n                title: intl.formatMessage(messages.message),\n                type: 'string',\n                widget: 'textarea',\n              },\n            },\n            required: ['from', 'message'],\n          }}\n        />\n        {isClient &&\n          createPortal(\n            <Toolbar\n              pathname={pathname}\n              hideDefaultViewButtons\n              inner={\n                <Link to={`${getBaseUrl(pathname)}`} className=\"item\">\n                  <Icon\n                    name=\"arrow left\"\n                    size=\"big\"\n                    color=\"blue\"\n                    title={intl.formatMessage(messages.back)}\n                  />\n                </Link>\n              }\n            />,\n            document.getElementById('toolbar'),\n          )}\n      </Container>\n    </div>\n  );\n};\n\nexport default ContactFormComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Send","defaultMessage":"Send"},{"id":"Contact form","defaultMessage":"Contact form"},{"id":"Default","defaultMessage":"Default"},{"id":"Name","defaultMessage":"Name"},{"id":"From","defaultMessage":"From"},{"id":"Subject","defaultMessage":"Subject"},{"id":"Message","defaultMessage":"Message"},{"id":"Error","defaultMessage":"Error"},{"id":"Email sent","defaultMessage":"Email sent"},{"id":"Back","defaultMessage":"Back"},{"id":"Success","defaultMessage":"Success"}]}},"sourceType":"module","externalDependencies":[]}