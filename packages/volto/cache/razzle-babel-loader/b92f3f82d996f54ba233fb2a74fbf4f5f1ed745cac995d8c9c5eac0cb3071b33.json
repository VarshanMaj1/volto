{"ast":null,"code":"import _objectSpread from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from '@redux-devtools/extension';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { save, load } from 'redux-localstorage-simple';\nimport config from '@plone/volto/registry';\nimport reducers from '@root/reducers';\nimport { api, blacklistRoutes, protectLoadStart, protectLoadEnd, loadProtector, userSessionReset } from '@plone/volto/middleware';\nconst configureStore = (initialState, history, apiHelper) => {\n  let stack = [blacklistRoutes, protectLoadStart, routerMiddleware(history), thunk, ...(apiHelper ? [api(apiHelper)] : []), userSessionReset, protectLoadEnd, ...(__CLIENT__ ? [save({\n    states: config.settings.persistentReducers,\n    debounce: 500\n  })] : [])];\n  stack = config.settings.storeExtenders.reduce((acc, extender) => extender(acc), stack);\n  const middlewares = composeWithDevTools(applyMiddleware(...stack));\n  const store = createStore(combineReducers(_objectSpread(_objectSpread(_objectSpread({\n    router: connectRouter(history)\n  }, reducers), config.addonReducers), {}, {\n    loadProtector\n  })), _objectSpread(_objectSpread({}, initialState), __CLIENT__ ? load({\n    states: config.settings.persistentReducers\n  }) : {}), middlewares);\n  return store;\n};\nexport default configureStore;","map":{"version":3,"names":["combineReducers","createStore","applyMiddleware","thunk","composeWithDevTools","connectRouter","routerMiddleware","save","load","config","reducers","api","blacklistRoutes","protectLoadStart","protectLoadEnd","loadProtector","userSessionReset","configureStore","initialState","history","apiHelper","stack","__CLIENT__","states","settings","persistentReducers","debounce","storeExtenders","reduce","acc","extender","middlewares","store","_objectSpread","router","addonReducers"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/store.js"],"sourcesContent":["import { combineReducers, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from '@redux-devtools/extension';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { save, load } from 'redux-localstorage-simple';\n\nimport config from '@plone/volto/registry';\nimport reducers from '@root/reducers';\n\nimport {\n  api,\n  blacklistRoutes,\n  protectLoadStart,\n  protectLoadEnd,\n  loadProtector,\n  userSessionReset,\n} from '@plone/volto/middleware';\n\nconst configureStore = (initialState, history, apiHelper) => {\n  let stack = [\n    blacklistRoutes,\n    protectLoadStart,\n    routerMiddleware(history),\n    thunk,\n    ...(apiHelper ? [api(apiHelper)] : []),\n    userSessionReset,\n    protectLoadEnd,\n    ...(__CLIENT__\n      ? [save({ states: config.settings.persistentReducers, debounce: 500 })]\n      : []),\n  ];\n  stack = config.settings.storeExtenders.reduce(\n    (acc, extender) => extender(acc),\n    stack,\n  );\n  const middlewares = composeWithDevTools(applyMiddleware(...stack));\n  const store = createStore(\n    combineReducers({\n      router: connectRouter(history),\n      ...reducers,\n      ...config.addonReducers,\n      loadProtector,\n    }),\n    {\n      ...initialState,\n      ...(__CLIENT__\n        ? load({ states: config.settings.persistentReducers })\n        : {}),\n    },\n    middlewares,\n  );\n\n  return store;\n};\n\nexport default configureStore;\n"],"mappings":";AAAA,SAASA,eAAe,EAAEC,WAAW,EAAEC,eAAe,QAAQ,OAAO;AACrE,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,mBAAmB,QAAQ,2BAA2B;AAC/D,SAASC,aAAa,EAAEC,gBAAgB,QAAQ,wBAAwB;AACxE,SAASC,IAAI,EAAEC,IAAI,QAAQ,2BAA2B;AAEtD,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,OAAOC,QAAQ,MAAM,gBAAgB;AAErC,SACEC,GAAG,EACHC,eAAe,EACfC,gBAAgB,EAChBC,cAAc,EACdC,aAAa,EACbC,gBAAgB,QACX,yBAAyB;AAEhC,MAAMC,cAAc,GAAGA,CAACC,YAAY,EAAEC,OAAO,EAAEC,SAAS,KAAK;EAC3D,IAAIC,KAAK,GAAG,CACVT,eAAe,EACfC,gBAAgB,EAChBP,gBAAgB,CAACa,OAAO,CAAC,EACzBhB,KAAK,EACL,IAAIiB,SAAS,GAAG,CAACT,GAAG,CAACS,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC,EACtCJ,gBAAgB,EAChBF,cAAc,EACd,IAAIQ,UAAU,GACV,CAACf,IAAI,CAAC;IAAEgB,MAAM,EAAEd,MAAM,CAACe,QAAQ,CAACC,kBAAkB;IAAEC,QAAQ,EAAE;EAAI,CAAC,CAAC,CAAC,GACrE,EAAE,CAAC,CACR;EACDL,KAAK,GAAGZ,MAAM,CAACe,QAAQ,CAACG,cAAc,CAACC,MAAM,CAC3C,CAACC,GAAG,EAAEC,QAAQ,KAAKA,QAAQ,CAACD,GAAG,CAAC,EAChCR,KACF,CAAC;EACD,MAAMU,WAAW,GAAG3B,mBAAmB,CAACF,eAAe,CAAC,GAAGmB,KAAK,CAAC,CAAC;EAClE,MAAMW,KAAK,GAAG/B,WAAW,CACvBD,eAAe,CAAAiC,aAAA,CAAAA,aAAA,CAAAA,aAAA;IACbC,MAAM,EAAE7B,aAAa,CAACc,OAAO;EAAC,GAC3BT,QAAQ,GACRD,MAAM,CAAC0B,aAAa;IACvBpB;EAAa,EACd,CAAC,EAAAkB,aAAA,CAAAA,aAAA,KAEGf,YAAY,GACXI,UAAU,GACVd,IAAI,CAAC;IAAEe,MAAM,EAAEd,MAAM,CAACe,QAAQ,CAACC;EAAmB,CAAC,CAAC,GACpD,CAAC,CAAC,GAERM,WACF,CAAC;EAED,OAAOC,KAAK;AACd,CAAC;AAED,eAAef,cAAc","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}