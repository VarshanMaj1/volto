{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Container/NewBlockAddButton.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport { Button, Ref } from 'semantic-ui-react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport BlockChooser from '@plone/volto/components/manage/BlockChooser/BlockChooser';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { useDetectClickOutside } from '@plone/volto/helpers/Utils/useDetectClickOutside';\nimport addSVG from '@plone/volto/icons/add.svg';\nimport { usePopper } from 'react-popper';\nimport { createPortal } from 'react-dom';\nconst messages = defineMessages({\n  addBlock: {\n    \"id\": \"Add block in position {index}\",\n    \"defaultMessage\": \"Add block in position {index}\"\n  }\n});\nconst NewBlockAddButton = props => {\n  const intl = useIntl();\n  const {\n    blocksConfig,\n    block,\n    index,\n    onMutateBlock\n  } = props;\n  const [isOpenMenu, setOpenMenu] = React.useState(false);\n  const blockChooserRef = useDetectClickOutside({\n    onTriggered: () => setOpenMenu(false),\n    triggerKeys: ['Escape']\n  });\n  const [referenceElement, setReferenceElement] = React.useState(null);\n  const [popperElement, setPopperElement] = React.useState(null);\n  const {\n    styles,\n    attributes\n  } = usePopper(referenceElement, popperElement, {\n    placement: 'bottom',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, -30]\n      }\n    }, {\n      name: 'flip',\n      options: {\n        fallbackPlacements: ['right', 'top-start']\n      }\n    }]\n  });\n  return __jsx(React.Fragment, null, __jsx(Ref, {\n    innerRef: setReferenceElement,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    basic: true,\n    icon: true,\n    onClick: () => setOpenMenu(true),\n    className: \"add-block-button\",\n    \"aria-label\": intl.formatMessage(messages.addBlock, {\n      index\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(Icon, {\n    name: addSVG,\n    className: \"circled\",\n    size: \"24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }))), isOpenMenu ? /*#__PURE__*/createPortal(__jsx(\"div\", _extends({\n    ref: setPopperElement,\n    style: styles.popper\n  }, attributes.popper, {\n    className: \"container-chooser-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), __jsx(BlockChooser, {\n    onMutateBlock: onMutateBlock,\n    currentBlock: block,\n    showRestricted: true,\n    blocksConfig: blocksConfig,\n    ref: blockChooserRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  })), document.body) : null);\n};\nexport default NewBlockAddButton;","map":{"version":3,"names":["React","Button","Ref","defineMessages","useIntl","BlockChooser","Icon","useDetectClickOutside","addSVG","usePopper","createPortal","messages","addBlock","NewBlockAddButton","props","intl","blocksConfig","block","index","onMutateBlock","isOpenMenu","setOpenMenu","useState","blockChooserRef","onTriggered","triggerKeys","referenceElement","setReferenceElement","popperElement","setPopperElement","styles","attributes","placement","modifiers","name","options","offset","fallbackPlacements","__jsx","Fragment","innerRef","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","basic","icon","onClick","className","formatMessage","size","_extends","ref","style","popper","currentBlock","showRestricted","document","body"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Container/NewBlockAddButton.jsx"],"sourcesContent":["import React from 'react';\nimport { Button, Ref } from 'semantic-ui-react';\nimport { defineMessages, useIntl } from 'react-intl';\nimport BlockChooser from '@plone/volto/components/manage/BlockChooser/BlockChooser';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { useDetectClickOutside } from '@plone/volto/helpers/Utils/useDetectClickOutside';\nimport addSVG from '@plone/volto/icons/add.svg';\nimport { usePopper } from 'react-popper';\nimport { createPortal } from 'react-dom';\n\nconst messages = defineMessages({\n  addBlock: {\n    id: 'Add block in position {index}',\n    defaultMessage: 'Add block in position {index}',\n  },\n});\n\nconst NewBlockAddButton = (props) => {\n  const intl = useIntl();\n  const { blocksConfig, block, index, onMutateBlock } = props;\n  const [isOpenMenu, setOpenMenu] = React.useState(false);\n\n  const blockChooserRef = useDetectClickOutside({\n    onTriggered: () => setOpenMenu(false),\n    triggerKeys: ['Escape'],\n  });\n\n  const [referenceElement, setReferenceElement] = React.useState(null);\n  const [popperElement, setPopperElement] = React.useState(null);\n  const { styles, attributes } = usePopper(referenceElement, popperElement, {\n    placement: 'bottom',\n    modifiers: [\n      {\n        name: 'offset',\n        options: {\n          offset: [0, -30],\n        },\n      },\n      {\n        name: 'flip',\n        options: {\n          fallbackPlacements: ['right', 'top-start'],\n        },\n      },\n    ],\n  });\n\n  return (\n    <>\n      <Ref innerRef={setReferenceElement}>\n        <Button\n          basic\n          icon\n          onClick={() => setOpenMenu(true)}\n          className=\"add-block-button\"\n          aria-label={intl.formatMessage(messages.addBlock, {\n            index,\n          })}\n        >\n          <Icon name={addSVG} className=\"circled\" size=\"24px\" />\n        </Button>\n      </Ref>\n      {isOpenMenu\n        ? createPortal(\n            <div\n              ref={setPopperElement}\n              style={styles.popper}\n              {...attributes.popper}\n              className=\"container-chooser-wrapper\"\n            >\n              <BlockChooser\n                onMutateBlock={onMutateBlock}\n                currentBlock={block}\n                showRestricted\n                blocksConfig={blocksConfig}\n                ref={blockChooserRef}\n              />\n            </div>,\n            document.body,\n          )\n        : null}\n    </>\n  );\n};\n\nexport default NewBlockAddButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Add block in position {index}","defaultMessage":"Add block in position {index}"}]}},"sourceType":"module","externalDependencies":[]}