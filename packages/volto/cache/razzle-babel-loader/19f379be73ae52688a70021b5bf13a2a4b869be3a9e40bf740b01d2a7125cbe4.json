{"ast":null,"code":"import _extends from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto-slate/src/editor/plugins/Link/render.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport cx from 'classnames';\nimport UniversalLink from '@plone/volto/components/manage/UniversalLink/UniversalLink';\nimport config from '@plone/volto/registry';\nimport { isInternalURL, flattenToAppURL } from '@plone/volto/helpers/Url/Url';\nconst ViewLink = ({\n  url,\n  target,\n  download,\n  children\n}) => {\n  const {\n    openExternalLinkInNewTab\n  } = config.settings;\n  return __jsx(UniversalLink, {\n    href: url,\n    openLinkInNewTab: openExternalLinkInNewTab && !isInternalURL(url) || target === '_blank',\n    download: download,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }\n  }, children);\n};\n_c = ViewLink;\nexport const LinkElement = props => {\n  var _element$data, _element$data2;\n  const {\n    attributes,\n    children,\n    element,\n    mode = 'edit'\n  } = props;\n  const isInternalUrl = isInternalURL((_element$data = element.data) === null || _element$data === void 0 ? void 0 : _element$data.url);\n  const linkUrl = (_element$data2 = element.data) === null || _element$data2 === void 0 ? void 0 : _element$data2.url;\n  return mode === 'view' ? __jsx(ViewLink, _extends({}, element.data || {}, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }), children) : __jsx(\"a\", _extends({}, attributes, {\n    className: cx('slate-editor-link', {\n      external: !isInternalUrl\n    }),\n    href: isInternalUrl ? flattenToAppURL(linkUrl) : linkUrl,\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }), Array.isArray(children) ? children.map((child, i) => {\n    var _child$props;\n    if (child !== null && child !== void 0 && (_child$props = child.props) !== null && _child$props !== void 0 && _child$props.decorations) {\n      const isSelection = child.props.decorations.findIndex(deco => deco.isSelection) > -1;\n      if (isSelection) return __jsx(\"span\", {\n        className: \"highlight-selection\",\n        key: `${i}-sel`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 19\n        }\n      }, child);\n    }\n    return child;\n  }) : children);\n};\n_c2 = LinkElement;\nvar _c, _c2;\n$RefreshReg$(_c, \"ViewLink\");\n$RefreshReg$(_c2, \"LinkElement\");","map":{"version":3,"names":["React","cx","UniversalLink","config","isInternalURL","flattenToAppURL","ViewLink","url","target","download","children","openExternalLinkInNewTab","settings","__jsx","href","openLinkInNewTab","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_c","LinkElement","props","_element$data","_element$data2","attributes","element","mode","isInternalUrl","data","linkUrl","_extends","className","external","onClick","e","preventDefault","Array","isArray","map","child","i","_child$props","decorations","isSelection","findIndex","deco","key","_c2","$RefreshReg$"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto-slate/src/editor/plugins/Link/render.jsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport UniversalLink from '@plone/volto/components/manage/UniversalLink/UniversalLink';\nimport config from '@plone/volto/registry';\nimport { isInternalURL, flattenToAppURL } from '@plone/volto/helpers/Url/Url';\n\nconst ViewLink = ({ url, target, download, children }) => {\n  const { openExternalLinkInNewTab } = config.settings;\n  return (\n    <UniversalLink\n      href={url}\n      openLinkInNewTab={\n        (openExternalLinkInNewTab && !isInternalURL(url)) || target === '_blank'\n      }\n      download={download}\n    >\n      {children}\n    </UniversalLink>\n  );\n};\n\nexport const LinkElement = (props) => {\n  const { attributes, children, element, mode = 'edit' } = props;\n  const isInternalUrl = isInternalURL(element.data?.url);\n  const linkUrl = element.data?.url;\n\n  return mode === 'view' ? (\n    <ViewLink {...(element.data || {})}>{children}</ViewLink>\n  ) : (\n    <a\n      {...attributes}\n      className={cx('slate-editor-link', { external: !isInternalUrl })}\n      href={isInternalUrl ? flattenToAppURL(linkUrl) : linkUrl}\n      onClick={(e) => e.preventDefault()}\n    >\n      {Array.isArray(children)\n        ? children.map((child, i) => {\n            if (child?.props?.decorations) {\n              const isSelection =\n                child.props.decorations.findIndex((deco) => deco.isSelection) >\n                -1;\n              if (isSelection)\n                return (\n                  <span className=\"highlight-selection\" key={`${i}-sel`}>\n                    {child}\n                  </span>\n                );\n            }\n            return child;\n          })\n        : children}\n    </a>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}