{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/MultilingualRedirector/MultilingualRedirector.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { useCookies } from 'react-cookie';\nimport config from '@plone/volto/registry';\nimport { changeLanguage } from '@plone/volto/actions/language/language';\nimport { toGettextLang } from '@plone/volto/helpers/Utils/Utils';\nconst MultilingualRedirector = props => {\n  const {\n    settings\n  } = config;\n  const {\n    pathname,\n    children\n  } = props;\n  const [cookies] = useCookies();\n  const currentLanguage = cookies['I18N_LANGUAGE'] || settings.defaultLanguage;\n  const redirectToLanguage = settings.supportedLanguages.includes(currentLanguage) ? currentLanguage : settings.defaultLanguage;\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    // ToDo: Add means to support language negotiation (with config)\n    // const detectedLang = (navigator.language || navigator.userLanguage).substring(0, 2);\n    let mounted = true;\n    if (settings.isMultilingual && pathname === '/') {\n      const langFileName = toGettextLang(redirectToLanguage);\n      import(/* @vite-ignore */'@root/../locales/' + langFileName + '.json').then(locale => {\n        if (mounted) {\n          dispatch(changeLanguage(redirectToLanguage, locale.default));\n        }\n      });\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [pathname, dispatch, redirectToLanguage, settings.isMultilingual]);\n  return pathname === '/' && settings.isMultilingual ? __jsx(Redirect, {\n    to: `/${redirectToLanguage}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }) : __jsx(React.Fragment, null, children);\n};\nexport default MultilingualRedirector;","map":{"version":3,"names":["React","Redirect","useDispatch","useCookies","config","changeLanguage","toGettextLang","MultilingualRedirector","props","settings","pathname","children","cookies","currentLanguage","defaultLanguage","redirectToLanguage","supportedLanguages","includes","dispatch","useEffect","mounted","isMultilingual","langFileName","then","locale","default","__jsx","to","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/MultilingualRedirector/MultilingualRedirector.jsx"],"sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { useCookies } from 'react-cookie';\nimport config from '@plone/volto/registry';\nimport { changeLanguage } from '@plone/volto/actions/language/language';\nimport { toGettextLang } from '@plone/volto/helpers/Utils/Utils';\n\nconst MultilingualRedirector = (props) => {\n  const { settings } = config;\n  const { pathname, children } = props;\n  const [cookies] = useCookies();\n  const currentLanguage = cookies['I18N_LANGUAGE'] || settings.defaultLanguage;\n  const redirectToLanguage = settings.supportedLanguages.includes(\n    currentLanguage,\n  )\n    ? currentLanguage\n    : settings.defaultLanguage;\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    // ToDo: Add means to support language negotiation (with config)\n    // const detectedLang = (navigator.language || navigator.userLanguage).substring(0, 2);\n    let mounted = true;\n    if (settings.isMultilingual && pathname === '/') {\n      const langFileName = toGettextLang(redirectToLanguage);\n      import(\n        /* @vite-ignore */ '@root/../locales/' + langFileName + '.json'\n      ).then((locale) => {\n        if (mounted) {\n          dispatch(changeLanguage(redirectToLanguage, locale.default));\n        }\n      });\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [pathname, dispatch, redirectToLanguage, settings.isMultilingual]);\n\n  return pathname === '/' && settings.isMultilingual ? (\n    <Redirect to={`/${redirectToLanguage}`} />\n  ) : (\n    <>{children}</>\n  );\n};\n\nexport default MultilingualRedirector;\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,SAASC,cAAc,QAAQ,wCAAwC;AACvE,SAASC,aAAa,QAAQ,kCAAkC;AAEhE,MAAMC,sBAAsB,GAAIC,KAAK,IAAK;EACxC,MAAM;IAAEC;EAAS,CAAC,GAAGL,MAAM;EAC3B,MAAM;IAAEM,QAAQ;IAAEC;EAAS,CAAC,GAAGH,KAAK;EACpC,MAAM,CAACI,OAAO,CAAC,GAAGT,UAAU,CAAC,CAAC;EAC9B,MAAMU,eAAe,GAAGD,OAAO,CAAC,eAAe,CAAC,IAAIH,QAAQ,CAACK,eAAe;EAC5E,MAAMC,kBAAkB,GAAGN,QAAQ,CAACO,kBAAkB,CAACC,QAAQ,CAC7DJ,eACF,CAAC,GACGA,eAAe,GACfJ,QAAQ,CAACK,eAAe;EAC5B,MAAMI,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAE9BF,KAAK,CAACmB,SAAS,CAAC,MAAM;IACpB;IACA;IACA,IAAIC,OAAO,GAAG,IAAI;IAClB,IAAIX,QAAQ,CAACY,cAAc,IAAIX,QAAQ,KAAK,GAAG,EAAE;MAC/C,MAAMY,YAAY,GAAGhB,aAAa,CAACS,kBAAkB,CAAC;MACtD,MAAM,CACJ,kBAAmB,mBAAmB,GAAGO,YAAY,GAAG,OAC1D,CAAC,CAACC,IAAI,CAAEC,MAAM,IAAK;QACjB,IAAIJ,OAAO,EAAE;UACXF,QAAQ,CAACb,cAAc,CAACU,kBAAkB,EAAES,MAAM,CAACC,OAAO,CAAC,CAAC;QAC9D;MACF,CAAC,CAAC;IACJ;IACA,OAAO,MAAM;MACXL,OAAO,GAAG,KAAK;IACjB,CAAC;EACH,CAAC,EAAE,CAACV,QAAQ,EAAEQ,QAAQ,EAAEH,kBAAkB,EAAEN,QAAQ,CAACY,cAAc,CAAC,CAAC;EAErE,OAAOX,QAAQ,KAAK,GAAG,IAAID,QAAQ,CAACY,cAAc,GAChDK,KAAA,CAACzB,QAAQ;IAAC0B,EAAE,EAAE,IAAIZ,kBAAkB,EAAG;IAAAa,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,GAE1CP,KAAA,CAAA1B,KAAA,CAAAkC,QAAA,QAAGvB,QAAW,CACf;AACH,CAAC;AAED,eAAeJ,sBAAsB","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}