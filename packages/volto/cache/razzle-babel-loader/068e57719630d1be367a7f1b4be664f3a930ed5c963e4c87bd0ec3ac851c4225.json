{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Preferences/PersonalInformation.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport jwtDecode from 'jwt-decode';\nimport { toast } from 'react-toastify';\nimport { messages } from '@plone/volto/helpers/MessageLabels/MessageLabels';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { getUser, updateUser } from '@plone/volto/actions/users/users';\nimport { getUserSchema } from '@plone/volto/actions/userschema/userschema';\nconst PersonalInformation = props => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector(state => state.users.user);\n  const userId = useSelector(state => state.userSession.token ? jwtDecode(state.userSession.token).sub : '');\n  const loading = useSelector(state => state.users.update.loading);\n  const userschema = useSelector(state => state.userschema);\n  useEffect(() => {\n    dispatch(getUser(userId));\n    dispatch(getUserSchema());\n  }, [dispatch, userId]);\n  const onSubmit = data => {\n    delete data.id;\n    delete data.username;\n    delete data.roles;\n    dispatch(updateUser(userId, data)).then(() => toast.success(__jsx(Toast, {\n      success: true,\n      title: intl.formatMessage(messages.success),\n      content: intl.formatMessage(messages.saved),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }\n    })));\n    if (props.closeMenu) props.closeMenu();\n  };\n  const onCancel = () => {\n    if (props.closeMenu) props.closeMenu();else history.goBack();\n  };\n  return (userschema === null || userschema === void 0 ? void 0 : userschema.loaded) && __jsx(Form, {\n    formData: user,\n    schema: userschema.userschema,\n    onSubmit: onSubmit,\n    onCancel: onCancel,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  });\n};\nPersonalInformation.propTypes = {\n  closeMenu: PropTypes.func\n};\nexport default PersonalInformation;","map":{"version":3,"names":["React","useEffect","PropTypes","useDispatch","useSelector","useIntl","useHistory","jwtDecode","toast","messages","Toast","Form","getUser","updateUser","getUserSchema","PersonalInformation","props","intl","dispatch","history","user","state","users","userId","userSession","token","sub","loading","update","userschema","onSubmit","data","id","username","roles","then","success","__jsx","title","formatMessage","content","saved","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","closeMenu","onCancel","goBack","loaded","formData","schema","propTypes","func"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Preferences/PersonalInformation.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport jwtDecode from 'jwt-decode';\nimport { toast } from 'react-toastify';\nimport { messages } from '@plone/volto/helpers/MessageLabels/MessageLabels';\nimport Toast from '@plone/volto/components/manage/Toast/Toast';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { getUser, updateUser } from '@plone/volto/actions/users/users';\nimport { getUserSchema } from '@plone/volto/actions/userschema/userschema';\n\nconst PersonalInformation = (props) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector((state) => state.users.user);\n  const userId = useSelector((state) =>\n    state.userSession.token ? jwtDecode(state.userSession.token).sub : '',\n  );\n  const loading = useSelector((state) => state.users.update.loading);\n  const userschema = useSelector((state) => state.userschema);\n\n  useEffect(() => {\n    dispatch(getUser(userId));\n    dispatch(getUserSchema());\n  }, [dispatch, userId]);\n\n  const onSubmit = (data) => {\n    delete data.id;\n    delete data.username;\n    delete data.roles;\n    dispatch(updateUser(userId, data)).then(() =>\n      toast.success(\n        <Toast\n          success\n          title={intl.formatMessage(messages.success)}\n          content={intl.formatMessage(messages.saved)}\n        />,\n      ),\n    );\n    if (props.closeMenu) props.closeMenu();\n  };\n\n  const onCancel = () => {\n    if (props.closeMenu) props.closeMenu();\n    else history.goBack();\n  };\n\n  return (\n    userschema?.loaded && (\n      <Form\n        formData={user}\n        schema={userschema.userschema}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        loading={loading}\n      />\n    )\n  );\n};\n\nPersonalInformation.propTypes = {\n  closeMenu: PropTypes.func,\n};\n\nexport default PersonalInformation;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}