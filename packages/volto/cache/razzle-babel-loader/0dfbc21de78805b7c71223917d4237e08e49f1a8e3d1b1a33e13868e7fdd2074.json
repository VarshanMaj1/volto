{"ast":null,"code":"import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport jwtDecode from 'jwt-decode';\nimport { getUser } from '@plone/volto/actions/users/users';\nconst useUser = () => {\n  const users = useSelector(state => state.users);\n  const user = users === null || users === void 0 ? void 0 : users.user;\n  const userId = useSelector(state => state.userSession.token ? jwtDecode(state.userSession.token).sub : '');\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.id) && (users === null || users === void 0 ? void 0 : users.get.loading) === false) {\n      dispatch(getUser(userId));\n    }\n  }, [dispatch, userId, user, users === null || users === void 0 ? void 0 : users.get.loading]);\n  return user;\n};\nexport default useUser;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","jwtDecode","getUser","useUser","users","state","user","userId","userSession","token","sub","dispatch","id","get","loading"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/hooks/user/useUser.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport jwtDecode from 'jwt-decode';\nimport { getUser } from '@plone/volto/actions/users/users';\n\nconst useUser = () => {\n  const users = useSelector((state) => state.users);\n  const user = users?.user;\n  const userId = useSelector((state) =>\n    state.userSession.token ? jwtDecode(state.userSession.token).sub : '',\n  );\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!user?.id && users?.get.loading === false) {\n      dispatch(getUser(userId));\n    }\n  }, [dispatch, userId, user, users?.get.loading]);\n\n  return user;\n};\n\nexport default useUser;\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,QAAQ,kCAAkC;AAE1D,MAAMC,OAAO,GAAGA,CAAA,KAAM;EACpB,MAAMC,KAAK,GAAGJ,WAAW,CAAEK,KAAK,IAAKA,KAAK,CAACD,KAAK,CAAC;EACjD,MAAME,IAAI,GAAGF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEE,IAAI;EACxB,MAAMC,MAAM,GAAGP,WAAW,CAAEK,KAAK,IAC/BA,KAAK,CAACG,WAAW,CAACC,KAAK,GAAGR,SAAS,CAACI,KAAK,CAACG,WAAW,CAACC,KAAK,CAAC,CAACC,GAAG,GAAG,EACrE,CAAC;EACD,MAAMC,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,IAAI,EAACQ,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEM,EAAE,KAAI,CAAAR,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAES,GAAG,CAACC,OAAO,MAAK,KAAK,EAAE;MAC7CH,QAAQ,CAACT,OAAO,CAACK,MAAM,CAAC,CAAC;IAC3B;EACF,CAAC,EAAE,CAACI,QAAQ,EAAEJ,MAAM,EAAED,IAAI,EAAEF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAES,GAAG,CAACC,OAAO,CAAC,CAAC;EAEhD,OAAOR,IAAI;AACb,CAAC;AAED,eAAeH,OAAO","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}