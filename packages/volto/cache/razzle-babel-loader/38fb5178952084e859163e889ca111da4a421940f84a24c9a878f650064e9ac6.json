{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Search/components/DateRangeFacet.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Header } from 'semantic-ui-react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport { compose } from 'redux';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { toBackendLang } from '@plone/volto/helpers/Utils/Utils';\nimport { connect } from 'react-redux';\nimport leftKey from '@plone/volto/icons/left-key.svg';\nimport rightKey from '@plone/volto/icons/right-key.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport 'react-dates/initialize';\nimport 'react-dates/lib/css/_datepicker.css';\nconst messages = defineMessages({\n  startDate: {\n    \"id\": \"Start Date\",\n    \"defaultMessage\": \"Start Date\"\n  },\n  endDate: {\n    \"id\": \"End Date\",\n    \"defaultMessage\": \"End Date\"\n  }\n});\nconst PrevIcon = () => __jsx(\"div\", {\n  className: \"prev-icon\",\n  style: {\n    color: '#000',\n    left: '22px',\n    padding: '5px',\n    position: 'absolute',\n    top: '15px'\n  }\n  // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n  ,\n  tabIndex: \"0\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 3\n  }\n}, __jsx(Icon, {\n  name: leftKey,\n  size: \"30px\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }\n}));\nconst NextIcon = () => __jsx(\"div\", {\n  className: \"next-icon\",\n  style: {\n    color: '#000',\n    right: '22px',\n    padding: '5px',\n    position: 'absolute',\n    top: '15px'\n  }\n  // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n  ,\n  tabIndex: \"0\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 3\n  }\n}, __jsx(Icon, {\n  name: rightKey,\n  size: \"30px\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }\n}));\nconst CloseIcon = () => __jsx(Icon, {\n  name: clearSVG,\n  size: \"24px\",\n  className: \"close\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 25\n  }\n});\nconst DateRangeFacet = props => {\n  var _facet$title, _facet$field;\n  const {\n    facet,\n    isEditMode,\n    onChange,\n    value,\n    reactDates,\n    intl,\n    lang\n  } = props;\n  const moment = props.moment.default;\n  const {\n    DateRangePicker\n  } = reactDates;\n  const {\n    0: focused,\n    1: setFocused\n  } = useState(null);\n  return __jsx(\"div\", {\n    className: \"daterange-facet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, __jsx(Header, {\n    as: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, (_facet$title = facet === null || facet === void 0 ? void 0 : facet.title) !== null && _facet$title !== void 0 ? _facet$title : facet === null || facet === void 0 ? void 0 : (_facet$field = facet.field) === null || _facet$field === void 0 ? void 0 : _facet$field.label), __jsx(\"div\", {\n    className: \"ui form date-time-widget-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"ui input date-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, __jsx(DateRangePicker, {\n    startDate: value && value[0] ? moment(value[0]) : null,\n    startDateId: `${facet['@id']}-start-date`,\n    startDatePlaceholderText: intl.formatMessage(messages.startDate),\n    endDate: value && value[1] ? moment(value[1]) : null,\n    endDateId: `${facet['@id']}-end-date`,\n    endDatePlaceholderText: intl.formatMessage(messages.endDate),\n    numberOfMonths: 1,\n    disabled: isEditMode,\n    noBorder: true,\n    showClearDates: true,\n    customCloseIcon: __jsx(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 30\n      }\n    }),\n    displayFormat: moment.localeData(toBackendLang(lang)).longDateFormat('L'),\n    focusedInput: focused,\n    onFocusChange: focusedInput => setFocused(focusedInput),\n    onDatesChange: ({\n      startDate,\n      endDate\n    }) => {\n      onChange(facet.field.value, [startDate ? startDate.format('YYYY-MM-DD') : null, endDate ? endDate.format('YYYY-MM-DD') : null]);\n    },\n    isOutsideRange: () => false,\n    navPrev: __jsx(PrevIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 22\n      }\n    }),\n    navNext: __jsx(NextIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }))));\n};\nDateRangeFacet.stateToValue = ({\n  facetSettings,\n  index,\n  selectedValue\n}) => {\n  return selectedValue || [null, null];\n};\nDateRangeFacet.valueToQuery = ({\n  value,\n  facet\n}) => {\n  return value && typeof value[0] === 'string' && typeof value[1] === 'string' ? {\n    i: facet.field.value,\n    o: 'plone.app.querystring.operation.date.between',\n    v: value\n  } : null;\n};\nexport default compose(injectLazyLibs(['reactDates', 'moment']), connect(state => ({\n  lang: state.intl.locale\n})), injectIntl)(DateRangeFacet);","map":{"version":3,"names":["React","useState","Header","defineMessages","injectIntl","injectLazyLibs","compose","Icon","toBackendLang","connect","leftKey","rightKey","clearSVG","messages","startDate","endDate","PrevIcon","__jsx","className","style","color","left","padding","position","top","tabIndex","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","name","size","NextIcon","right","CloseIcon","DateRangeFacet","props","_facet$title","_facet$field","facet","isEditMode","onChange","value","reactDates","intl","lang","moment","default","DateRangePicker","focused","setFocused","as","title","field","label","startDateId","startDatePlaceholderText","formatMessage","endDateId","endDatePlaceholderText","numberOfMonths","disabled","noBorder","showClearDates","customCloseIcon","displayFormat","localeData","longDateFormat","focusedInput","onFocusChange","onDatesChange","format","isOutsideRange","navPrev","navNext","stateToValue","facetSettings","index","selectedValue","valueToQuery","i","o","v","state","locale"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Search/components/DateRangeFacet.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Header } from 'semantic-ui-react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport { compose } from 'redux';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport { toBackendLang } from '@plone/volto/helpers/Utils/Utils';\nimport { connect } from 'react-redux';\n\nimport leftKey from '@plone/volto/icons/left-key.svg';\nimport rightKey from '@plone/volto/icons/right-key.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\n\nimport 'react-dates/initialize';\nimport 'react-dates/lib/css/_datepicker.css';\n\nconst messages = defineMessages({\n  startDate: {\n    id: 'Start Date',\n    defaultMessage: 'Start Date',\n  },\n  endDate: {\n    id: 'End Date',\n    defaultMessage: 'End Date',\n  },\n});\n\nconst PrevIcon = () => (\n  <div\n    className=\"prev-icon\"\n    style={{\n      color: '#000',\n      left: '22px',\n      padding: '5px',\n      position: 'absolute',\n      top: '15px',\n    }}\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n    tabIndex=\"0\"\n  >\n    <Icon name={leftKey} size=\"30px\" />\n  </div>\n);\nconst NextIcon = () => (\n  <div\n    className=\"next-icon\"\n    style={{\n      color: '#000',\n      right: '22px',\n      padding: '5px',\n      position: 'absolute',\n      top: '15px',\n    }}\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n    tabIndex=\"0\"\n  >\n    <Icon name={rightKey} size=\"30px\" />\n  </div>\n);\n\nconst CloseIcon = () => <Icon name={clearSVG} size=\"24px\" className=\"close\" />;\n\nconst DateRangeFacet = (props) => {\n  const { facet, isEditMode, onChange, value, reactDates, intl, lang } = props;\n  const moment = props.moment.default;\n  const { DateRangePicker } = reactDates;\n  const [focused, setFocused] = useState(null);\n\n  return (\n    <div className=\"daterange-facet\">\n      <Header as=\"h4\">{facet?.title ?? facet?.field?.label}</Header>\n      <div className=\"ui form date-time-widget-wrapper\">\n        <div className=\"ui input date-input\">\n          <DateRangePicker\n            startDate={value && value[0] ? moment(value[0]) : null}\n            startDateId={`${facet['@id']}-start-date`}\n            startDatePlaceholderText={intl.formatMessage(messages.startDate)}\n            endDate={value && value[1] ? moment(value[1]) : null}\n            endDateId={`${facet['@id']}-end-date`}\n            endDatePlaceholderText={intl.formatMessage(messages.endDate)}\n            numberOfMonths={1}\n            disabled={isEditMode}\n            noBorder\n            showClearDates\n            customCloseIcon={<CloseIcon />}\n            displayFormat={moment\n              .localeData(toBackendLang(lang))\n              .longDateFormat('L')}\n            focusedInput={focused}\n            onFocusChange={(focusedInput) => setFocused(focusedInput)}\n            onDatesChange={({ startDate, endDate }) => {\n              onChange(facet.field.value, [\n                startDate ? startDate.format('YYYY-MM-DD') : null,\n                endDate ? endDate.format('YYYY-MM-DD') : null,\n              ]);\n            }}\n            isOutsideRange={() => false}\n            navPrev={<PrevIcon />}\n            navNext={<NextIcon />}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nDateRangeFacet.stateToValue = ({ facetSettings, index, selectedValue }) => {\n  return selectedValue || [null, null];\n};\n\nDateRangeFacet.valueToQuery = ({ value, facet }) => {\n  return value && typeof value[0] === 'string' && typeof value[1] === 'string'\n    ? {\n        i: facet.field.value,\n        o: 'plone.app.querystring.operation.date.between',\n        v: value,\n      }\n    : null;\n};\n\nexport default compose(\n  injectLazyLibs(['reactDates', 'moment']),\n  connect((state) => ({\n    lang: state.intl.locale,\n  })),\n  injectIntl,\n)(DateRangeFacet);\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Start Date","defaultMessage":"Start Date"},{"id":"End Date","defaultMessage":"End Date"}]}},"sourceType":"module","externalDependencies":[]}