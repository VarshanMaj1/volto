{"ast":null,"code":"const _excluded = [\"href\", \"item\", \"openLinkInNewTab\", \"download\", \"children\", \"className\", \"title\"];\nvar _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/UniversalLink/UniversalLink.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/*\n * UniversalLink\n * @module components/UniversalLink\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { HashLink as Link } from 'react-router-hash-link';\nimport { useSelector } from 'react-redux';\nimport { flattenToAppURL, isInternalURL, URLUtils } from '@plone/volto/helpers/Url/Url';\nimport config from '@plone/volto/registry';\nimport cx from 'classnames';\nconst UniversalLink = _ref => {\n  let {\n      href,\n      item = null,\n      openLinkInNewTab,\n      download = false,\n      children,\n      className = null,\n      title = null\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const token = useSelector(state => {\n    var _state$userSession;\n    return (_state$userSession = state.userSession) === null || _state$userSession === void 0 ? void 0 : _state$userSession.token;\n  });\n  let url = href;\n  if (!href && item) {\n    if (item['@id'] === '') {\n      url = config.settings.publicURL;\n    } else if (!item['@id']) {\n      // eslint-disable-next-line no-console\n      console.error('Invalid item passed to UniversalLink', item, props, children);\n      url = '#';\n    } else {\n      //case: generic item\n      url = flattenToAppURL(item['@id']);\n\n      //case: item like a Link\n      let remoteUrl = item.remoteUrl || item.getRemoteUrl;\n      if (!token && remoteUrl) {\n        url = remoteUrl;\n      }\n\n      //case: item of type 'File'\n      if (!token && config.settings.downloadableObjects.includes(item['@type'])) {\n        url = `${url}/@@download/file`;\n      }\n      if (!token && config.settings.viewableInBrowserObjects.includes(item['@type'])) {\n        url = `${url}/@@display-file/file`;\n      }\n    }\n  }\n  const isExternal = !isInternalURL(url);\n  const isDownload = !isExternal && url.includes('@@download') || download;\n  const isDisplayFile = !isExternal && url.includes('@@display-file') || false;\n  const checkedURL = URLUtils.checkAndNormalizeUrl(url);\n  url = checkedURL.url;\n  let tag = __jsx(Link, _extends({\n    to: flattenToAppURL(url),\n    target: (openLinkInNewTab !== null && openLinkInNewTab !== void 0 ? openLinkInNewTab : false) ? '_blank' : null,\n    title: title,\n    className: className,\n    smooth: config.settings.hashLinkSmoothScroll\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }), children);\n  if (isExternal) {\n    const isTelephoneOrMail = checkedURL.isMail || checkedURL.isTelephone;\n    tag = __jsx(\"a\", _extends({\n      href: url,\n      title: title,\n      target: !isTelephoneOrMail && !(openLinkInNewTab === false) ? '_blank' : null,\n      rel: \"noopener noreferrer\",\n      className: cx({\n        external: !isTelephoneOrMail\n      }, className)\n    }, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }), children);\n  } else if (isDownload) {\n    tag = __jsx(\"a\", _extends({\n      href: flattenToAppURL(url),\n      download: true,\n      title: title,\n      className: className\n    }, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }), children);\n  } else if (isDisplayFile) {\n    tag = __jsx(\"a\", _extends({\n      href: flattenToAppURL(url),\n      title: title,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: className\n    }, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }\n    }), children);\n  }\n  return tag;\n};\nUniversalLink.propTypes = {\n  href: PropTypes.string,\n  openLinkInNewTab: PropTypes.bool,\n  download: PropTypes.bool,\n  className: PropTypes.string,\n  title: PropTypes.string,\n  item: PropTypes.shape({\n    '@id': PropTypes.string.isRequired,\n    remoteUrl: PropTypes.string //of plone @type 'Link'\n  }),\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node])\n};\nexport default UniversalLink;","map":{"version":3,"names":["React","PropTypes","HashLink","Link","useSelector","flattenToAppURL","isInternalURL","URLUtils","config","cx","UniversalLink","_ref","href","item","openLinkInNewTab","download","children","className","title","props","_objectWithoutProperties","_excluded","token","state","_state$userSession","userSession","url","settings","publicURL","console","error","remoteUrl","getRemoteUrl","downloadableObjects","includes","viewableInBrowserObjects","isExternal","isDownload","isDisplayFile","checkedURL","checkAndNormalizeUrl","tag","__jsx","_extends","to","target","smooth","hashLinkSmoothScroll","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","isTelephoneOrMail","isMail","isTelephone","rel","external","propTypes","string","bool","shape","isRequired","oneOfType","arrayOf","node"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/UniversalLink/UniversalLink.jsx"],"sourcesContent":["/*\n * UniversalLink\n * @module components/UniversalLink\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { HashLink as Link } from 'react-router-hash-link';\nimport { useSelector } from 'react-redux';\nimport {\n  flattenToAppURL,\n  isInternalURL,\n  URLUtils,\n} from '@plone/volto/helpers/Url/Url';\n\nimport config from '@plone/volto/registry';\nimport cx from 'classnames';\n\nconst UniversalLink = ({\n  href,\n  item = null,\n  openLinkInNewTab,\n  download = false,\n  children,\n  className = null,\n  title = null,\n  ...props\n}) => {\n  const token = useSelector((state) => state.userSession?.token);\n\n  let url = href;\n  if (!href && item) {\n    if (item['@id'] === '') {\n      url = config.settings.publicURL;\n    } else if (!item['@id']) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Invalid item passed to UniversalLink',\n        item,\n        props,\n        children,\n      );\n      url = '#';\n    } else {\n      //case: generic item\n      url = flattenToAppURL(item['@id']);\n\n      //case: item like a Link\n      let remoteUrl = item.remoteUrl || item.getRemoteUrl;\n      if (!token && remoteUrl) {\n        url = remoteUrl;\n      }\n\n      //case: item of type 'File'\n      if (\n        !token &&\n        config.settings.downloadableObjects.includes(item['@type'])\n      ) {\n        url = `${url}/@@download/file`;\n      }\n\n      if (\n        !token &&\n        config.settings.viewableInBrowserObjects.includes(item['@type'])\n      ) {\n        url = `${url}/@@display-file/file`;\n      }\n    }\n  }\n\n  const isExternal = !isInternalURL(url);\n\n  const isDownload = (!isExternal && url.includes('@@download')) || download;\n  const isDisplayFile =\n    (!isExternal && url.includes('@@display-file')) || false;\n\n  const checkedURL = URLUtils.checkAndNormalizeUrl(url);\n\n  url = checkedURL.url;\n  let tag = (\n    <Link\n      to={flattenToAppURL(url)}\n      target={openLinkInNewTab ?? false ? '_blank' : null}\n      title={title}\n      className={className}\n      smooth={config.settings.hashLinkSmoothScroll}\n      {...props}\n    >\n      {children}\n    </Link>\n  );\n\n  if (isExternal) {\n    const isTelephoneOrMail = checkedURL.isMail || checkedURL.isTelephone;\n    tag = (\n      <a\n        href={url}\n        title={title}\n        target={\n          !isTelephoneOrMail && !(openLinkInNewTab === false) ? '_blank' : null\n        }\n        rel=\"noopener noreferrer\"\n        className={cx({ external: !isTelephoneOrMail }, className)}\n        {...props}\n      >\n        {children}\n      </a>\n    );\n  } else if (isDownload) {\n    tag = (\n      <a\n        href={flattenToAppURL(url)}\n        download\n        title={title}\n        className={className}\n        {...props}\n      >\n        {children}\n      </a>\n    );\n  } else if (isDisplayFile) {\n    tag = (\n      <a\n        href={flattenToAppURL(url)}\n        title={title}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className={className}\n        {...props}\n      >\n        {children}\n      </a>\n    );\n  }\n  return tag;\n};\n\nUniversalLink.propTypes = {\n  href: PropTypes.string,\n  openLinkInNewTab: PropTypes.bool,\n  download: PropTypes.bool,\n  className: PropTypes.string,\n  title: PropTypes.string,\n  item: PropTypes.shape({\n    '@id': PropTypes.string.isRequired,\n    remoteUrl: PropTypes.string, //of plone @type 'Link'\n  }),\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n};\n\nexport default UniversalLink;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,QAAQ,IAAIC,IAAI,QAAQ,wBAAwB;AACzD,SAASC,WAAW,QAAQ,aAAa;AACzC,SACEC,eAAe,EACfC,aAAa,EACbC,QAAQ,QACH,8BAA8B;AAErC,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,OAAOC,EAAE,MAAM,YAAY;AAE3B,MAAMC,aAAa,GAAGC,IAAA,IAShB;EAAA,IATiB;MACrBC,IAAI;MACJC,IAAI,GAAG,IAAI;MACXC,gBAAgB;MAChBC,QAAQ,GAAG,KAAK;MAChBC,QAAQ;MACRC,SAAS,GAAG,IAAI;MAChBC,KAAK,GAAG;IAEV,CAAC,GAAAP,IAAA;IADIQ,KAAK,GAAAC,wBAAA,CAAAT,IAAA,EAAAU,SAAA;EAER,MAAMC,KAAK,GAAGlB,WAAW,CAAEmB,KAAK;IAAA,IAAAC,kBAAA;IAAA,QAAAA,kBAAA,GAAKD,KAAK,CAACE,WAAW,cAAAD,kBAAA,uBAAjBA,kBAAA,CAAmBF,KAAK;EAAA,EAAC;EAE9D,IAAII,GAAG,GAAGd,IAAI;EACd,IAAI,CAACA,IAAI,IAAIC,IAAI,EAAE;IACjB,IAAIA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE;MACtBa,GAAG,GAAGlB,MAAM,CAACmB,QAAQ,CAACC,SAAS;IACjC,CAAC,MAAM,IAAI,CAACf,IAAI,CAAC,KAAK,CAAC,EAAE;MACvB;MACAgB,OAAO,CAACC,KAAK,CACX,sCAAsC,EACtCjB,IAAI,EACJM,KAAK,EACLH,QACF,CAAC;MACDU,GAAG,GAAG,GAAG;IACX,CAAC,MAAM;MACL;MACAA,GAAG,GAAGrB,eAAe,CAACQ,IAAI,CAAC,KAAK,CAAC,CAAC;;MAElC;MACA,IAAIkB,SAAS,GAAGlB,IAAI,CAACkB,SAAS,IAAIlB,IAAI,CAACmB,YAAY;MACnD,IAAI,CAACV,KAAK,IAAIS,SAAS,EAAE;QACvBL,GAAG,GAAGK,SAAS;MACjB;;MAEA;MACA,IACE,CAACT,KAAK,IACNd,MAAM,CAACmB,QAAQ,CAACM,mBAAmB,CAACC,QAAQ,CAACrB,IAAI,CAAC,OAAO,CAAC,CAAC,EAC3D;QACAa,GAAG,GAAG,GAAGA,GAAG,kBAAkB;MAChC;MAEA,IACE,CAACJ,KAAK,IACNd,MAAM,CAACmB,QAAQ,CAACQ,wBAAwB,CAACD,QAAQ,CAACrB,IAAI,CAAC,OAAO,CAAC,CAAC,EAChE;QACAa,GAAG,GAAG,GAAGA,GAAG,sBAAsB;MACpC;IACF;EACF;EAEA,MAAMU,UAAU,GAAG,CAAC9B,aAAa,CAACoB,GAAG,CAAC;EAEtC,MAAMW,UAAU,GAAI,CAACD,UAAU,IAAIV,GAAG,CAACQ,QAAQ,CAAC,YAAY,CAAC,IAAKnB,QAAQ;EAC1E,MAAMuB,aAAa,GAChB,CAACF,UAAU,IAAIV,GAAG,CAACQ,QAAQ,CAAC,gBAAgB,CAAC,IAAK,KAAK;EAE1D,MAAMK,UAAU,GAAGhC,QAAQ,CAACiC,oBAAoB,CAACd,GAAG,CAAC;EAErDA,GAAG,GAAGa,UAAU,CAACb,GAAG;EACpB,IAAIe,GAAG,GACLC,KAAA,CAACvC,IAAI,EAAAwC,QAAA;IACHC,EAAE,EAAEvC,eAAe,CAACqB,GAAG,CAAE;IACzBmB,MAAM,EAAE,CAAA/B,gBAAgB,aAAhBA,gBAAgB,cAAhBA,gBAAgB,GAAI,KAAK,IAAG,QAAQ,GAAG,IAAK;IACpDI,KAAK,EAAEA,KAAM;IACbD,SAAS,EAAEA,SAAU;IACrB6B,MAAM,EAAEtC,MAAM,CAACmB,QAAQ,CAACoB;EAAqB,GACzC5B,KAAK;IAAA6B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,IAERrC,QACG,CACP;EAED,IAAIoB,UAAU,EAAE;IACd,MAAMkB,iBAAiB,GAAGf,UAAU,CAACgB,MAAM,IAAIhB,UAAU,CAACiB,WAAW;IACrEf,GAAG,GACDC,KAAA,MAAAC,QAAA;MACE/B,IAAI,EAAEc,GAAI;MACVR,KAAK,EAAEA,KAAM;MACb2B,MAAM,EACJ,CAACS,iBAAiB,IAAI,EAAExC,gBAAgB,KAAK,KAAK,CAAC,GAAG,QAAQ,GAAG,IAClE;MACD2C,GAAG,EAAC,qBAAqB;MACzBxC,SAAS,EAAER,EAAE,CAAC;QAAEiD,QAAQ,EAAE,CAACJ;MAAkB,CAAC,EAAErC,SAAS;IAAE,GACvDE,KAAK;MAAA6B,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,IAERrC,QACA,CACJ;EACH,CAAC,MAAM,IAAIqB,UAAU,EAAE;IACrBI,GAAG,GACDC,KAAA,MAAAC,QAAA;MACE/B,IAAI,EAAEP,eAAe,CAACqB,GAAG,CAAE;MAC3BX,QAAQ;MACRG,KAAK,EAAEA,KAAM;MACbD,SAAS,EAAEA;IAAU,GACjBE,KAAK;MAAA6B,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,IAERrC,QACA,CACJ;EACH,CAAC,MAAM,IAAIsB,aAAa,EAAE;IACxBG,GAAG,GACDC,KAAA,MAAAC,QAAA;MACE/B,IAAI,EAAEP,eAAe,CAACqB,GAAG,CAAE;MAC3BR,KAAK,EAAEA,KAAM;MACb2B,MAAM,EAAC,QAAQ;MACfY,GAAG,EAAC,qBAAqB;MACzBxC,SAAS,EAAEA;IAAU,GACjBE,KAAK;MAAA6B,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,IAERrC,QACA,CACJ;EACH;EACA,OAAOyB,GAAG;AACZ,CAAC;AAED/B,aAAa,CAACiD,SAAS,GAAG;EACxB/C,IAAI,EAAEX,SAAS,CAAC2D,MAAM;EACtB9C,gBAAgB,EAAEb,SAAS,CAAC4D,IAAI;EAChC9C,QAAQ,EAAEd,SAAS,CAAC4D,IAAI;EACxB5C,SAAS,EAAEhB,SAAS,CAAC2D,MAAM;EAC3B1C,KAAK,EAAEjB,SAAS,CAAC2D,MAAM;EACvB/C,IAAI,EAAEZ,SAAS,CAAC6D,KAAK,CAAC;IACpB,KAAK,EAAE7D,SAAS,CAAC2D,MAAM,CAACG,UAAU;IAClChC,SAAS,EAAE9B,SAAS,CAAC2D,MAAM,CAAE;EAC/B,CAAC,CAAC;EACF5C,QAAQ,EAAEf,SAAS,CAAC+D,SAAS,CAAC,CAC5B/D,SAAS,CAACgE,OAAO,CAAChE,SAAS,CAACiE,IAAI,CAAC,EACjCjE,SAAS,CAACiE,IAAI,CACf;AACH,CAAC;AAED,eAAexD,aAAa","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}