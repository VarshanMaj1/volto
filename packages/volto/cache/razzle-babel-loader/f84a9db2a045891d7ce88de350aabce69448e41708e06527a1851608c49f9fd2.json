{"ast":null,"code":"import _extends from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _defineProperty from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Widgets/SchemaWidget.jsx\";\nvar __jsx = React.createElement;\n/**\n * SchemaWidget component.\n * @module components/manage/Widgets/SchemaWidget\n */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport PropTypes from 'prop-types';\nimport concat from 'lodash/concat';\nimport findIndex from 'lodash/findIndex';\nimport isString from 'lodash/isString';\nimport map from 'lodash/map';\nimport omit from 'lodash/omit';\nimport slice from 'lodash/slice';\nimport without from 'lodash/without';\nimport move from 'lodash-move';\nimport { Confirm, Form, Grid, Icon, Message, Segment } from 'semantic-ui-react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport { slugify } from '@plone/volto/helpers/Utils/Utils';\nimport SchemaWidgetFieldset from '@plone/volto/components/manage/Widgets/SchemaWidgetFieldset';\nimport { Field, ModalForm } from '@plone/volto/components/manage/Form';\nconst messages = defineMessages({\n  add: {\n    \"id\": \"Add\",\n    \"defaultMessage\": \"Add\"\n  },\n  addField: {\n    \"id\": \"Add field\",\n    \"defaultMessage\": \"Add field\"\n  },\n  addFieldset: {\n    \"id\": \"Add fieldset\",\n    \"defaultMessage\": \"Add fieldset\"\n  },\n  parentFieldSet: {\n    \"id\": \"Parent fieldset\",\n    \"defaultMessage\": \"Parent fieldset\"\n  },\n  editField: {\n    \"id\": \"Edit field\",\n    \"defaultMessage\": \"Edit field\"\n  },\n  editFieldset: {\n    \"id\": \"Edit fieldset\",\n    \"defaultMessage\": \"Edit fieldset\"\n  },\n  default: {\n    \"id\": \"Default\",\n    \"defaultMessage\": \"Default\"\n  },\n  idTitle: {\n    \"id\": \"Short Name\",\n    \"defaultMessage\": \"Short Name\"\n  },\n  idDescription: {\n    \"id\": \"Used for programmatic access to the fieldset.\",\n    \"defaultMessage\": \"Used for programmatic access to the fieldset.\"\n  },\n  choices: {\n    \"id\": \"Possible values\",\n    \"defaultMessage\": \"Possible values (Enter allowed choices one per line).\"\n  },\n  string: {\n    \"id\": \"String\",\n    \"defaultMessage\": \"String\"\n  },\n  text: {\n    \"id\": \"Text\",\n    \"defaultMessage\": \"Text\"\n  },\n  richtext: {\n    \"id\": \"Richtext\",\n    \"defaultMessage\": \"Richtext\"\n  },\n  checkbox: {\n    \"id\": \"Checkbox\",\n    \"defaultMessage\": \"Checkbox\"\n  },\n  selection: {\n    \"id\": \"Selection\",\n    \"defaultMessage\": \"Selection\"\n  },\n  type: {\n    \"id\": \"Type\",\n    \"defaultMessage\": \"Type\"\n  },\n  title: {\n    \"id\": \"Title\",\n    \"defaultMessage\": \"Title\"\n  },\n  description: {\n    \"id\": \"Description\",\n    \"defaultMessage\": \"Description\"\n  },\n  required: {\n    \"id\": \"Required\",\n    \"defaultMessage\": \"Required\"\n  },\n  minLength: {\n    \"id\": \"minLength\",\n    \"defaultMessage\": \"Minimum Length\"\n  },\n  maxLength: {\n    \"id\": \"maxLength\",\n    \"defaultMessage\": \"Maximum Length\"\n  },\n  minimum: {\n    \"id\": \"minimum\",\n    \"defaultMessage\": \"Start of the range\"\n  },\n  maximum: {\n    \"id\": \"maximum\",\n    \"defaultMessage\": \"End of the range (including the value itself)\"\n  },\n  deleteFieldset: {\n    \"id\": \"Are you sure you want to delete this fieldset including all fields?\",\n    \"defaultMessage\": \"Are you sure you want to delete this fieldset including all fields?\"\n  },\n  deleteField: {\n    \"id\": \"Are you sure you want to delete this field?\",\n    \"defaultMessage\": \"Are you sure you want to delete this field?\"\n  },\n  error: {\n    \"id\": \"Error\",\n    \"defaultMessage\": \"Error\"\n  }\n});\n\n/**\n * Makes a list of fieldset types formatted for select widget\n * @param {Object[]} listOfTypes array of strings\n * @param {*} intl\n * @returns {Object[]} example [['default', 'default']]\n */\nconst makeFieldsetList = (listOfFieldsets, intl) => {\n  const result = listOfFieldsets.map(type => [type.id, type.title]);\n  return result;\n};\n\n/**\n * schemaField used for modal form, when editing a field\n * - based on the factory a set of fields is presented\n * - fields can be moved to another fieldset\n * @param {string} factory - the kind of field\n * @param {Object} intl\n * @param {*} fieldsets\n * @return {Object} - schema\n */\nconst schemaField = (factory, intl, fieldsets) => ({\n  fieldsets: [{\n    id: 'default',\n    title: 'default',\n    fields: [...['title', 'description', 'parentFieldSet'], ...(factory => {\n      switch (factory) {\n        case 'Rich Text':\n          return ['maxLength'];\n        case 'URL':\n        case 'Password':\n        case 'label_password_field':\n        case 'Email':\n        case 'label_email':\n          return ['minLength', 'maxLength'];\n        case 'Integer':\n        case 'label_integer_field':\n          return ['minimum', 'maximum'];\n        case 'Floating-point number':\n        case 'label_float_field':\n        case 'Date/Time':\n        case 'label_datetime_field':\n        case 'Date':\n        case 'label_date_field':\n        case 'File':\n        case 'File Upload':\n        case 'Image':\n        case 'Yes/No':\n        case 'label_boolean_field':\n        case 'JSONField':\n        case 'Relation Choice':\n        case 'Relation List':\n          return [];\n        case 'Multiple Choice':\n        case 'label_multi_choice_field':\n        case 'Choice':\n        case 'label_choice_field':\n          return ['values'];\n        default:\n          return ['minLength', 'maxLength'];\n      }\n    })(factory), ...['required']]\n  }],\n  properties: _objectSpread({\n    title: {\n      type: 'string',\n      title: intl.formatMessage(messages.title)\n    },\n    description: {\n      type: 'string',\n      widget: 'textarea',\n      title: intl.formatMessage(messages.description)\n    },\n    parentFieldSet: {\n      type: 'string',\n      title: intl.formatMessage(messages.parentFieldSet),\n      choices: makeFieldsetList(fieldsets)\n    },\n    required: {\n      type: 'boolean',\n      title: intl.formatMessage(messages.required)\n    }\n  }, (factory => {\n    switch (factory) {\n      case 'Rich Text':\n        return {\n          maxLength: {\n            type: 'integer',\n            title: intl.formatMessage(messages.maxLength)\n          }\n        };\n      case 'URL':\n      case 'Password':\n      case 'label_password_field':\n      case 'Email':\n      case 'label_email':\n        return {\n          minLength: {\n            type: 'integer',\n            title: intl.formatMessage(messages.minLength)\n          },\n          maxLength: {\n            type: 'integer',\n            title: intl.formatMessage(messages.maxLength)\n          }\n        };\n      case 'Integer':\n      case 'label_integer_field':\n        return {\n          minimum: {\n            type: 'integer',\n            title: intl.formatMessage(messages.minimum)\n          },\n          maximum: {\n            type: 'integer',\n            title: intl.formatMessage(messages.maximum)\n          }\n        };\n      case 'Floating-point number':\n      case 'label_float_field':\n      case 'Date/Time':\n      case 'label_datetime_field':\n      case 'Date':\n      case 'label_date_field':\n      case 'File':\n      case 'File Upload':\n      case 'Image':\n      case 'Yes/No':\n      case 'label_boolean_field':\n      case 'JSONField':\n      case 'Relation Choice':\n      case 'Relation List':\n        return {};\n      case 'Multiple Choice':\n      case 'label_multi_choice_field':\n      case 'Choice':\n      case 'label_choice_field':\n        return {\n          values: {\n            type: 'string',\n            title: intl.formatMessage(messages.choices),\n            widget: 'textarea'\n          }\n        };\n      default:\n        return {\n          minLength: {\n            type: 'integer',\n            title: intl.formatMessage(messages.minLength)\n          },\n          maxLength: {\n            type: 'integer',\n            title: intl.formatMessage(messages.maxLength)\n          }\n        };\n    }\n  })(factory)),\n  required: ['type', 'title']\n});\n\n/**\n * schema for adding a new field\n * @param {Object} intl\n */\nconst fieldsetSchema = intl => ({\n  fieldsets: [{\n    id: 'default',\n    title: intl.formatMessage(messages.default),\n    fields: ['title', 'id']\n  }],\n  properties: {\n    id: {\n      type: 'string',\n      title: intl.formatMessage(messages.idTitle),\n      description: intl.formatMessage(messages.idDescription)\n    },\n    title: {\n      type: 'string',\n      title: intl.formatMessage(messages.title)\n    }\n  },\n  required: ['id', 'title']\n});\n\n/**\n * 'plone.dexterity.schema.generated' is considered user created\n * @param {Object} field\n */\nconst isEditable = field => !field.behavior || field.behavior.includes('generated');\nconst getItemStyle = (isDragging, draggableStyle) => _objectSpread({\n  // some basic styles to make the items look a bit nicer\n  userSelect: 'none',\n  // change background colour if dragging\n  background: isDragging ? 'white' : 'transparent'\n}, draggableStyle);\nconst getTabStyle = isDraggingOver => ({\n  background: isDraggingOver ? '#f4f4f4' : 'transparent',\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap'\n});\nconst getFieldStyle = isDraggingOver => ({\n  background: isDraggingOver ? '#f4f4f4' : 'transparent'\n});\n\n/**\n * will transform a string with new lines in an array for each item on a line\n * @param {string} textarea - has '\\r\\n' characters\n */\nconst formatTextareaToArray = textarea => {\n  const values = textarea && textarea ? textarea.split(/(\\r\\n|\\n|\\r)/gm).map(elem => elem.trim()).filter(elem => elem !== '') : null;\n  return values ? {\n    values\n  } : {};\n};\nconst formatArrayToTextarea = props => {\n  var _props$items;\n  if (props !== null && props !== void 0 && props.values) {\n    return props.values.join('\\n');\n  }\n  if (props !== null && props !== void 0 && props.choices) {\n    return props.choices.map(elem => elem[0]).join('\\n');\n  }\n  if (props !== null && props !== void 0 && (_props$items = props.items) !== null && _props$items !== void 0 && _props$items.choices) {\n    return props.items.choices.map(elem => elem[0]).join('\\n');\n  }\n  return '';\n};\nconst formatTextareaToChoices = (textarea, multiple) => {\n  const choices = textarea && textarea ? textarea.split(/(\\r\\n|\\n|\\r)/gm).map(elem => elem.trim()).filter(elem => elem !== '').map(elem => [elem, elem]) : null;\n  if (!multiple) {\n    return choices ? {\n      choices\n    } : {};\n  }\n  const items = choices ? {\n    choices: choices\n  } : {};\n  return items ? {\n    items\n  } : {};\n};\n\n/**\n * SchemaWidget component class.\n * @class SchemaWidget\n * @extends Component\n */\nclass SchemaWidget extends Component {\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.onChangeDefaultValue = this.onChangeDefaultValue.bind(this);\n    this.onAddField = this.onAddField.bind(this);\n    this.onAddFieldset = this.onAddFieldset.bind(this);\n    this.onEditField = this.onEditField.bind(this);\n    this.onEditFieldset = this.onEditFieldset.bind(this);\n    this.onDeleteFieldset = this.onDeleteFieldset.bind(this);\n    this.onDeleteField = this.onDeleteField.bind(this);\n    this.onShowAddField = this.onShowAddField.bind(this);\n    this.onShowAddFieldset = this.onShowAddFieldset.bind(this);\n    this.onShowEditFieldset = this.onShowEditFieldset.bind(this);\n    this.onShowEditField = this.onShowEditField.bind(this);\n    this.onShowDeleteFieldset = this.onShowDeleteFieldset.bind(this);\n    this.onShowDeleteField = this.onShowDeleteField.bind(this);\n    this.onSetCurrentFieldset = this.onSetCurrentFieldset.bind(this);\n    this.onOrderField = this.onOrderField.bind(this);\n    this.onOrderFieldset = this.onOrderFieldset.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.state = {\n      addField: null,\n      addFieldset: null,\n      editFieldset: null,\n      editField: null,\n      deleteFieldset: null,\n      deleteField: null,\n      currentFieldset: 0\n    };\n  }\n\n  /**\n   * Add field handler\n   * @method onAddField\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onAddField(values) {\n    const fieldId = slugify(values.title);\n    const currentFieldsetFields = this.props.value.fieldsets[this.state.currentFieldset].fields;\n    const hasChangeNote = currentFieldsetFields.indexOf('changeNote') > -1;\n    const newFieldsetFields = hasChangeNote ? [...currentFieldsetFields.slice(0, currentFieldsetFields.length - 1), fieldId, currentFieldsetFields[currentFieldsetFields.length - 1]] : [...currentFieldsetFields, fieldId];\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...slice(this.props.value.fieldsets, 0, this.state.currentFieldset), _objectSpread(_objectSpread({}, this.props.value.fieldsets[this.state.currentFieldset]), {}, {\n        fields: newFieldsetFields\n      }), ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1)],\n      properties: _objectSpread(_objectSpread({}, this.props.value.properties), {}, {\n        [fieldId]: _objectSpread({\n          title: values.title,\n          description: values.description,\n          id: fieldId\n        }, (factory => {\n          switch (factory) {\n            case 'Date/Time':\n            case 'label_datetime_field':\n              return {\n                type: 'string',\n                widget: 'datetime',\n                factory\n              };\n            case 'Date':\n            case 'label_date_field':\n              return {\n                type: 'string',\n                widget: 'date',\n                factory\n              };\n            case 'Email':\n            case 'label_email':\n              return {\n                type: 'string',\n                widget: 'email',\n                factory\n              };\n            case 'File':\n            case 'File Upload':\n              return {\n                type: 'object',\n                factory\n              };\n            case 'Floating-point number':\n            case 'label_float_field':\n              return {\n                type: 'number',\n                factory\n              };\n            case 'Integer':\n            case 'label_integer_field':\n              return {\n                type: 'integer',\n                factory\n              };\n            case 'Image':\n              return {\n                type: 'object',\n                factory\n              };\n            case 'JSONField':\n              return {\n                type: 'dict',\n                widget: 'json',\n                factory\n              };\n            case 'Multiple Choice':\n            case 'label_multi_choice_field':\n              return {\n                type: 'array',\n                factory\n              };\n            case 'Relation List':\n              return {\n                type: 'array',\n                factory\n              };\n            case 'Choice':\n            case 'label_choice_field':\n              return {\n                type: 'string',\n                choices: [],\n                factory\n              };\n            case 'Relation Choice':\n              return {\n                type: 'string',\n                factory\n              };\n            case 'Password':\n            case 'label_password_field':\n              return {\n                type: 'string',\n                widget: 'password',\n                factory\n              };\n            case 'Rich Text':\n              return {\n                type: 'string',\n                widget: 'richtext',\n                factory\n              };\n            case 'URL':\n              return {\n                type: 'string',\n                widget: 'url',\n                factory\n              };\n            case 'Yes/No':\n            case 'label_boolean_field':\n              return {\n                type: 'boolean',\n                factory\n              };\n            default:\n              return {\n                type: 'string',\n                factory\n              };\n          }\n        })(values.factory))\n      }),\n      required: values.required ? [...this.props.value.required, fieldId] : this.props.value.required\n    }));\n    this.onCancel();\n  }\n\n  /**\n   * Add fieldset handler\n   * @method onAddFieldset\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onAddFieldset(values) {\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...this.props.value.fieldsets, _objectSpread(_objectSpread({}, values), {}, {\n        fields: []\n      })]\n    }));\n    this.onCancel();\n  }\n\n  /**\n   * Edit fieldset handler\n   * @method onEditFieldset\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onEditFieldset(values) {\n    var _this$props$value$fie;\n    values.fields = values.fields || ((_this$props$value$fie = this.props.value.fieldsets[this.state.editFieldset]) === null || _this$props$value$fie === void 0 ? void 0 : _this$props$value$fie.fields) || [];\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...slice(this.props.value.fieldsets, 0, this.state.editFieldset), values, ...slice(this.props.value.fieldsets, this.state.editFieldset + 1)]\n    }));\n    this.onCancel();\n  }\n\n  /**\n   * Recreates the fieldset structure\n   * will move change name of the field if needed and\n   * change fieldset if changed\n   * @param {Object[]} fieldsets\n   * @param {string} parentFieldSet - id\n   * @param {number} currentFieldset - index\n   * @param {Object} oldfieldId\n   * @param {Object} newfieldId\n   * @returns {Object[]} fieldsets\n   */\n  editFieldset(fieldsets, parentFieldSet, currentFieldset, oldfieldId, newfieldId) {\n    const moveToFieldsetWithNewName = () => {\n      const newParentFieldsetIndex = fieldsets.findIndex(field => field.id === parentFieldSet);\n      const indexOfChangeNote = fieldsets[newParentFieldsetIndex].fields.indexOf('changeNote');\n      // remove from current fieldset\n      const fieldsetsWithoutField = [...slice(fieldsets, 0, currentFieldset), _objectSpread(_objectSpread({}, fieldsets[currentFieldset]), {}, {\n        fields: fieldsets[currentFieldset].fields.filter(fieldId => fieldId !== oldfieldId)\n      }), ...slice(fieldsets, currentFieldset + 1)];\n      const fieldsOfNewFieldset = indexOfChangeNote > -1 ? [...fieldsetsWithoutField[newParentFieldsetIndex].fields.slice(0, indexOfChangeNote + 1), oldfieldId, fieldsetsWithoutField[newParentFieldsetIndex].fields[indexOfChangeNote]] : [...fieldsetsWithoutField[newParentFieldsetIndex].fields, oldfieldId];\n\n      // add to new fieldset\n      const fieldsetsWithField = [...slice(fieldsetsWithoutField, 0, newParentFieldsetIndex), _objectSpread(_objectSpread({}, fieldsetsWithoutField[newParentFieldsetIndex]), {}, {\n        fields: fieldsOfNewFieldset\n      }), ...slice(fieldsetsWithoutField, newParentFieldsetIndex + 1)];\n      return fieldsetsWithField;\n    };\n    const changeNameInFieldset = () => {\n      return [...slice(fieldsets, 0, currentFieldset), _objectSpread(_objectSpread({}, fieldsets[currentFieldset]), {}, {\n        fields: map(fieldsets[currentFieldset].fields, field => field === oldfieldId ? newfieldId : field)\n      }), ...slice(fieldsets, currentFieldset + 1)];\n    };\n    const result = parentFieldSet !== fieldsets[currentFieldset].id ? moveToFieldsetWithNewName() : changeNameInFieldset();\n    return result;\n  }\n\n  /**\n   * Edit field handler\n   * recreates the schema based on field changes (properties, name, fieldset)\n   * @method onEditField\n   * @param {Object} values Field values\n   * @returns {undefined}\n   */\n  onEditField(values) {\n    var _this$props$value$pro, _this$props$value$pro2;\n    let formattedValues = _objectSpread({}, values);\n    const listOfProp = ['minLength', 'maxLength', 'minimum', 'maximum'];\n    listOfProp.forEach(prop => {\n      formattedValues = _objectSpread(_objectSpread({}, formattedValues), {\n        [prop]: values[prop] ? parseFloat(values[prop]) : null\n      });\n    });\n    const multiple = ((_this$props$value$pro = this.props.value.properties[this.state.editField.id]) === null || _this$props$value$pro === void 0 ? void 0 : _this$props$value$pro.factory) === 'Multiple Choice' || ((_this$props$value$pro2 = this.props.value.properties[this.state.editField.id]) === null || _this$props$value$pro2 === void 0 ? void 0 : _this$props$value$pro2.factory) === 'label_multi_choice_field';\n    const result = _objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: formattedValues.parentFieldSet ? this.editFieldset(this.props.value.fieldsets, formattedValues.parentFieldSet, this.state.currentFieldset, this.state.editField.id, formattedValues.id) : this.props.value.fieldsets,\n      properties: _objectSpread(_objectSpread({}, omit(this.props.value.properties, [this.state.editField.id])), {}, {\n        [formattedValues.id]: _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, this.props.value.properties[this.state.editField.id]), omit(formattedValues, ['id', 'parentFieldSet'])), formatTextareaToArray(formattedValues.values)), formatTextareaToChoices(formattedValues.values, multiple))\n      }),\n      required: formattedValues.required ? concat(without(this.props.value.required, this.state.editField.id), [formattedValues.id]) : without(this.props.value.required, this.state.editField.id)\n    });\n    this.onChange(result);\n    this.onCancel();\n  }\n\n  /**\n   * Delete fieldset handler\n   * @method onDeleteFieldset\n   * @returns {undefined}\n   */\n  onDeleteFieldset() {\n    if (this.state.currentFieldset > this.props.value.fieldsets.length - 2) {\n      this.setState({\n        currentFieldset: this.state.currentFieldset - 1\n      });\n    }\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...slice(this.props.value.fieldsets, 0, this.state.deleteFieldset), ...slice(this.props.value.fieldsets, this.state.deleteFieldset + 1)],\n      properties: omit(this.props.value.properties, this.props.value.fieldsets[this.state.deleteFieldset].fields)\n    }));\n    this.onCancel();\n  }\n\n  /**\n   * Delete field handler\n   * @method onDeleteField\n   * @returns {undefined}\n   */\n  onDeleteField() {\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...slice(this.props.value.fieldsets, 0, this.state.currentFieldset), _objectSpread(_objectSpread({}, this.props.value.fieldsets[this.state.currentFieldset]), {}, {\n        fields: without(this.props.value.fieldsets[this.state.currentFieldset].fields, this.state.deleteField)\n      }), ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1)],\n      properties: omit(this.props.value.properties, [this.state.deleteField])\n    }));\n    this.onCancel();\n  }\n\n  /**\n   * Change handler\n   * @method onChange\n   * @param {Object} value New schema\n   * @returns {undefined}\n   */\n  onChange(value) {\n    this.props.onChange(this.props.id, value);\n  }\n\n  /**\n   * Change default value handler\n   * @method onChangeDefaultValue\n   * @param {string} fieldId\n   * @param {string} fieldValue\n   */\n  onChangeDefaultValue(fieldId, fieldValue) {\n    // Default values can have irreversible consequence, thus skip it for now.\n    // const value = { default: fieldValue }\n    const value = {};\n    const fieldMerge = _objectSpread(_objectSpread({}, this.props.value.properties[fieldId]), value);\n    const propsMerge = _objectSpread(_objectSpread({}, this.props.value.properties), {\n      [fieldId]: fieldMerge\n    });\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      properties: propsMerge\n    }));\n  }\n\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n  onCancel() {\n    this.setState({\n      addField: null,\n      addFieldset: null,\n      editFieldset: null,\n      editField: null,\n      deleteFieldset: null,\n      deleteField: null\n    });\n  }\n\n  /**\n   * Show add field handler\n   * @method onShowAddField\n   * @returns {undefined}\n   */\n  onShowAddField(event) {\n    this.setState({\n      addField: true\n    });\n    event.preventDefault();\n  }\n\n  /**\n   * Show add fieldset handler\n   * @method onShowAddFieldset\n   * @returns {undefined}\n   */\n  onShowAddFieldset(event) {\n    this.setState({\n      addFieldset: true\n    });\n    event.preventDefault();\n  }\n\n  /**\n   * Show edit fieldset handler\n   * @method onShowEditFieldset\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onShowEditFieldset(index) {\n    this.setState({\n      editFieldset: index\n    });\n  }\n\n  /**\n   * Show edit field handler\n   * @method onShowEditField\n   * @param {string} id Id of field\n   * @param {Object} schema Schema of the field\n   * @returns {undefined}\n   */\n  onShowEditField(id, schema) {\n    return this.setState({\n      editField: {\n        id\n      }\n    });\n  }\n\n  /**\n   * Show delete fieldset handler\n   * @method onShowDeleteFieldset\n   * @param {Number} index Index of fieldset\n   * @param {Object} event Event object\n   * @returns {undefined}\n   */\n  onShowDeleteFieldset(index) {\n    this.setState({\n      deleteFieldset: index\n    });\n  }\n\n  /**\n   * Show delete field handler\n   * @method onShowDeleteField\n   * @param {String} field Field to delete\n   * @param {Object} event Event object\n   * @returns {undefined}\n   */\n  onShowDeleteField(field) {\n    this.setState({\n      deleteField: field\n    });\n  }\n\n  /**\n   * Set current fieldset handler\n   * @method onSetCurrentFieldset\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onSetCurrentFieldset(index) {\n    this.setState({\n      currentFieldset: index\n    });\n  }\n\n  /**\n   * On order fieldset\n   * @method onOrderField\n   * @param {number} index Index\n   * @param {number} delta Delta\n   * @returns {undefined}\n   */\n  onOrderField(index, delta) {\n    this.onChange(_objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: [...slice(this.props.value.fieldsets, 0, this.state.currentFieldset), _objectSpread(_objectSpread({}, this.props.value.fieldsets[this.state.currentFieldset]), {}, {\n        fields: move(this.props.value.fieldsets[this.state.currentFieldset].fields, index, delta)\n      }), ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1)]\n    }));\n  }\n\n  /**\n   * On order fieldset\n   * @method onOrderFieldset\n   * @param {number} index Index\n   * @param {number} delta Delta\n   * @returns {undefined}\n   */\n  onOrderFieldset(index, delta) {\n    const schema = _objectSpread(_objectSpread({}, this.props.value), {}, {\n      fieldsets: move(this.props.value.fieldsets, index, delta)\n    });\n    this.setState({\n      currentFieldset: findIndex(schema.fieldsets, {\n        id: schema.fieldsets[this.state.currentFieldset].id\n      })\n    });\n    this.onChange(schema);\n  }\n\n  /**\n   * Set current fieldset handler\n   * @method onDragEnd\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onDragEnd(result) {\n    if (result.destination && result.destination.droppableId === 'fields-schema-edit') {\n      this.onOrderField(result.source.index, result.destination.index);\n    }\n    if (result.destination && result.destination.droppableId === 'tabs-schema-edit') {\n      this.onOrderFieldset(result.source.index, result.destination.index);\n    }\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const {\n      error,\n      reactBeautifulDnd\n    } = this.props;\n    const {\n      Draggable,\n      DragDropContext,\n      Droppable\n    } = reactBeautifulDnd;\n    if (!this.props.value) {\n      return '';\n    }\n    const nonUserCreatedFields = this.props.value.fieldsets[this.state.currentFieldset].fields.filter(fieldId => !isEditable(this.props.value.properties[fieldId]) && fieldId !== 'changeNote');\n    const hasChangeNote = this.props.value.fieldsets[this.state.currentFieldset].fields.indexOf('changeNote') > -1;\n    const userCreatedFieldsStartingIndex = nonUserCreatedFields.length;\n    const lastUserCreatedFieldsIndex = hasChangeNote ? this.props.value.fieldsets[this.state.currentFieldset].fields.length - 1 : this.props.value.fieldsets[this.state.currentFieldset].fields.length;\n    // fields that were not created by the user, but are part of a behavior\n    const makeNonUserFields = () => map(this.props.value.fieldsets[this.state.currentFieldset].fields.slice(0, userCreatedFieldsStartingIndex), (field, index) => __jsx(\"div\", {\n      style: {\n        background: '#c7d5d859'\n      },\n      key: `${field}-${this.state.currentFieldset}-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1111,\n        columnNumber: 11\n      }\n    }, __jsx(Field, _extends({}, this.props.value.properties[field], {\n      id: field,\n      required: this.props.value.required.indexOf(field) !== -1,\n      onEdit: this.onShowEditField,\n      draggable: false,\n      isDisabled: true,\n      order: index,\n      onDelete: this.onShowDeleteField,\n      onChange: this.onChangeDefaultValue,\n      value: this.props.value.properties[field].default,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 13\n      }\n    }))));\n    // fields created by the user\n    const makeUserFields = () => map(this.props.value.fieldsets[this.state.currentFieldset].fields.slice(userCreatedFieldsStartingIndex, lastUserCreatedFieldsIndex), (field, index) => __jsx(Draggable, {\n      draggableId: field,\n      index: userCreatedFieldsStartingIndex + index,\n      key: `${field}-${this.state.currentFieldset}-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1138,\n        columnNumber: 11\n      }\n    }, (provided, snapshot) => __jsx(\"div\", _extends({\n      ref: provided.innerRef\n    }, provided.draggableProps, provided.dragHandleProps, {\n      style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1144,\n        columnNumber: 15\n      }\n    }), __jsx(Field, _extends({}, this.props.value.properties[field], {\n      id: field,\n      required: this.props.value.required.indexOf(field) !== -1,\n      onEdit: this.onShowEditField,\n      draggable: true,\n      isDisabled: false,\n      order: index,\n      onDelete: this.onShowDeleteField,\n      onChange: this.onChangeDefaultValue,\n      key: `${field}-${this.state.currentFieldset}-${index}`,\n      value: this.props.value.properties[field].default,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1153,\n        columnNumber: 17\n      }\n    })))));\n    const canAddFields = this.state.currentFieldset === 0 || !this.props.value.fieldsets[this.state.currentFieldset].behavior || this.props.value.fieldsets[this.state.currentFieldset].behavior.includes('generated');\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1180,\n        columnNumber: 7\n      }\n    }, __jsx(Segment.Group, {\n      style: {\n        margin: '-1rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1181,\n        columnNumber: 9\n      }\n    }, error.length > 0 && map(error, (err, index) => __jsx(Message, {\n      icon: \"warning\",\n      key: `${err}-${index}`,\n      negative: true,\n      attached: true,\n      header: this.props.intl.formatMessage(messages.error),\n      content: err,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1188,\n        columnNumber: 15\n      }\n    })), __jsx(DragDropContext, {\n      onDragEnd: this.onDragEnd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1197,\n        columnNumber: 11\n      }\n    }, __jsx(Droppable, {\n      droppableId: \"tabs-schema-edit\",\n      direction: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1198,\n        columnNumber: 13\n      }\n    }, (provided, snapshot) => __jsx(\"div\", _extends({\n      role: \"tablist\",\n      className: \"ui pointing secondary attached tabular menu\",\n      ref: provided.innerRef\n    }, provided.draggableProps, {\n      style: getTabStyle(snapshot.isDraggingOver),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1200,\n        columnNumber: 17\n      }\n    }), map(this.props.value.fieldsets, (fieldset, index) => __jsx(SchemaWidgetFieldset, {\n      key: `${fieldset.id}-${this.state.currentFieldset}-${index}`,\n      title: fieldset.title,\n      order: index,\n      active: index === this.state.currentFieldset,\n      onClick: this.onSetCurrentFieldset,\n      onShowEditFieldset: this.onShowEditFieldset,\n      onShowDeleteFieldset: this.onShowDeleteFieldset,\n      onOrderFieldset: this.onOrderFieldset,\n      getItemStyle: getItemStyle,\n      isDraggable: true,\n      isDisabled: fieldset.behavior ? !fieldset.behavior.includes('generated') : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1208,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"item item-add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1226,\n        columnNumber: 19\n      }\n    }, __jsx(\"button\", {\n      \"aria-label\": this.props.intl.formatMessage(messages.add),\n      className: \"item ui noborder button\",\n      onClick: this.onShowAddFieldset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1227,\n        columnNumber: 21\n      }\n    }, __jsx(Icon, {\n      name: \"plus\",\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1232,\n        columnNumber: 23\n      }\n    }))), provided.placeholder)), makeNonUserFields(), __jsx(Droppable, {\n      droppableId: \"fields-schema-edit\",\n      direction: \"vertical\",\n      type: \"fixed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1243,\n        columnNumber: 13\n      }\n    }, (provided, snapshot) => __jsx(\"div\", _extends({\n      ref: provided.innerRef\n    }, provided.draggableProps, {\n      style: getFieldStyle(snapshot.isDraggingOver),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1249,\n        columnNumber: 17\n      }\n    }), makeUserFields(), provided.placeholder))), hasChangeNote ? __jsx(\"div\", {\n      style: {\n        background: '#c7d5d859'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1263,\n        columnNumber: 13\n      }\n    }, __jsx(Field, _extends({}, this.props.value.properties.changeNote, {\n      id: 'changeNote',\n      required: this.props.value.required.indexOf('changeNote') !== -1,\n      onEdit: this.onShowEditField,\n      draggable: false,\n      isDisabled: true,\n      order: this.props.value.fieldsets[this.state.currentFieldset].length - 1,\n      onDelete: this.onShowDeleteField,\n      onChange: this.onChangeDefaultValue,\n      key: 'changeNote',\n      value: this.props.value.properties.changeNote.default,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1264,\n        columnNumber: 15\n      }\n    }))) : null, canAddFields && __jsx(Form.Field, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1286,\n        columnNumber: 13\n      }\n    }, __jsx(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1287,\n        columnNumber: 15\n      }\n    }, __jsx(Grid.Row, {\n      stretched: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1288,\n        columnNumber: 17\n      }\n    }, __jsx(Grid.Column, {\n      width: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1289,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1290,\n        columnNumber: 21\n      }\n    }, __jsx(\"label\", {\n      htmlFor: \"addfield\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1291,\n        columnNumber: 23\n      }\n    }, this.props.intl.formatMessage(messages.addField))), __jsx(\"div\", {\n      className: \"toolbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1295,\n        columnNumber: 21\n      }\n    }, __jsx(\"button\", {\n      \"aria-label\": this.props.intl.formatMessage(messages.add),\n      id: \"addfield\",\n      className: \"item ui noborder button\",\n      onClick: this.onShowAddField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 23\n      }\n    }, __jsx(Icon, {\n      name: \"plus\",\n      color: \"blue\",\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1302,\n        columnNumber: 25\n      }\n    })))))))), this.state.addField !== null && __jsx(ModalForm, {\n      onSubmit: this.onAddField,\n      onCancel: this.onCancel,\n      title: this.props.intl.formatMessage(messages.addField),\n      formData: {\n        type: '',\n        id: '',\n        title: ''\n      },\n      schema: {\n        fieldsets: [{\n          id: 'default',\n          title: this.props.intl.formatMessage(messages.default),\n          fields: ['factory', 'title', 'description', 'required']\n        }],\n        properties: {\n          factory: {\n            type: 'string',\n            factory: 'Choice',\n            title: this.props.intl.formatMessage(messages.type),\n            vocabulary: {\n              '@id': `Fields`\n            }\n          },\n          title: {\n            type: 'string',\n            title: this.props.intl.formatMessage(messages.title)\n          },\n          description: {\n            type: 'string',\n            widget: 'textarea',\n            title: this.props.intl.formatMessage(messages.description)\n          },\n          required: {\n            type: 'boolean',\n            title: this.props.intl.formatMessage(messages.required)\n          }\n        },\n        required: ['type', 'title']\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1312,\n        columnNumber: 11\n      }\n    }), this.state.editField !== null && __jsx(ModalForm, {\n      onSubmit: this.onEditField,\n      onCancel: this.onCancel,\n      title: this.props.intl.formatMessage(messages.editField),\n      formData: _objectSpread(_objectSpread({}, this.props.value.properties[this.state.editField.id]), {}, {\n        id: this.state.editField.id,\n        required: this.props.value.required.indexOf(this.state.editField.id) !== -1,\n        parentFieldSet: this.props.value.fieldsets[this.state.currentFieldset].id,\n        values: formatArrayToTextarea(this.props.value.properties[this.state.editField.id])\n      }),\n      schema: schemaField(this.props.value.properties[this.state.editField.id].factory, this.props.intl, this.props.value.fieldsets.filter(fieldset => !fieldset.behavior || fieldset.id === 'default' || fieldset.behavior.includes('generated'))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1357,\n        columnNumber: 11\n      }\n    }), this.state.addFieldset !== null && __jsx(ModalForm, {\n      onSubmit: this.onAddFieldset,\n      onCancel: this.onCancel,\n      title: this.props.intl.formatMessage(messages.addFieldset),\n      formData: {\n        id: '',\n        title: ''\n      },\n      schema: fieldsetSchema(this.props.intl),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1386,\n        columnNumber: 11\n      }\n    }), this.state.editFieldset !== null && __jsx(ModalForm, {\n      onSubmit: this.onEditFieldset,\n      onCancel: this.onCancel,\n      title: this.props.intl.formatMessage(messages.editFieldset),\n      formData: {\n        id: this.props.value.fieldsets[this.state.editFieldset].id,\n        title: this.props.value.fieldsets[this.state.editFieldset].title\n      },\n      schema: fieldsetSchema(this.props.intl),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1398,\n        columnNumber: 11\n      }\n    }), this.state.deleteFieldset !== null && __jsx(Confirm, {\n      open: true,\n      content: this.props.intl.formatMessage(messages.deleteFieldset),\n      onCancel: this.onCancel,\n      onConfirm: this.onDeleteFieldset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1410,\n        columnNumber: 11\n      }\n    }), this.state.deleteField !== null && __jsx(Confirm, {\n      open: true,\n      content: this.props.intl.formatMessage(messages.deleteField),\n      onCancel: this.onCancel,\n      onConfirm: this.onDeleteField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1418,\n        columnNumber: 11\n      }\n    }));\n  }\n}\n/**\n * Property types.\n * @property {Object} propTypes Property types.\n * @static\n */\n_defineProperty(SchemaWidget, \"propTypes\", {\n  /**\n   * Id of the field\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Title of the field\n   */\n  required: PropTypes.bool,\n  /**\n   * Value of the field\n   */\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  /**\n   * List of error messages\n   */\n  error: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * On change handler\n   */\n  onChange: PropTypes.func.isRequired\n  /**\n   * Intl object\n   */\n});\n/**\n * Default properties\n * @property {Object} defaultProps Default properties.\n * @static\n */\n_defineProperty(SchemaWidget, \"defaultProps\", {\n  required: false,\n  value: {},\n  error: []\n});\nexport default compose(injectIntl, injectLazyLibs(['reactBeautifulDnd']), connect((state, props) => ({\n  value: isString(props.value) ? JSON.parse(props.value) : props.value\n}), {}))(SchemaWidget);","map":{"version":3,"names":["React","Component","connect","compose","PropTypes","concat","findIndex","isString","map","omit","slice","without","move","Confirm","Form","Grid","Icon","Message","Segment","defineMessages","injectIntl","injectLazyLibs","slugify","SchemaWidgetFieldset","Field","ModalForm","messages","add","addField","addFieldset","parentFieldSet","editField","editFieldset","default","idTitle","idDescription","choices","string","text","richtext","checkbox","selection","type","title","description","required","minLength","maxLength","minimum","maximum","deleteFieldset","deleteField","error","makeFieldsetList","listOfFieldsets","intl","result","id","schemaField","factory","fieldsets","fields","properties","_objectSpread","formatMessage","widget","values","fieldsetSchema","isEditable","field","behavior","includes","getItemStyle","isDragging","draggableStyle","userSelect","background","getTabStyle","isDraggingOver","display","flexDirection","flexWrap","getFieldStyle","formatTextareaToArray","textarea","split","elem","trim","filter","formatArrayToTextarea","props","_props$items","join","items","formatTextareaToChoices","multiple","SchemaWidget","constructor","onChange","bind","onChangeDefaultValue","onAddField","onAddFieldset","onEditField","onEditFieldset","onDeleteFieldset","onDeleteField","onShowAddField","onShowAddFieldset","onShowEditFieldset","onShowEditField","onShowDeleteFieldset","onShowDeleteField","onSetCurrentFieldset","onOrderField","onOrderFieldset","onCancel","onDragEnd","state","currentFieldset","fieldId","currentFieldsetFields","value","hasChangeNote","indexOf","newFieldsetFields","length","_this$props$value$fie","oldfieldId","newfieldId","moveToFieldsetWithNewName","newParentFieldsetIndex","indexOfChangeNote","fieldsetsWithoutField","fieldsOfNewFieldset","fieldsetsWithField","changeNameInFieldset","_this$props$value$pro","_this$props$value$pro2","formattedValues","listOfProp","forEach","prop","parseFloat","setState","fieldValue","fieldMerge","propsMerge","event","preventDefault","index","schema","delta","destination","droppableId","source","render","reactBeautifulDnd","Draggable","DragDropContext","Droppable","nonUserCreatedFields","userCreatedFieldsStartingIndex","lastUserCreatedFieldsIndex","makeNonUserFields","__jsx","style","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_extends","onEdit","draggable","isDisabled","order","onDelete","makeUserFields","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","canAddFields","Group","margin","err","icon","negative","attached","header","content","direction","role","className","fieldset","active","onClick","isDraggable","name","size","placeholder","changeNote","inline","Row","stretched","Column","width","htmlFor","color","onSubmit","formData","vocabulary","open","onConfirm","_defineProperty","isRequired","bool","oneOfType","object","arrayOf","func","JSON","parse"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Widgets/SchemaWidget.jsx"],"sourcesContent":["/**\n * SchemaWidget component.\n * @module components/manage/Widgets/SchemaWidget\n */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport PropTypes from 'prop-types';\nimport concat from 'lodash/concat';\nimport findIndex from 'lodash/findIndex';\nimport isString from 'lodash/isString';\nimport map from 'lodash/map';\nimport omit from 'lodash/omit';\nimport slice from 'lodash/slice';\nimport without from 'lodash/without';\nimport move from 'lodash-move';\nimport { Confirm, Form, Grid, Icon, Message, Segment } from 'semantic-ui-react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { injectLazyLibs } from '@plone/volto/helpers/Loadable/Loadable';\nimport { slugify } from '@plone/volto/helpers/Utils/Utils';\n\nimport SchemaWidgetFieldset from '@plone/volto/components/manage/Widgets/SchemaWidgetFieldset';\nimport { Field, ModalForm } from '@plone/volto/components/manage/Form';\n\nconst messages = defineMessages({\n  add: {\n    id: 'Add',\n    defaultMessage: 'Add',\n  },\n  addField: {\n    id: 'Add field',\n    defaultMessage: 'Add field',\n  },\n  addFieldset: {\n    id: 'Add fieldset',\n    defaultMessage: 'Add fieldset',\n  },\n  parentFieldSet: {\n    id: 'Parent fieldset',\n    defaultMessage: 'Parent fieldset',\n  },\n  editField: {\n    id: 'Edit field',\n    defaultMessage: 'Edit field',\n  },\n  editFieldset: {\n    id: 'Edit fieldset',\n    defaultMessage: 'Edit fieldset',\n  },\n  default: {\n    id: 'Default',\n    defaultMessage: 'Default',\n  },\n  idTitle: {\n    id: 'Short Name',\n    defaultMessage: 'Short Name',\n  },\n  idDescription: {\n    id: 'Used for programmatic access to the fieldset.',\n    defaultMessage: 'Used for programmatic access to the fieldset.',\n  },\n  choices: {\n    id: 'Possible values',\n    defaultMessage: 'Possible values (Enter allowed choices one per line).',\n  },\n  string: {\n    id: 'String',\n    defaultMessage: 'String',\n  },\n  text: {\n    id: 'Text',\n    defaultMessage: 'Text',\n  },\n  richtext: {\n    id: 'Richtext',\n    defaultMessage: 'Richtext',\n  },\n  checkbox: {\n    id: 'Checkbox',\n    defaultMessage: 'Checkbox',\n  },\n  selection: {\n    id: 'Selection',\n    defaultMessage: 'Selection',\n  },\n  type: {\n    id: 'Type',\n    defaultMessage: 'Type',\n  },\n  title: {\n    id: 'Title',\n    defaultMessage: 'Title',\n  },\n  description: {\n    id: 'Description',\n    defaultMessage: 'Description',\n  },\n  required: {\n    id: 'Required',\n    defaultMessage: 'Required',\n  },\n  minLength: {\n    id: 'minLength',\n    defaultMessage: 'Minimum Length',\n  },\n  maxLength: {\n    id: 'maxLength',\n    defaultMessage: 'Maximum Length',\n  },\n  minimum: {\n    id: 'minimum',\n    defaultMessage: 'Start of the range',\n  },\n  maximum: {\n    id: 'maximum',\n    defaultMessage: 'End of the range (including the value itself)',\n  },\n  deleteFieldset: {\n    id: 'Are you sure you want to delete this fieldset including all fields?',\n    defaultMessage:\n      'Are you sure you want to delete this fieldset including all fields?',\n  },\n  deleteField: {\n    id: 'Are you sure you want to delete this field?',\n    defaultMessage: 'Are you sure you want to delete this field?',\n  },\n  error: {\n    id: 'Error',\n    defaultMessage: 'Error',\n  },\n});\n\n/**\n * Makes a list of fieldset types formatted for select widget\n * @param {Object[]} listOfTypes array of strings\n * @param {*} intl\n * @returns {Object[]} example [['default', 'default']]\n */\nconst makeFieldsetList = (listOfFieldsets, intl) => {\n  const result = listOfFieldsets.map((type) => [type.id, type.title]);\n  return result;\n};\n\n/**\n * schemaField used for modal form, when editing a field\n * - based on the factory a set of fields is presented\n * - fields can be moved to another fieldset\n * @param {string} factory - the kind of field\n * @param {Object} intl\n * @param {*} fieldsets\n * @return {Object} - schema\n */\nconst schemaField = (factory, intl, fieldsets) => ({\n  fieldsets: [\n    {\n      id: 'default',\n      title: 'default',\n      fields: [\n        ...['title', 'description', 'parentFieldSet'],\n        ...((factory) => {\n          switch (factory) {\n            case 'Rich Text':\n              return ['maxLength'];\n            case 'URL':\n            case 'Password':\n            case 'label_password_field':\n            case 'Email':\n            case 'label_email':\n              return ['minLength', 'maxLength'];\n            case 'Integer':\n            case 'label_integer_field':\n              return ['minimum', 'maximum'];\n            case 'Floating-point number':\n            case 'label_float_field':\n            case 'Date/Time':\n            case 'label_datetime_field':\n            case 'Date':\n            case 'label_date_field':\n            case 'File':\n            case 'File Upload':\n            case 'Image':\n            case 'Yes/No':\n            case 'label_boolean_field':\n            case 'JSONField':\n            case 'Relation Choice':\n            case 'Relation List':\n              return [];\n            case 'Multiple Choice':\n            case 'label_multi_choice_field':\n            case 'Choice':\n            case 'label_choice_field':\n              return ['values'];\n            default:\n              return ['minLength', 'maxLength'];\n          }\n        })(factory),\n        ...['required'],\n      ],\n    },\n  ],\n  properties: {\n    title: {\n      type: 'string',\n      title: intl.formatMessage(messages.title),\n    },\n    description: {\n      type: 'string',\n      widget: 'textarea',\n      title: intl.formatMessage(messages.description),\n    },\n    parentFieldSet: {\n      type: 'string',\n      title: intl.formatMessage(messages.parentFieldSet),\n      choices: makeFieldsetList(fieldsets),\n    },\n    required: {\n      type: 'boolean',\n      title: intl.formatMessage(messages.required),\n    },\n    ...((factory) => {\n      switch (factory) {\n        case 'Rich Text':\n          return {\n            maxLength: {\n              type: 'integer',\n              title: intl.formatMessage(messages.maxLength),\n            },\n          };\n        case 'URL':\n        case 'Password':\n        case 'label_password_field':\n        case 'Email':\n        case 'label_email':\n          return {\n            minLength: {\n              type: 'integer',\n              title: intl.formatMessage(messages.minLength),\n            },\n            maxLength: {\n              type: 'integer',\n              title: intl.formatMessage(messages.maxLength),\n            },\n          };\n        case 'Integer':\n        case 'label_integer_field':\n          return {\n            minimum: {\n              type: 'integer',\n              title: intl.formatMessage(messages.minimum),\n            },\n            maximum: {\n              type: 'integer',\n              title: intl.formatMessage(messages.maximum),\n            },\n          };\n        case 'Floating-point number':\n        case 'label_float_field':\n        case 'Date/Time':\n        case 'label_datetime_field':\n        case 'Date':\n        case 'label_date_field':\n        case 'File':\n        case 'File Upload':\n        case 'Image':\n        case 'Yes/No':\n        case 'label_boolean_field':\n        case 'JSONField':\n        case 'Relation Choice':\n        case 'Relation List':\n          return {};\n        case 'Multiple Choice':\n        case 'label_multi_choice_field':\n        case 'Choice':\n        case 'label_choice_field':\n          return {\n            values: {\n              type: 'string',\n              title: intl.formatMessage(messages.choices),\n              widget: 'textarea',\n            },\n          };\n        default:\n          return {\n            minLength: {\n              type: 'integer',\n              title: intl.formatMessage(messages.minLength),\n            },\n            maxLength: {\n              type: 'integer',\n              title: intl.formatMessage(messages.maxLength),\n            },\n          };\n      }\n    })(factory),\n  },\n  required: ['type', 'title'],\n});\n\n/**\n * schema for adding a new field\n * @param {Object} intl\n */\nconst fieldsetSchema = (intl) => ({\n  fieldsets: [\n    {\n      id: 'default',\n      title: intl.formatMessage(messages.default),\n      fields: ['title', 'id'],\n    },\n  ],\n  properties: {\n    id: {\n      type: 'string',\n      title: intl.formatMessage(messages.idTitle),\n      description: intl.formatMessage(messages.idDescription),\n    },\n    title: {\n      type: 'string',\n      title: intl.formatMessage(messages.title),\n    },\n  },\n  required: ['id', 'title'],\n});\n\n/**\n * 'plone.dexterity.schema.generated' is considered user created\n * @param {Object} field\n */\nconst isEditable = (field) =>\n  !field.behavior || field.behavior.includes('generated');\n\nconst getItemStyle = (isDragging, draggableStyle) => ({\n  // some basic styles to make the items look a bit nicer\n  userSelect: 'none',\n\n  // change background colour if dragging\n  background: isDragging ? 'white' : 'transparent',\n\n  // styles we need to apply on draggable\n  ...draggableStyle,\n});\n\nconst getTabStyle = (isDraggingOver) => ({\n  background: isDraggingOver ? '#f4f4f4' : 'transparent',\n  display: 'flex',\n  flexDirection: 'row',\n  flexWrap: 'wrap',\n});\n\nconst getFieldStyle = (isDraggingOver) => ({\n  background: isDraggingOver ? '#f4f4f4' : 'transparent',\n});\n\n/**\n * will transform a string with new lines in an array for each item on a line\n * @param {string} textarea - has '\\r\\n' characters\n */\nconst formatTextareaToArray = (textarea) => {\n  const values =\n    textarea && textarea\n      ? textarea\n          .split(/(\\r\\n|\\n|\\r)/gm)\n          .map((elem) => elem.trim())\n          .filter((elem) => elem !== '')\n      : null;\n\n  return values ? { values } : {};\n};\n\nconst formatArrayToTextarea = (props) => {\n  if (props?.values) {\n    return props.values.join('\\n');\n  }\n  if (props?.choices) {\n    return props.choices.map((elem) => elem[0]).join('\\n');\n  }\n  if (props?.items?.choices) {\n    return props.items.choices.map((elem) => elem[0]).join('\\n');\n  }\n  return '';\n};\n\nconst formatTextareaToChoices = (textarea, multiple) => {\n  const choices =\n    textarea && textarea\n      ? textarea\n          .split(/(\\r\\n|\\n|\\r)/gm)\n          .map((elem) => elem.trim())\n          .filter((elem) => elem !== '')\n          .map((elem) => [elem, elem])\n      : null;\n\n  if (!multiple) {\n    return choices ? { choices } : {};\n  }\n\n  const items = choices ? { choices: choices } : {};\n  return items ? { items } : {};\n};\n\n/**\n * SchemaWidget component class.\n * @class SchemaWidget\n * @extends Component\n */\nclass SchemaWidget extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    /**\n     * Id of the field\n     */\n    id: PropTypes.string.isRequired,\n    /**\n     * Title of the field\n     */\n    required: PropTypes.bool,\n    /**\n     * Value of the field\n     */\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    /**\n     * List of error messages\n     */\n    error: PropTypes.arrayOf(PropTypes.string),\n    /**\n     * On change handler\n     */\n    onChange: PropTypes.func.isRequired,\n    /**\n     * Intl object\n     */\n  };\n\n  /**\n   * Default properties\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n  static defaultProps = {\n    required: false,\n    value: {},\n    error: [],\n  };\n\n  /**\n   * Constructor\n   * @method constructor\n   * @param {Object} props Component properties\n   * @constructs WysiwygEditor\n   */\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.onChangeDefaultValue = this.onChangeDefaultValue.bind(this);\n    this.onAddField = this.onAddField.bind(this);\n    this.onAddFieldset = this.onAddFieldset.bind(this);\n    this.onEditField = this.onEditField.bind(this);\n    this.onEditFieldset = this.onEditFieldset.bind(this);\n    this.onDeleteFieldset = this.onDeleteFieldset.bind(this);\n    this.onDeleteField = this.onDeleteField.bind(this);\n    this.onShowAddField = this.onShowAddField.bind(this);\n    this.onShowAddFieldset = this.onShowAddFieldset.bind(this);\n    this.onShowEditFieldset = this.onShowEditFieldset.bind(this);\n    this.onShowEditField = this.onShowEditField.bind(this);\n    this.onShowDeleteFieldset = this.onShowDeleteFieldset.bind(this);\n    this.onShowDeleteField = this.onShowDeleteField.bind(this);\n    this.onSetCurrentFieldset = this.onSetCurrentFieldset.bind(this);\n    this.onOrderField = this.onOrderField.bind(this);\n    this.onOrderFieldset = this.onOrderFieldset.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.state = {\n      addField: null,\n      addFieldset: null,\n      editFieldset: null,\n      editField: null,\n      deleteFieldset: null,\n      deleteField: null,\n      currentFieldset: 0,\n    };\n  }\n\n  /**\n   * Add field handler\n   * @method onAddField\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onAddField(values) {\n    const fieldId = slugify(values.title);\n    const currentFieldsetFields =\n      this.props.value.fieldsets[this.state.currentFieldset].fields;\n    const hasChangeNote = currentFieldsetFields.indexOf('changeNote') > -1;\n    const newFieldsetFields = hasChangeNote\n      ? [\n          ...currentFieldsetFields.slice(0, currentFieldsetFields.length - 1),\n          fieldId,\n          currentFieldsetFields[currentFieldsetFields.length - 1],\n        ]\n      : [...currentFieldsetFields, fieldId];\n\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...slice(this.props.value.fieldsets, 0, this.state.currentFieldset),\n        {\n          ...this.props.value.fieldsets[this.state.currentFieldset],\n          fields: newFieldsetFields,\n        },\n        ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1),\n      ],\n      properties: {\n        ...this.props.value.properties,\n        [fieldId]: {\n          title: values.title,\n          description: values.description,\n          id: fieldId,\n          ...((factory) => {\n            switch (factory) {\n              case 'Date/Time':\n              case 'label_datetime_field':\n                return {\n                  type: 'string',\n                  widget: 'datetime',\n                  factory,\n                };\n              case 'Date':\n              case 'label_date_field':\n                return {\n                  type: 'string',\n                  widget: 'date',\n                  factory,\n                };\n              case 'Email':\n              case 'label_email':\n                return {\n                  type: 'string',\n                  widget: 'email',\n                  factory,\n                };\n              case 'File':\n              case 'File Upload':\n                return {\n                  type: 'object',\n                  factory,\n                };\n              case 'Floating-point number':\n              case 'label_float_field':\n                return {\n                  type: 'number',\n                  factory,\n                };\n              case 'Integer':\n              case 'label_integer_field':\n                return {\n                  type: 'integer',\n                  factory,\n                };\n              case 'Image':\n                return {\n                  type: 'object',\n                  factory,\n                };\n              case 'JSONField':\n                return {\n                  type: 'dict',\n                  widget: 'json',\n                  factory,\n                };\n              case 'Multiple Choice':\n              case 'label_multi_choice_field':\n                return {\n                  type: 'array',\n                  factory,\n                };\n              case 'Relation List':\n                return {\n                  type: 'array',\n                  factory,\n                };\n              case 'Choice':\n              case 'label_choice_field':\n                return {\n                  type: 'string',\n                  choices: [],\n                  factory,\n                };\n              case 'Relation Choice':\n                return {\n                  type: 'string',\n                  factory,\n                };\n              case 'Password':\n              case 'label_password_field':\n                return {\n                  type: 'string',\n                  widget: 'password',\n                  factory,\n                };\n              case 'Rich Text':\n                return {\n                  type: 'string',\n                  widget: 'richtext',\n                  factory,\n                };\n              case 'URL':\n                return {\n                  type: 'string',\n                  widget: 'url',\n                  factory,\n                };\n              case 'Yes/No':\n              case 'label_boolean_field':\n                return {\n                  type: 'boolean',\n                  factory,\n                };\n              default:\n                return {\n                  type: 'string',\n                  factory,\n                };\n            }\n          })(values.factory),\n        },\n      },\n      required: values.required\n        ? [...this.props.value.required, fieldId]\n        : this.props.value.required,\n    });\n    this.onCancel();\n  }\n\n  /**\n   * Add fieldset handler\n   * @method onAddFieldset\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onAddFieldset(values) {\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...this.props.value.fieldsets,\n        {\n          ...values,\n          fields: [],\n        },\n      ],\n    });\n    this.onCancel();\n  }\n\n  /**\n   * Edit fieldset handler\n   * @method onEditFieldset\n   * @param {Object} values Form values\n   * @returns {undefined}\n   */\n  onEditFieldset(values) {\n    values.fields =\n      values.fields ||\n      this.props.value.fieldsets[this.state.editFieldset]?.fields ||\n      [];\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...slice(this.props.value.fieldsets, 0, this.state.editFieldset),\n        values,\n        ...slice(this.props.value.fieldsets, this.state.editFieldset + 1),\n      ],\n    });\n    this.onCancel();\n  }\n\n  /**\n   * Recreates the fieldset structure\n   * will move change name of the field if needed and\n   * change fieldset if changed\n   * @param {Object[]} fieldsets\n   * @param {string} parentFieldSet - id\n   * @param {number} currentFieldset - index\n   * @param {Object} oldfieldId\n   * @param {Object} newfieldId\n   * @returns {Object[]} fieldsets\n   */\n  editFieldset(\n    fieldsets,\n    parentFieldSet,\n    currentFieldset,\n    oldfieldId,\n    newfieldId,\n  ) {\n    const moveToFieldsetWithNewName = () => {\n      const newParentFieldsetIndex = fieldsets.findIndex(\n        (field) => field.id === parentFieldSet,\n      );\n      const indexOfChangeNote =\n        fieldsets[newParentFieldsetIndex].fields.indexOf('changeNote');\n      // remove from current fieldset\n      const fieldsetsWithoutField = [\n        ...slice(fieldsets, 0, currentFieldset),\n        {\n          ...fieldsets[currentFieldset],\n          fields: fieldsets[currentFieldset].fields.filter(\n            (fieldId) => fieldId !== oldfieldId,\n          ),\n        },\n        ...slice(fieldsets, currentFieldset + 1),\n      ];\n\n      const fieldsOfNewFieldset =\n        indexOfChangeNote > -1\n          ? [\n              ...fieldsetsWithoutField[newParentFieldsetIndex].fields.slice(\n                0,\n                indexOfChangeNote + 1,\n              ),\n              oldfieldId,\n              fieldsetsWithoutField[newParentFieldsetIndex].fields[\n                indexOfChangeNote\n              ],\n            ]\n          : [\n              ...fieldsetsWithoutField[newParentFieldsetIndex].fields,\n              oldfieldId,\n            ];\n\n      // add to new fieldset\n      const fieldsetsWithField = [\n        ...slice(fieldsetsWithoutField, 0, newParentFieldsetIndex),\n        {\n          ...fieldsetsWithoutField[newParentFieldsetIndex],\n          fields: fieldsOfNewFieldset,\n        },\n        ...slice(fieldsetsWithoutField, newParentFieldsetIndex + 1),\n      ];\n      return fieldsetsWithField;\n    };\n\n    const changeNameInFieldset = () => {\n      return [\n        ...slice(fieldsets, 0, currentFieldset),\n        {\n          ...fieldsets[currentFieldset],\n          fields: map(fieldsets[currentFieldset].fields, (field) =>\n            field === oldfieldId ? newfieldId : field,\n          ),\n        },\n        ...slice(fieldsets, currentFieldset + 1),\n      ];\n    };\n\n    const result =\n      parentFieldSet !== fieldsets[currentFieldset].id\n        ? moveToFieldsetWithNewName()\n        : changeNameInFieldset();\n    return result;\n  }\n\n  /**\n   * Edit field handler\n   * recreates the schema based on field changes (properties, name, fieldset)\n   * @method onEditField\n   * @param {Object} values Field values\n   * @returns {undefined}\n   */\n  onEditField(values) {\n    let formattedValues = { ...values };\n\n    const listOfProp = ['minLength', 'maxLength', 'minimum', 'maximum'];\n    listOfProp.forEach((prop) => {\n      formattedValues = {\n        ...formattedValues,\n        ...{ [prop]: values[prop] ? parseFloat(values[prop]) : null },\n      };\n    });\n\n    const multiple =\n      this.props.value.properties[this.state.editField.id]?.factory ===\n        'Multiple Choice' ||\n      this.props.value.properties[this.state.editField.id]?.factory ===\n        'label_multi_choice_field';\n    const result = {\n      ...this.props.value,\n      fieldsets: formattedValues.parentFieldSet\n        ? this.editFieldset(\n            this.props.value.fieldsets,\n            formattedValues.parentFieldSet,\n            this.state.currentFieldset,\n            this.state.editField.id,\n            formattedValues.id,\n          )\n        : this.props.value.fieldsets,\n      properties: {\n        ...omit(this.props.value.properties, [this.state.editField.id]),\n        [formattedValues.id]: {\n          ...this.props.value.properties[this.state.editField.id],\n          ...omit(formattedValues, ['id', 'parentFieldSet']),\n          ...formatTextareaToArray(formattedValues.values),\n          ...formatTextareaToChoices(formattedValues.values, multiple),\n        },\n      },\n      required: formattedValues.required\n        ? concat(without(this.props.value.required, this.state.editField.id), [\n            formattedValues.id,\n          ])\n        : without(this.props.value.required, this.state.editField.id),\n    };\n\n    this.onChange(result);\n\n    this.onCancel();\n  }\n\n  /**\n   * Delete fieldset handler\n   * @method onDeleteFieldset\n   * @returns {undefined}\n   */\n  onDeleteFieldset() {\n    if (this.state.currentFieldset > this.props.value.fieldsets.length - 2) {\n      this.setState({\n        currentFieldset: this.state.currentFieldset - 1,\n      });\n    }\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...slice(this.props.value.fieldsets, 0, this.state.deleteFieldset),\n        ...slice(this.props.value.fieldsets, this.state.deleteFieldset + 1),\n      ],\n      properties: omit(\n        this.props.value.properties,\n        this.props.value.fieldsets[this.state.deleteFieldset].fields,\n      ),\n    });\n    this.onCancel();\n  }\n\n  /**\n   * Delete field handler\n   * @method onDeleteField\n   * @returns {undefined}\n   */\n  onDeleteField() {\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...slice(this.props.value.fieldsets, 0, this.state.currentFieldset),\n        {\n          ...this.props.value.fieldsets[this.state.currentFieldset],\n          fields: without(\n            this.props.value.fieldsets[this.state.currentFieldset].fields,\n            this.state.deleteField,\n          ),\n        },\n        ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1),\n      ],\n      properties: omit(this.props.value.properties, [this.state.deleteField]),\n    });\n    this.onCancel();\n  }\n\n  /**\n   * Change handler\n   * @method onChange\n   * @param {Object} value New schema\n   * @returns {undefined}\n   */\n  onChange(value) {\n    this.props.onChange(this.props.id, value);\n  }\n\n  /**\n   * Change default value handler\n   * @method onChangeDefaultValue\n   * @param {string} fieldId\n   * @param {string} fieldValue\n   */\n  onChangeDefaultValue(fieldId, fieldValue) {\n    // Default values can have irreversible consequence, thus skip it for now.\n    // const value = { default: fieldValue }\n    const value = {};\n\n    const fieldMerge = {\n      ...this.props.value.properties[fieldId],\n      ...value,\n    };\n    const propsMerge = {\n      ...this.props.value.properties,\n      ...{ [fieldId]: fieldMerge },\n    };\n\n    this.onChange({\n      ...this.props.value,\n      properties: propsMerge,\n    });\n  }\n\n  /**\n   * Cancel handler\n   * @method onCancel\n   * @returns {undefined}\n   */\n  onCancel() {\n    this.setState({\n      addField: null,\n      addFieldset: null,\n      editFieldset: null,\n      editField: null,\n      deleteFieldset: null,\n      deleteField: null,\n    });\n  }\n\n  /**\n   * Show add field handler\n   * @method onShowAddField\n   * @returns {undefined}\n   */\n  onShowAddField(event) {\n    this.setState({\n      addField: true,\n    });\n    event.preventDefault();\n  }\n\n  /**\n   * Show add fieldset handler\n   * @method onShowAddFieldset\n   * @returns {undefined}\n   */\n  onShowAddFieldset(event) {\n    this.setState({\n      addFieldset: true,\n    });\n    event.preventDefault();\n  }\n\n  /**\n   * Show edit fieldset handler\n   * @method onShowEditFieldset\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onShowEditFieldset(index) {\n    this.setState({\n      editFieldset: index,\n    });\n  }\n\n  /**\n   * Show edit field handler\n   * @method onShowEditField\n   * @param {string} id Id of field\n   * @param {Object} schema Schema of the field\n   * @returns {undefined}\n   */\n  onShowEditField(id, schema) {\n    return this.setState({\n      editField: {\n        id,\n      },\n    });\n  }\n\n  /**\n   * Show delete fieldset handler\n   * @method onShowDeleteFieldset\n   * @param {Number} index Index of fieldset\n   * @param {Object} event Event object\n   * @returns {undefined}\n   */\n  onShowDeleteFieldset(index) {\n    this.setState({\n      deleteFieldset: index,\n    });\n  }\n\n  /**\n   * Show delete field handler\n   * @method onShowDeleteField\n   * @param {String} field Field to delete\n   * @param {Object} event Event object\n   * @returns {undefined}\n   */\n  onShowDeleteField(field) {\n    this.setState({\n      deleteField: field,\n    });\n  }\n\n  /**\n   * Set current fieldset handler\n   * @method onSetCurrentFieldset\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onSetCurrentFieldset(index) {\n    this.setState({\n      currentFieldset: index,\n    });\n  }\n\n  /**\n   * On order fieldset\n   * @method onOrderField\n   * @param {number} index Index\n   * @param {number} delta Delta\n   * @returns {undefined}\n   */\n  onOrderField(index, delta) {\n    this.onChange({\n      ...this.props.value,\n      fieldsets: [\n        ...slice(this.props.value.fieldsets, 0, this.state.currentFieldset),\n        {\n          ...this.props.value.fieldsets[this.state.currentFieldset],\n          fields: move(\n            this.props.value.fieldsets[this.state.currentFieldset].fields,\n            index,\n            delta,\n          ),\n        },\n        ...slice(this.props.value.fieldsets, this.state.currentFieldset + 1),\n      ],\n    });\n  }\n\n  /**\n   * On order fieldset\n   * @method onOrderFieldset\n   * @param {number} index Index\n   * @param {number} delta Delta\n   * @returns {undefined}\n   */\n  onOrderFieldset(index, delta) {\n    const schema = {\n      ...this.props.value,\n      fieldsets: move(this.props.value.fieldsets, index, delta),\n    };\n    this.setState({\n      currentFieldset: findIndex(schema.fieldsets, {\n        id: schema.fieldsets[this.state.currentFieldset].id,\n      }),\n    });\n    this.onChange(schema);\n  }\n\n  /**\n   * Set current fieldset handler\n   * @method onDragEnd\n   * @param {Number} index Index of fieldset\n   * @returns {undefined}\n   */\n  onDragEnd(result) {\n    if (\n      result.destination &&\n      result.destination.droppableId === 'fields-schema-edit'\n    ) {\n      this.onOrderField(result.source.index, result.destination.index);\n    }\n    if (\n      result.destination &&\n      result.destination.droppableId === 'tabs-schema-edit'\n    ) {\n      this.onOrderFieldset(result.source.index, result.destination.index);\n    }\n  }\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const { error, reactBeautifulDnd } = this.props;\n    const { Draggable, DragDropContext, Droppable } = reactBeautifulDnd;\n    if (!this.props.value) {\n      return '';\n    }\n    const nonUserCreatedFields = this.props.value.fieldsets[\n      this.state.currentFieldset\n    ].fields.filter(\n      (fieldId) =>\n        !isEditable(this.props.value.properties[fieldId]) &&\n        fieldId !== 'changeNote',\n    );\n    const hasChangeNote =\n      this.props.value.fieldsets[this.state.currentFieldset].fields.indexOf(\n        'changeNote',\n      ) > -1;\n    const userCreatedFieldsStartingIndex = nonUserCreatedFields.length;\n    const lastUserCreatedFieldsIndex = hasChangeNote\n      ? this.props.value.fieldsets[this.state.currentFieldset].fields.length - 1\n      : this.props.value.fieldsets[this.state.currentFieldset].fields.length;\n    // fields that were not created by the user, but are part of a behavior\n    const makeNonUserFields = () =>\n      map(\n        this.props.value.fieldsets[this.state.currentFieldset].fields.slice(\n          0,\n          userCreatedFieldsStartingIndex,\n        ),\n        (field, index) => (\n          <div\n            style={{ background: '#c7d5d859' }}\n            key={`${field}-${this.state.currentFieldset}-${index}`}\n          >\n            <Field\n              {...this.props.value.properties[field]}\n              id={field}\n              required={this.props.value.required.indexOf(field) !== -1}\n              onEdit={this.onShowEditField}\n              draggable={false}\n              isDisabled={true}\n              order={index}\n              onDelete={this.onShowDeleteField}\n              onChange={this.onChangeDefaultValue}\n              value={this.props.value.properties[field].default}\n            />\n          </div>\n        ),\n      );\n    // fields created by the user\n    const makeUserFields = () =>\n      map(\n        this.props.value.fieldsets[this.state.currentFieldset].fields.slice(\n          userCreatedFieldsStartingIndex,\n          lastUserCreatedFieldsIndex,\n        ),\n        (field, index) => (\n          <Draggable\n            draggableId={field}\n            index={userCreatedFieldsStartingIndex + index}\n            key={`${field}-${this.state.currentFieldset}-${index}`}\n          >\n            {(provided, snapshot) => (\n              <div\n                ref={provided.innerRef}\n                {...provided.draggableProps}\n                {...provided.dragHandleProps}\n                style={getItemStyle(\n                  snapshot.isDragging,\n                  provided.draggableProps.style,\n                )}\n              >\n                <Field\n                  {...this.props.value.properties[field]}\n                  id={field}\n                  required={this.props.value.required.indexOf(field) !== -1}\n                  onEdit={this.onShowEditField}\n                  draggable={true}\n                  isDisabled={false}\n                  order={index}\n                  onDelete={this.onShowDeleteField}\n                  onChange={this.onChangeDefaultValue}\n                  key={`${field}-${this.state.currentFieldset}-${index}`}\n                  value={this.props.value.properties[field].default}\n                />\n              </div>\n            )}\n          </Draggable>\n        ),\n      );\n\n    const canAddFields =\n      this.state.currentFieldset === 0 ||\n      !this.props.value.fieldsets[this.state.currentFieldset].behavior ||\n      this.props.value.fieldsets[this.state.currentFieldset].behavior.includes(\n        'generated',\n      );\n\n    return (\n      <div>\n        <Segment.Group\n          style={{\n            margin: '-1rem',\n          }}\n        >\n          {error.length > 0 &&\n            map(error, (err, index) => (\n              <Message\n                icon=\"warning\"\n                key={`${err}-${index}`}\n                negative\n                attached\n                header={this.props.intl.formatMessage(messages.error)}\n                content={err}\n              />\n            ))}\n          <DragDropContext onDragEnd={this.onDragEnd}>\n            <Droppable droppableId=\"tabs-schema-edit\" direction=\"horizontal\">\n              {(provided, snapshot) => (\n                <div\n                  role=\"tablist\"\n                  className=\"ui pointing secondary attached tabular menu\"\n                  ref={provided.innerRef}\n                  {...provided.draggableProps}\n                  style={getTabStyle(snapshot.isDraggingOver)}\n                >\n                  {map(this.props.value.fieldsets, (fieldset, index) => (\n                    <SchemaWidgetFieldset\n                      key={`${fieldset.id}-${this.state.currentFieldset}-${index}`}\n                      title={fieldset.title}\n                      order={index}\n                      active={index === this.state.currentFieldset}\n                      onClick={this.onSetCurrentFieldset}\n                      onShowEditFieldset={this.onShowEditFieldset}\n                      onShowDeleteFieldset={this.onShowDeleteFieldset}\n                      onOrderFieldset={this.onOrderFieldset}\n                      getItemStyle={getItemStyle}\n                      isDraggable={true}\n                      isDisabled={\n                        fieldset.behavior\n                          ? !fieldset.behavior.includes('generated')\n                          : false\n                      }\n                    />\n                  ))}\n                  <div className=\"item item-add\">\n                    <button\n                      aria-label={this.props.intl.formatMessage(messages.add)}\n                      className=\"item ui noborder button\"\n                      onClick={this.onShowAddFieldset}\n                    >\n                      <Icon name=\"plus\" size=\"large\" />\n                    </button>\n                  </div>\n\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n\n            {makeNonUserFields()}\n\n            <Droppable\n              droppableId=\"fields-schema-edit\"\n              direction=\"vertical\"\n              type=\"fixed\"\n            >\n              {(provided, snapshot) => (\n                <div\n                  ref={provided.innerRef}\n                  {...provided.draggableProps}\n                  style={getFieldStyle(snapshot.isDraggingOver)}\n                >\n                  {makeUserFields()}\n\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n\n          {hasChangeNote ? (\n            <div style={{ background: '#c7d5d859' }}>\n              <Field\n                {...this.props.value.properties.changeNote}\n                id={'changeNote'}\n                required={\n                  this.props.value.required.indexOf('changeNote') !== -1\n                }\n                onEdit={this.onShowEditField}\n                draggable={false}\n                isDisabled={true}\n                order={\n                  this.props.value.fieldsets[this.state.currentFieldset]\n                    .length - 1\n                }\n                onDelete={this.onShowDeleteField}\n                onChange={this.onChangeDefaultValue}\n                key={'changeNote'}\n                value={this.props.value.properties.changeNote.default}\n              />\n            </div>\n          ) : null}\n\n          {canAddFields && (\n            <Form.Field inline>\n              <Grid>\n                <Grid.Row stretched>\n                  <Grid.Column width=\"12\">\n                    <div className=\"wrapper\">\n                      <label htmlFor=\"addfield\">\n                        {this.props.intl.formatMessage(messages.addField)}\n                      </label>\n                    </div>\n                    <div className=\"toolbar\">\n                      <button\n                        aria-label={this.props.intl.formatMessage(messages.add)}\n                        id=\"addfield\"\n                        className=\"item ui noborder button\"\n                        onClick={this.onShowAddField}\n                      >\n                        <Icon name=\"plus\" color=\"blue\" size=\"large\" />\n                      </button>\n                    </div>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Form.Field>\n          )}\n        </Segment.Group>\n        {this.state.addField !== null && (\n          <ModalForm\n            onSubmit={this.onAddField}\n            onCancel={this.onCancel}\n            title={this.props.intl.formatMessage(messages.addField)}\n            formData={{\n              type: '',\n              id: '',\n              title: '',\n            }}\n            schema={{\n              fieldsets: [\n                {\n                  id: 'default',\n                  title: this.props.intl.formatMessage(messages.default),\n                  fields: ['factory', 'title', 'description', 'required'],\n                },\n              ],\n              properties: {\n                factory: {\n                  type: 'string',\n                  factory: 'Choice',\n                  title: this.props.intl.formatMessage(messages.type),\n                  vocabulary: {\n                    '@id': `Fields`,\n                  },\n                },\n                title: {\n                  type: 'string',\n                  title: this.props.intl.formatMessage(messages.title),\n                },\n                description: {\n                  type: 'string',\n                  widget: 'textarea',\n                  title: this.props.intl.formatMessage(messages.description),\n                },\n                required: {\n                  type: 'boolean',\n                  title: this.props.intl.formatMessage(messages.required),\n                },\n              },\n              required: ['type', 'title'],\n            }}\n          />\n        )}\n        {this.state.editField !== null && (\n          <ModalForm\n            onSubmit={this.onEditField}\n            onCancel={this.onCancel}\n            title={this.props.intl.formatMessage(messages.editField)}\n            formData={{\n              ...this.props.value.properties[this.state.editField.id],\n              id: this.state.editField.id,\n              required:\n                this.props.value.required.indexOf(this.state.editField.id) !==\n                -1,\n              parentFieldSet:\n                this.props.value.fieldsets[this.state.currentFieldset].id,\n              values: formatArrayToTextarea(\n                this.props.value.properties[this.state.editField.id],\n              ),\n            }}\n            schema={schemaField(\n              this.props.value.properties[this.state.editField.id].factory,\n              this.props.intl,\n              this.props.value.fieldsets.filter(\n                (fieldset) =>\n                  !fieldset.behavior ||\n                  fieldset.id === 'default' ||\n                  fieldset.behavior.includes('generated'),\n              ),\n            )}\n          />\n        )}\n        {this.state.addFieldset !== null && (\n          <ModalForm\n            onSubmit={this.onAddFieldset}\n            onCancel={this.onCancel}\n            title={this.props.intl.formatMessage(messages.addFieldset)}\n            formData={{\n              id: '',\n              title: '',\n            }}\n            schema={fieldsetSchema(this.props.intl)}\n          />\n        )}\n        {this.state.editFieldset !== null && (\n          <ModalForm\n            onSubmit={this.onEditFieldset}\n            onCancel={this.onCancel}\n            title={this.props.intl.formatMessage(messages.editFieldset)}\n            formData={{\n              id: this.props.value.fieldsets[this.state.editFieldset].id,\n              title: this.props.value.fieldsets[this.state.editFieldset].title,\n            }}\n            schema={fieldsetSchema(this.props.intl)}\n          />\n        )}\n        {this.state.deleteFieldset !== null && (\n          <Confirm\n            open\n            content={this.props.intl.formatMessage(messages.deleteFieldset)}\n            onCancel={this.onCancel}\n            onConfirm={this.onDeleteFieldset}\n          />\n        )}\n        {this.state.deleteField !== null && (\n          <Confirm\n            open\n            content={this.props.intl.formatMessage(messages.deleteField)}\n            onCancel={this.onCancel}\n            onConfirm={this.onDeleteField}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  injectIntl,\n  injectLazyLibs(['reactBeautifulDnd']),\n  connect(\n    (state, props) => ({\n      value: isString(props.value) ? JSON.parse(props.value) : props.value,\n    }),\n    {},\n  ),\n)(SchemaWidget);\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Add","defaultMessage":"Add"},{"id":"Add field","defaultMessage":"Add field"},{"id":"Add fieldset","defaultMessage":"Add fieldset"},{"id":"Parent fieldset","defaultMessage":"Parent fieldset"},{"id":"Edit field","defaultMessage":"Edit field"},{"id":"Edit fieldset","defaultMessage":"Edit fieldset"},{"id":"Default","defaultMessage":"Default"},{"id":"Short Name","defaultMessage":"Short Name"},{"id":"Used for programmatic access to the fieldset.","defaultMessage":"Used for programmatic access to the fieldset."},{"id":"Possible values","defaultMessage":"Possible values (Enter allowed choices one per line)."},{"id":"String","defaultMessage":"String"},{"id":"Text","defaultMessage":"Text"},{"id":"Richtext","defaultMessage":"Richtext"},{"id":"Checkbox","defaultMessage":"Checkbox"},{"id":"Selection","defaultMessage":"Selection"},{"id":"Type","defaultMessage":"Type"},{"id":"Title","defaultMessage":"Title"},{"id":"Description","defaultMessage":"Description"},{"id":"Required","defaultMessage":"Required"},{"id":"minLength","defaultMessage":"Minimum Length"},{"id":"maxLength","defaultMessage":"Maximum Length"},{"id":"minimum","defaultMessage":"Start of the range"},{"id":"maximum","defaultMessage":"End of the range (including the value itself)"},{"id":"Are you sure you want to delete this fieldset including all fields?","defaultMessage":"Are you sure you want to delete this fieldset including all fields?"},{"id":"Are you sure you want to delete this field?","defaultMessage":"Are you sure you want to delete this field?"},{"id":"Error","defaultMessage":"Error"}]}},"sourceType":"module","externalDependencies":[]}