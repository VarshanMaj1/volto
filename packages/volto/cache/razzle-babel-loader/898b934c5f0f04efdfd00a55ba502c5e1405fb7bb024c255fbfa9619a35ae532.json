{"ast":null,"code":"import express from 'express';\nimport { generateRobots } from '@plone/volto/helpers/Robots/Robots';\n\n/*\nrobots.txt - priority order:\n\n1) VOLTO_ROBOTSTXT var in .env\n2) robots.txt setting in the site control panel\n\n*/\n\nconst siteRobots = function (req, res, next) {\n  generateRobots(req).then(robots => {\n    res.set('Content-Type', 'text/plain');\n    res.send(robots);\n  });\n};\nconst envRobots = function (req, res, next) {\n  res.type('text/plain');\n  res.send(process.env.VOLTO_ROBOTSTXT);\n};\nexport default function robotstxtMiddleware() {\n  const middleware = express.Router();\n  if (process.env.VOLTO_ROBOTSTXT) {\n    middleware.all('**/robots.txt', envRobots);\n  } else {\n    middleware.all('**/robots.txt', siteRobots);\n  }\n  middleware.id = 'robots.txt';\n  return middleware;\n}","map":{"version":3,"names":["express","generateRobots","siteRobots","req","res","next","then","robots","set","send","envRobots","type","process","env","VOLTO_ROBOTSTXT","robotstxtMiddleware","middleware","Router","all","id"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/express-middleware/robotstxt.js"],"sourcesContent":["import express from 'express';\nimport { generateRobots } from '@plone/volto/helpers/Robots/Robots';\n\n/*\nrobots.txt - priority order:\n\n1) VOLTO_ROBOTSTXT var in .env\n2) robots.txt setting in the site control panel\n\n*/\n\nconst siteRobots = function (req, res, next) {\n  generateRobots(req).then((robots) => {\n    res.set('Content-Type', 'text/plain');\n    res.send(robots);\n  });\n};\n\nconst envRobots = function (req, res, next) {\n  res.type('text/plain');\n  res.send(process.env.VOLTO_ROBOTSTXT);\n};\n\nexport default function robotstxtMiddleware() {\n  const middleware = express.Router();\n  if (process.env.VOLTO_ROBOTSTXT) {\n    middleware.all('**/robots.txt', envRobots);\n  } else {\n    middleware.all('**/robots.txt', siteRobots);\n  }\n  middleware.id = 'robots.txt';\n  return middleware;\n}\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,SAASC,cAAc,QAAQ,oCAAoC;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,UAAU,GAAG,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC3CJ,cAAc,CAACE,GAAG,CAAC,CAACG,IAAI,CAAEC,MAAM,IAAK;IACnCH,GAAG,CAACI,GAAG,CAAC,cAAc,EAAE,YAAY,CAAC;IACrCJ,GAAG,CAACK,IAAI,CAACF,MAAM,CAAC;EAClB,CAAC,CAAC;AACJ,CAAC;AAED,MAAMG,SAAS,GAAG,SAAAA,CAAUP,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC1CD,GAAG,CAACO,IAAI,CAAC,YAAY,CAAC;EACtBP,GAAG,CAACK,IAAI,CAACG,OAAO,CAACC,GAAG,CAACC,eAAe,CAAC;AACvC,CAAC;AAED,eAAe,SAASC,mBAAmBA,CAAA,EAAG;EAC5C,MAAMC,UAAU,GAAGhB,OAAO,CAACiB,MAAM,CAAC,CAAC;EACnC,IAAIL,OAAO,CAACC,GAAG,CAACC,eAAe,EAAE;IAC/BE,UAAU,CAACE,GAAG,CAAC,eAAe,EAAER,SAAS,CAAC;EAC5C,CAAC,MAAM;IACLM,UAAU,CAACE,GAAG,CAAC,eAAe,EAAEhB,UAAU,CAAC;EAC7C;EACAc,UAAU,CAACG,EAAE,GAAG,YAAY;EAC5B,OAAOH,UAAU;AACnB","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}