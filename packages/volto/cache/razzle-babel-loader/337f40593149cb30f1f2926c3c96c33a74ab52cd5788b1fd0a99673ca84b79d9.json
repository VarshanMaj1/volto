{"ast":null,"code":"import { useSlate, ReactEditor, useSlateSelection } from 'slate-react';\n\n/**\n * Translates the slate selection (text) to window/screen coordinates\n *\n * TODO: we use the anchor as the base for the position. This could be improved\n */\nexport const useSelectionPosition = () => {\n  let rect = {};\n  const editor = useSlate();\n  const selection = useSlateSelection();\n  if (selection && ReactEditor.isFocused(editor)) {\n    try {\n      const [textNode] = ReactEditor.toDOMPoint(editor, selection.anchor);\n      const parentNode = textNode.parentNode;\n      rect = parentNode.getBoundingClientRect();\n    } catch {\n      // This happens when the selection is outdated because the nodes have\n      // been modified? Seems like a bug in slate, then.\n    }\n  }\n  return rect;\n};","map":{"version":3,"names":["useSlate","ReactEditor","useSlateSelection","useSelectionPosition","rect","editor","selection","isFocused","textNode","toDOMPoint","anchor","parentNode","getBoundingClientRect"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto-slate/src/hooks/useSelectionPosition.js"],"sourcesContent":["import { useSlate, ReactEditor, useSlateSelection } from 'slate-react';\n\n/**\n * Translates the slate selection (text) to window/screen coordinates\n *\n * TODO: we use the anchor as the base for the position. This could be improved\n */\nexport const useSelectionPosition = () => {\n  let rect = {};\n\n  const editor = useSlate();\n\n  const selection = useSlateSelection();\n  if (selection && ReactEditor.isFocused(editor)) {\n    try {\n      const [textNode] = ReactEditor.toDOMPoint(editor, selection.anchor);\n      const parentNode = textNode.parentNode;\n      rect = parentNode.getBoundingClientRect();\n    } catch {\n      // This happens when the selection is outdated because the nodes have\n      // been modified? Seems like a bug in slate, then.\n    }\n  }\n  return rect;\n};\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,iBAAiB,QAAQ,aAAa;;AAEtE;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACxC,IAAIC,IAAI,GAAG,CAAC,CAAC;EAEb,MAAMC,MAAM,GAAGL,QAAQ,CAAC,CAAC;EAEzB,MAAMM,SAAS,GAAGJ,iBAAiB,CAAC,CAAC;EACrC,IAAII,SAAS,IAAIL,WAAW,CAACM,SAAS,CAACF,MAAM,CAAC,EAAE;IAC9C,IAAI;MACF,MAAM,CAACG,QAAQ,CAAC,GAAGP,WAAW,CAACQ,UAAU,CAACJ,MAAM,EAAEC,SAAS,CAACI,MAAM,CAAC;MACnE,MAAMC,UAAU,GAAGH,QAAQ,CAACG,UAAU;MACtCP,IAAI,GAAGO,UAAU,CAACC,qBAAqB,CAAC,CAAC;IAC3C,CAAC,CAAC,MAAM;MACN;MACA;IAAA;EAEJ;EACA,OAAOR,IAAI;AACb,CAAC","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}