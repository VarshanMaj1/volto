{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Widgets/ObjectBrowserWidget.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * ObjectBrowserWidget component.\n * @module components/manage/Widgets/ObjectBrowserWidget\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport compact from 'lodash/compact';\nimport includes from 'lodash/includes';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport remove from 'lodash/remove';\nimport { connect } from 'react-redux';\nimport { Image, Label, Popup, Button } from 'semantic-ui-react';\nimport { flattenToAppURL, isInternalURL, normalizeUrl, removeProtocol } from '@plone/volto/helpers/Url/Url';\nimport { urlValidator } from '@plone/volto/helpers/FormValidation/validators';\nimport { searchContent } from '@plone/volto/actions/search/search';\nimport withObjectBrowser from '@plone/volto/components/manage/Sidebar/ObjectBrowser';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport FormFieldWrapper from '@plone/volto/components/manage/Widgets/FormFieldWrapper';\nimport config from '@plone/volto/registry';\nimport navTreeSVG from '@plone/volto/icons/nav.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport homeSVG from '@plone/volto/icons/home.svg';\nimport aheadSVG from '@plone/volto/icons/ahead.svg';\nimport blankSVG from '@plone/volto/icons/blank.svg';\nimport { withRouter } from 'react-router';\nconst messages = defineMessages({\n  placeholder: {\n    \"id\": \"No items selected\",\n    \"defaultMessage\": \"No items selected\"\n  },\n  edit: {\n    \"id\": \"Edit\",\n    \"defaultMessage\": \"Edit\"\n  },\n  delete: {\n    \"id\": \"Delete\",\n    \"defaultMessage\": \"Delete\"\n  },\n  openObjectBrowser: {\n    \"id\": \"Open object browser\",\n    \"defaultMessage\": \"Open object browser\"\n  }\n});\n\n/**\n * ObjectBrowserWidget component class.\n * @class ObjectBrowserWidget\n * @extends Component\n */\nexport class ObjectBrowserWidgetComponent extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"state\", {\n      manualLinkInput: '',\n      validURL: false,\n      errors: []\n    });\n    _defineProperty(this, \"removeItem\", item => {\n      let value = [...this.props.value];\n      remove(value, function (_item) {\n        return _item['@id'] === item['@id'];\n      });\n      this.props.onChange(this.props.id, value);\n    });\n    _defineProperty(this, \"onChange\", item => {\n      var _this$props$widgetOpt, _this$props$widgetOpt2;\n      let value = this.props.mode === 'multiple' && this.props.value ? [...this.props.value] : [];\n      value = value.filter(item => item != null);\n      const maxSize = ((_this$props$widgetOpt = this.props.widgetOptions) === null || _this$props$widgetOpt === void 0 ? void 0 : (_this$props$widgetOpt2 = _this$props$widgetOpt.pattern_options) === null || _this$props$widgetOpt2 === void 0 ? void 0 : _this$props$widgetOpt2.maximumSelectionSize) || -1;\n      if (maxSize === 1 && value.length === 1) {\n        value = []; //enable replace of selected item with another value, if maxsize is 1\n      }\n      let exists = false;\n      let index = -1;\n      value.forEach((_item, _index) => {\n        if (flattenToAppURL(_item['@id']) === flattenToAppURL(item['@id'])) {\n          exists = true;\n          index = _index;\n        }\n      });\n      //find(value, {\n      //   '@id': flattenToAppURL(item['@id']),\n      // });\n      if (!exists) {\n        // add item\n        // Check if we want to filter the attributes of the selected item\n        let resultantItem = item;\n        if (this.props.selectedItemAttrs) {\n          const allowedItemKeys = [...this.props.selectedItemAttrs,\n          // Add the required attributes for the widget to work\n          '@id', 'title'];\n          resultantItem = Object.keys(item).filter(key => allowedItemKeys.includes(key)).reduce((obj, key) => {\n            obj[key] = item[key];\n            return obj;\n          }, {});\n        }\n        // Add required @id field, just in case\n        resultantItem = _objectSpread(_objectSpread({}, resultantItem), {}, {\n          '@id': item['@id']\n        });\n        value.push(resultantItem);\n        if (this.props.return === 'single') {\n          this.props.onChange(this.props.id, value[0]);\n        } else {\n          this.props.onChange(this.props.id, value);\n        }\n      } else {\n        //remove item\n        value.splice(index, 1);\n        this.props.onChange(this.props.id, value);\n      }\n    });\n    _defineProperty(this, \"onManualLinkInput\", e => {\n      this.setState({\n        manualLinkInput: e.target.value\n      });\n      if (this.validateManualLink(e.target.value)) {\n        this.setState({\n          validURL: true\n        });\n      } else {\n        this.setState({\n          validURL: false\n        });\n      }\n    });\n    _defineProperty(this, \"validateManualLink\", url => {\n      if (this.props.allowExternals) {\n        const error = urlValidator({\n          value: url,\n          formatMessage: this.props.intl.formatMessage\n        });\n        if (error && url !== '') {\n          this.setState({\n            errors: [error]\n          });\n        } else {\n          this.setState({\n            errors: []\n          });\n        }\n        return !Boolean(error);\n      } else {\n        return isInternalURL(url);\n      }\n    });\n    _defineProperty(this, \"onSubmitManualLink\", () => {\n      if (this.validateManualLink(this.state.manualLinkInput)) {\n        if (isInternalURL(this.state.manualLinkInput)) {\n          const link = this.state.manualLinkInput;\n          // convert it into an internal on if possible\n          this.props.searchContent('/', {\n            'path.query': flattenToAppURL(this.state.manualLinkInput),\n            'path.depth': '0',\n            sort_on: 'getObjPositionInParent',\n            metadata_fields: '_all',\n            b_size: 1000\n          }, `${this.props.block}-${this.props.mode}`).then(resp => {\n            var _resp$items;\n            if (((_resp$items = resp.items) === null || _resp$items === void 0 ? void 0 : _resp$items.length) > 0) {\n              this.onChange(resp.items[0]);\n            } else {\n              this.props.onChange(this.props.id, [{\n                '@id': flattenToAppURL(link),\n                title: removeProtocol(link)\n              }]);\n            }\n          });\n        } else {\n          this.props.onChange(this.props.id, [{\n            '@id': normalizeUrl(this.state.manualLinkInput),\n            title: removeProtocol(this.state.manualLinkInput)\n          }]);\n        }\n        this.setState({\n          validURL: true,\n          manualLinkInput: ''\n        });\n      }\n    });\n    _defineProperty(this, \"onKeyDownManualLink\", e => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        e.stopPropagation();\n        this.onSubmitManualLink();\n      } else if (e.key === 'Escape') {\n        e.preventDefault();\n        e.stopPropagation();\n        // TODO: Do something on ESC key\n      }\n    });\n    _defineProperty(this, \"showObjectBrowser\", ev => {\n      var _this$props$widgetOpt3, _this$props$widgetOpt4, _this$props$widgetOpt5, _this$props$widgetOpt6;\n      ev.preventDefault();\n      this.props.openObjectBrowser({\n        mode: this.props.mode,\n        currentPath: this.props.initialPath || this.props.location.pathname,\n        propDataName: 'value',\n        onSelectItem: (url, item) => {\n          this.onChange(item);\n        },\n        selectableTypes: ((_this$props$widgetOpt3 = this.props.widgetOptions) === null || _this$props$widgetOpt3 === void 0 ? void 0 : (_this$props$widgetOpt4 = _this$props$widgetOpt3.pattern_options) === null || _this$props$widgetOpt4 === void 0 ? void 0 : _this$props$widgetOpt4.selectableTypes) || this.props.selectableTypes,\n        maximumSelectionSize: ((_this$props$widgetOpt5 = this.props.widgetOptions) === null || _this$props$widgetOpt5 === void 0 ? void 0 : (_this$props$widgetOpt6 = _this$props$widgetOpt5.pattern_options) === null || _this$props$widgetOpt6 === void 0 ? void 0 : _this$props$widgetOpt6.maximumSelectionSize) || this.props.maximumSelectionSize\n      });\n    });\n    _defineProperty(this, \"handleSelectedItemsRefClick\", e => {\n      if (this.props.isDisabled) {\n        return;\n      }\n      if (e.target.contains(this.selectedItemsRef.current) || e.target.contains(this.placeholderRef.current)) {\n        this.showObjectBrowser(e);\n      }\n    });\n    this.selectedItemsRef = /*#__PURE__*/React.createRef();\n    this.placeholderRef = /*#__PURE__*/React.createRef();\n  }\n  renderLabel(item) {\n    const href = item['@id'];\n    return __jsx(Popup, {\n      key: flattenToAppURL(href),\n      content: __jsx(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      }, isInternalURL(href) ? __jsx(Icon, {\n        name: homeSVG,\n        size: \"18px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }) : __jsx(Icon, {\n        name: blankSVG,\n        size: \"18px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }), \"\\xA0\", flattenToAppURL(href)),\n      trigger: __jsx(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"item-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, includes(config.settings.imageObjects, item['@type']) ? __jsx(Image, {\n        size: \"small\",\n        src: `${item['@id']}/@@images/image/thumb`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }\n      }) : item.title), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }, this.props.mode === 'multiple' && __jsx(Icon, {\n        name: clearSVG,\n        size: \"12px\",\n        className: \"right\",\n        onClick: event => {\n          event.preventDefault();\n          this.removeItem(item);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    });\n  }\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    var _this$state$errors, _this$props$error, _this$props$placehold, _this$props$placehold2;\n    const {\n      id,\n      description,\n      fieldSet,\n      value,\n      mode,\n      onChange,\n      isDisabled\n    } = this.props;\n    let items = compact(!isArray(value) && value ? [value] : value || []);\n    let icon = mode === 'multiple' || items.length === 0 ? navTreeSVG : clearSVG;\n    let iconAction = mode === 'multiple' || items.length === 0 ? this.showObjectBrowser : e => {\n      e.preventDefault();\n      onChange(id, this.props.return === 'single' ? null : []);\n    };\n    return __jsx(FormFieldWrapper, _extends({}, this.props, {\n      // At the moment, OBW handles its own errors and validation\n      error: [...((_this$state$errors = this.state.errors) !== null && _this$state$errors !== void 0 ? _this$state$errors : []), ...((_this$props$error = this.props.error) !== null && _this$props$error !== void 0 ? _this$props$error : [])],\n      className: description ? 'help text' : 'text',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 7\n      }\n    }), __jsx(\"div\", {\n      className: \"objectbrowser-field\",\n      \"aria-labelledby\": `fieldset-${fieldSet || 'default'}-field-label-${id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"selected-values\",\n      onClick: this.handleSelectedItemsRefClick,\n      onKeyDown: this.handleSelectedItemsRefClick,\n      role: \"searchbox\",\n      tabIndex: 0,\n      ref: this.selectedItemsRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }\n    }, items.map(item => this.renderLabel(item)), items.length === 0 && this.props.mode === 'multiple' && __jsx(\"div\", {\n      className: \"placeholder\",\n      ref: this.placeholderRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 15\n      }\n    }, (_this$props$placehold = this.props.placeholder) !== null && _this$props$placehold !== void 0 ? _this$props$placehold : this.props.intl.formatMessage(messages.placeholder)), this.props.allowExternals && items.length === 0 && this.props.mode !== 'multiple' && __jsx(\"input\", {\n      onBlur: this.onSubmitManualLink,\n      onKeyDown: this.onKeyDownManualLink,\n      onChange: this.onManualLinkInput,\n      value: this.state.manualLinkInput,\n      placeholder: (_this$props$placehold2 = this.props.placeholder) !== null && _this$props$placehold2 !== void 0 ? _this$props$placehold2 : this.props.intl.formatMessage(messages.placeholder),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 17\n      }\n    })), this.state.manualLinkInput && isEmpty(items) && __jsx(Button.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      basic: true,\n      className: \"cancel\",\n      onClick: e => {\n        e.stopPropagation();\n        this.setState({\n          manualLinkInput: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 15\n      }\n    }, __jsx(Icon, {\n      name: clearSVG,\n      size: \"18px\",\n      color: \"#e40166\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }\n    })), __jsx(Button, {\n      basic: true,\n      primary: true,\n      disabled: !this.state.validURL,\n      onClick: e => {\n        e.stopPropagation();\n        this.onSubmitManualLink();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 15\n      }\n    }, __jsx(Icon, {\n      name: aheadSVG,\n      size: \"18px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 17\n      }\n    }))), !this.state.manualLinkInput && __jsx(Button, {\n      \"aria-label\": this.props.intl.formatMessage(messages.openObjectBrowser),\n      onClick: iconAction,\n      className: \"action\",\n      disabled: isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 13\n      }\n    }, __jsx(Icon, {\n      name: icon,\n      size: \"18px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 15\n      }\n    }))));\n  }\n}\n/**\n * Property types.\n * @property {Object} propTypes Property types.\n * @static\n */\n_defineProperty(ObjectBrowserWidgetComponent, \"propTypes\", {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  mode: PropTypes.string,\n  // link, image, multiple\n  return: PropTypes.string,\n  // single, multiple\n  initialPath: PropTypes.string,\n  required: PropTypes.bool,\n  error: PropTypes.arrayOf(PropTypes.string),\n  value: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.object]),\n  onChange: PropTypes.func.isRequired,\n  openObjectBrowser: PropTypes.func.isRequired,\n  allowExternals: PropTypes.bool,\n  placeholder: PropTypes.string\n});\n/**\n * Default properties\n * @property {Object} defaultProps Default properties.\n * @static\n */\n_defineProperty(ObjectBrowserWidgetComponent, \"defaultProps\", {\n  description: null,\n  required: false,\n  error: [],\n  value: [],\n  mode: 'multiple',\n  return: 'multiple',\n  initialPath: '',\n  allowExternals: false\n});\nconst ObjectBrowserWidgetMode = mode => compose(injectIntl, withObjectBrowser, withRouter, connect(null, {\n  searchContent\n}))(props => __jsx(ObjectBrowserWidgetComponent, _extends({}, props, {\n  mode: mode,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 447,\n    columnNumber: 16\n  }\n})));\nexport { ObjectBrowserWidgetMode };\nexport default compose(injectIntl, withObjectBrowser, withRouter, connect(null, {\n  searchContent\n}))(ObjectBrowserWidgetComponent);","map":{"version":3,"names":["React","Component","PropTypes","compose","compact","includes","isArray","isEmpty","remove","connect","Image","Label","Popup","Button","flattenToAppURL","isInternalURL","normalizeUrl","removeProtocol","urlValidator","searchContent","withObjectBrowser","defineMessages","injectIntl","Icon","FormFieldWrapper","config","navTreeSVG","clearSVG","homeSVG","aheadSVG","blankSVG","withRouter","messages","placeholder","edit","delete","openObjectBrowser","ObjectBrowserWidgetComponent","constructor","props","_defineProperty","manualLinkInput","validURL","errors","item","value","_item","onChange","id","_this$props$widgetOpt","_this$props$widgetOpt2","mode","filter","maxSize","widgetOptions","pattern_options","maximumSelectionSize","length","exists","index","forEach","_index","resultantItem","selectedItemAttrs","allowedItemKeys","Object","keys","key","reduce","obj","_objectSpread","push","return","splice","e","setState","target","validateManualLink","url","allowExternals","error","formatMessage","intl","Boolean","state","link","sort_on","metadata_fields","b_size","block","then","resp","_resp$items","items","title","preventDefault","stopPropagation","onSubmitManualLink","ev","_this$props$widgetOpt3","_this$props$widgetOpt4","_this$props$widgetOpt5","_this$props$widgetOpt6","currentPath","initialPath","location","pathname","propDataName","onSelectItem","selectableTypes","isDisabled","contains","selectedItemsRef","current","placeholderRef","showObjectBrowser","createRef","renderLabel","href","__jsx","content","style","display","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","name","size","trigger","className","settings","imageObjects","src","onClick","event","removeItem","render","_this$state$errors","_this$props$error","_this$props$placehold","_this$props$placehold2","description","fieldSet","icon","iconAction","_extends","handleSelectedItemsRefClick","onKeyDown","role","tabIndex","ref","map","onBlur","onKeyDownManualLink","onManualLinkInput","Group","basic","color","primary","disabled","string","isRequired","required","bool","arrayOf","oneOfType","object","func","ObjectBrowserWidgetMode"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Widgets/ObjectBrowserWidget.jsx"],"sourcesContent":["/**\n * ObjectBrowserWidget component.\n * @module components/manage/Widgets/ObjectBrowserWidget\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport compact from 'lodash/compact';\nimport includes from 'lodash/includes';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport remove from 'lodash/remove';\nimport { connect } from 'react-redux';\nimport { Image, Label, Popup, Button } from 'semantic-ui-react';\nimport {\n  flattenToAppURL,\n  isInternalURL,\n  normalizeUrl,\n  removeProtocol,\n} from '@plone/volto/helpers/Url/Url';\nimport { urlValidator } from '@plone/volto/helpers/FormValidation/validators';\nimport { searchContent } from '@plone/volto/actions/search/search';\nimport withObjectBrowser from '@plone/volto/components/manage/Sidebar/ObjectBrowser';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport Icon from '@plone/volto/components/theme/Icon/Icon';\nimport FormFieldWrapper from '@plone/volto/components/manage/Widgets/FormFieldWrapper';\nimport config from '@plone/volto/registry';\n\nimport navTreeSVG from '@plone/volto/icons/nav.svg';\nimport clearSVG from '@plone/volto/icons/clear.svg';\nimport homeSVG from '@plone/volto/icons/home.svg';\nimport aheadSVG from '@plone/volto/icons/ahead.svg';\nimport blankSVG from '@plone/volto/icons/blank.svg';\nimport { withRouter } from 'react-router';\n\nconst messages = defineMessages({\n  placeholder: {\n    id: 'No items selected',\n    defaultMessage: 'No items selected',\n  },\n  edit: {\n    id: 'Edit',\n    defaultMessage: 'Edit',\n  },\n  delete: {\n    id: 'Delete',\n    defaultMessage: 'Delete',\n  },\n  openObjectBrowser: {\n    id: 'Open object browser',\n    defaultMessage: 'Open object browser',\n  },\n});\n\n/**\n * ObjectBrowserWidget component class.\n * @class ObjectBrowserWidget\n * @extends Component\n */\nexport class ObjectBrowserWidgetComponent extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string,\n    mode: PropTypes.string, // link, image, multiple\n    return: PropTypes.string, // single, multiple\n    initialPath: PropTypes.string,\n    required: PropTypes.bool,\n    error: PropTypes.arrayOf(PropTypes.string),\n    value: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.object),\n      PropTypes.object,\n    ]),\n    onChange: PropTypes.func.isRequired,\n    openObjectBrowser: PropTypes.func.isRequired,\n    allowExternals: PropTypes.bool,\n    placeholder: PropTypes.string,\n  };\n\n  /**\n   * Default properties\n   * @property {Object} defaultProps Default properties.\n   * @static\n   */\n  static defaultProps = {\n    description: null,\n    required: false,\n    error: [],\n    value: [],\n    mode: 'multiple',\n    return: 'multiple',\n    initialPath: '',\n    allowExternals: false,\n  };\n\n  state = {\n    manualLinkInput: '',\n    validURL: false,\n    errors: [],\n  };\n\n  constructor(props) {\n    super(props);\n    this.selectedItemsRef = React.createRef();\n    this.placeholderRef = React.createRef();\n  }\n  renderLabel(item) {\n    const href = item['@id'];\n    return (\n      <Popup\n        key={flattenToAppURL(href)}\n        content={\n          <div style={{ display: 'flex' }}>\n            {isInternalURL(href) ? (\n              <Icon name={homeSVG} size=\"18px\" />\n            ) : (\n              <Icon name={blankSVG} size=\"18px\" />\n            )}\n            &nbsp;\n            {flattenToAppURL(href)}\n          </div>\n        }\n        trigger={\n          <Label>\n            <div className=\"item-title\">\n              {includes(config.settings.imageObjects, item['@type']) ? (\n                <Image\n                  size=\"small\"\n                  src={`${item['@id']}/@@images/image/thumb`}\n                />\n              ) : (\n                item.title\n              )}\n            </div>\n            <div>\n              {this.props.mode === 'multiple' && (\n                <Icon\n                  name={clearSVG}\n                  size=\"12px\"\n                  className=\"right\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    this.removeItem(item);\n                  }}\n                />\n              )}\n            </div>\n          </Label>\n        }\n      />\n    );\n  }\n\n  removeItem = (item) => {\n    let value = [...this.props.value];\n    remove(value, function (_item) {\n      return _item['@id'] === item['@id'];\n    });\n    this.props.onChange(this.props.id, value);\n  };\n\n  onChange = (item) => {\n    let value =\n      this.props.mode === 'multiple' && this.props.value\n        ? [...this.props.value]\n        : [];\n    value = value.filter((item) => item != null);\n    const maxSize =\n      this.props.widgetOptions?.pattern_options?.maximumSelectionSize || -1;\n    if (maxSize === 1 && value.length === 1) {\n      value = []; //enable replace of selected item with another value, if maxsize is 1\n    }\n    let exists = false;\n    let index = -1;\n    value.forEach((_item, _index) => {\n      if (flattenToAppURL(_item['@id']) === flattenToAppURL(item['@id'])) {\n        exists = true;\n        index = _index;\n      }\n    });\n    //find(value, {\n    //   '@id': flattenToAppURL(item['@id']),\n    // });\n    if (!exists) {\n      // add item\n      // Check if we want to filter the attributes of the selected item\n      let resultantItem = item;\n      if (this.props.selectedItemAttrs) {\n        const allowedItemKeys = [\n          ...this.props.selectedItemAttrs,\n          // Add the required attributes for the widget to work\n          '@id',\n          'title',\n        ];\n        resultantItem = Object.keys(item)\n          .filter((key) => allowedItemKeys.includes(key))\n          .reduce((obj, key) => {\n            obj[key] = item[key];\n            return obj;\n          }, {});\n      }\n      // Add required @id field, just in case\n      resultantItem = { ...resultantItem, '@id': item['@id'] };\n      value.push(resultantItem);\n      if (this.props.return === 'single') {\n        this.props.onChange(this.props.id, value[0]);\n      } else {\n        this.props.onChange(this.props.id, value);\n      }\n    } else {\n      //remove item\n      value.splice(index, 1);\n      this.props.onChange(this.props.id, value);\n    }\n  };\n\n  onManualLinkInput = (e) => {\n    this.setState({ manualLinkInput: e.target.value });\n    if (this.validateManualLink(e.target.value)) {\n      this.setState({ validURL: true });\n    } else {\n      this.setState({ validURL: false });\n    }\n  };\n\n  validateManualLink = (url) => {\n    if (this.props.allowExternals) {\n      const error = urlValidator({\n        value: url,\n        formatMessage: this.props.intl.formatMessage,\n      });\n      if (error && url !== '') {\n        this.setState({ errors: [error] });\n      } else {\n        this.setState({ errors: [] });\n      }\n      return !Boolean(error);\n    } else {\n      return isInternalURL(url);\n    }\n  };\n\n  onSubmitManualLink = () => {\n    if (this.validateManualLink(this.state.manualLinkInput)) {\n      if (isInternalURL(this.state.manualLinkInput)) {\n        const link = this.state.manualLinkInput;\n        // convert it into an internal on if possible\n        this.props\n          .searchContent(\n            '/',\n            {\n              'path.query': flattenToAppURL(this.state.manualLinkInput),\n              'path.depth': '0',\n              sort_on: 'getObjPositionInParent',\n              metadata_fields: '_all',\n              b_size: 1000,\n            },\n            `${this.props.block}-${this.props.mode}`,\n          )\n          .then((resp) => {\n            if (resp.items?.length > 0) {\n              this.onChange(resp.items[0]);\n            } else {\n              this.props.onChange(this.props.id, [\n                {\n                  '@id': flattenToAppURL(link),\n                  title: removeProtocol(link),\n                },\n              ]);\n            }\n          });\n      } else {\n        this.props.onChange(this.props.id, [\n          {\n            '@id': normalizeUrl(this.state.manualLinkInput),\n            title: removeProtocol(this.state.manualLinkInput),\n          },\n        ]);\n      }\n      this.setState({ validURL: true, manualLinkInput: '' });\n    }\n  };\n\n  onKeyDownManualLink = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.onSubmitManualLink();\n    } else if (e.key === 'Escape') {\n      e.preventDefault();\n      e.stopPropagation();\n      // TODO: Do something on ESC key\n    }\n  };\n\n  showObjectBrowser = (ev) => {\n    ev.preventDefault();\n    this.props.openObjectBrowser({\n      mode: this.props.mode,\n      currentPath: this.props.initialPath || this.props.location.pathname,\n      propDataName: 'value',\n      onSelectItem: (url, item) => {\n        this.onChange(item);\n      },\n      selectableTypes:\n        this.props.widgetOptions?.pattern_options?.selectableTypes ||\n        this.props.selectableTypes,\n      maximumSelectionSize:\n        this.props.widgetOptions?.pattern_options?.maximumSelectionSize ||\n        this.props.maximumSelectionSize,\n    });\n  };\n\n  handleSelectedItemsRefClick = (e) => {\n    if (this.props.isDisabled) {\n      return;\n    }\n\n    if (\n      e.target.contains(this.selectedItemsRef.current) ||\n      e.target.contains(this.placeholderRef.current)\n    ) {\n      this.showObjectBrowser(e);\n    }\n  };\n\n  /**\n   * Render method.\n   * @method render\n   * @returns {string} Markup for the component.\n   */\n  render() {\n    const { id, description, fieldSet, value, mode, onChange, isDisabled } =\n      this.props;\n\n    let items = compact(!isArray(value) && value ? [value] : value || []);\n\n    let icon =\n      mode === 'multiple' || items.length === 0 ? navTreeSVG : clearSVG;\n    let iconAction =\n      mode === 'multiple' || items.length === 0\n        ? this.showObjectBrowser\n        : (e) => {\n            e.preventDefault();\n            onChange(id, this.props.return === 'single' ? null : []);\n          };\n\n    return (\n      <FormFieldWrapper\n        {...this.props}\n        // At the moment, OBW handles its own errors and validation\n        error={[...(this.state.errors ?? []), ...(this.props.error ?? [])]}\n        className={description ? 'help text' : 'text'}\n      >\n        <div\n          className=\"objectbrowser-field\"\n          aria-labelledby={`fieldset-${\n            fieldSet || 'default'\n          }-field-label-${id}`}\n        >\n          <div\n            className=\"selected-values\"\n            onClick={this.handleSelectedItemsRefClick}\n            onKeyDown={this.handleSelectedItemsRefClick}\n            role=\"searchbox\"\n            tabIndex={0}\n            ref={this.selectedItemsRef}\n          >\n            {items.map((item) => this.renderLabel(item))}\n\n            {items.length === 0 && this.props.mode === 'multiple' && (\n              <div className=\"placeholder\" ref={this.placeholderRef}>\n                {this.props.placeholder ??\n                  this.props.intl.formatMessage(messages.placeholder)}\n              </div>\n            )}\n            {this.props.allowExternals &&\n              items.length === 0 &&\n              this.props.mode !== 'multiple' && (\n                <input\n                  onBlur={this.onSubmitManualLink}\n                  onKeyDown={this.onKeyDownManualLink}\n                  onChange={this.onManualLinkInput}\n                  value={this.state.manualLinkInput}\n                  placeholder={\n                    this.props.placeholder ??\n                    this.props.intl.formatMessage(messages.placeholder)\n                  }\n                />\n              )}\n          </div>\n          {this.state.manualLinkInput && isEmpty(items) && (\n            <Button.Group>\n              <Button\n                basic\n                className=\"cancel\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  this.setState({ manualLinkInput: '' });\n                }}\n              >\n                <Icon name={clearSVG} size=\"18px\" color=\"#e40166\" />\n              </Button>\n              <Button\n                basic\n                primary\n                disabled={!this.state.validURL}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  this.onSubmitManualLink();\n                }}\n              >\n                <Icon name={aheadSVG} size=\"18px\" />\n              </Button>\n            </Button.Group>\n          )}\n          {!this.state.manualLinkInput && (\n            <Button\n              aria-label={this.props.intl.formatMessage(\n                messages.openObjectBrowser,\n              )}\n              onClick={iconAction}\n              className=\"action\"\n              disabled={isDisabled}\n            >\n              <Icon name={icon} size=\"18px\" />\n            </Button>\n          )}\n        </div>\n      </FormFieldWrapper>\n    );\n  }\n}\n\nconst ObjectBrowserWidgetMode = (mode) =>\n  compose(\n    injectIntl,\n    withObjectBrowser,\n    withRouter,\n    connect(null, { searchContent }),\n  )((props) => <ObjectBrowserWidgetComponent {...props} mode={mode} />);\nexport { ObjectBrowserWidgetMode };\nexport default compose(\n  injectIntl,\n  withObjectBrowser,\n  withRouter,\n  connect(null, { searchContent }),\n)(ObjectBrowserWidgetComponent);\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"No items selected","defaultMessage":"No items selected"},{"id":"Edit","defaultMessage":"Edit"},{"id":"Delete","defaultMessage":"Delete"},{"id":"Open object browser","defaultMessage":"Open object browser"}]}},"sourceType":"module","externalDependencies":[]}