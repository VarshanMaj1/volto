{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/Sitemap/Sitemap.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { asyncConnect } from '@plone/volto/helpers/AsyncConnect';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Container as SemanticContainer } from 'semantic-ui-react';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { toBackendLang } from '@plone/volto/helpers/Utils/Utils';\nimport { Link } from 'react-router-dom';\nimport config from '@plone/volto/registry';\nimport { getNavigation } from '@plone/volto/actions/navigation/navigation';\nconst messages = defineMessages({\n  Sitemap: {\n    \"id\": \"Sitemap\",\n    \"defaultMessage\": \"Sitemap\"\n  }\n});\nexport function getSitemapPath(pathname = '', lang) {\n  const prefix = pathname.replace(/\\/sitemap$/gm, '').replace(/^\\//, '');\n  const path = prefix || lang || '';\n  return path;\n}\n\n/**\n * Sitemap function component.\n * @function Sitemap\n * @param {Object} props - Component properties.\n * @returns {JSX.Element} - Rendered component.\n */\nfunction Sitemap(props) {\n  const {\n    location: {\n      pathname\n    },\n    lang,\n    getNavigation\n  } = props;\n  useEffect(() => {\n    const {\n      settings\n    } = config;\n    const language = settings.isMultilingual ? `${toBackendLang(lang)}` : null;\n    const path = getSitemapPath(pathname, language);\n    getNavigation(path, 4);\n  }, [pathname, lang, getNavigation]);\n  const renderItems = items => {\n    return __jsx(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, items.map(item => {\n      var _item$items;\n      return __jsx(\"li\", {\n        key: item.url,\n        className: ((_item$items = item.items) === null || _item$items === void 0 ? void 0 : _item$items.length) > 0 ? 'with-children' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }, __jsx(Link, {\n        to: item.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }\n      }, item.title), item.items && renderItems(item.items));\n    }));\n  };\n  const Container = config.getComponent({\n    name: 'Container'\n  }).component || SemanticContainer;\n  return __jsx(\"div\", {\n    id: \"page-sitemap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, __jsx(Helmet, {\n    title: props.intl.formatMessage(messages.Sitemap),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), __jsx(Container, {\n    className: \"view-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, props.intl.formatMessage(messages.Sitemap), \" \"), props.items && renderItems(props.items)));\n}\nSitemap.propTypes = {\n  getNavigation: PropTypes.func.isRequired,\n  location: PropTypes.object.isRequired,\n  intl: PropTypes.object.isRequired,\n  lang: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired\n};\nexport const __test__ = compose(injectIntl, connect(state => ({\n  items: state.navigation.items,\n  lang: state.intl.locale\n}), {\n  getNavigation\n}))(Sitemap);\nexport default compose(injectIntl, connect(state => ({\n  items: state.navigation.items,\n  lang: state.intl.locale\n}), {\n  getNavigation\n}), asyncConnect([{\n  key: 'navigation',\n  promise: ({\n    location,\n    store: {\n      dispatch,\n      getState\n    }\n  }) => {\n    if (!__SERVER__) return;\n    const {\n      settings\n    } = config;\n    const path = getSitemapPath(location.pathname, settings.isMultilingual ? toBackendLang(getState().intl.locale) : null);\n    return dispatch(getNavigation(path, 4));\n  }\n}]))(Sitemap);","map":{"version":3,"names":["useEffect","PropTypes","compose","connect","asyncConnect","defineMessages","injectIntl","Container","SemanticContainer","Helmet","toBackendLang","Link","config","getNavigation","messages","Sitemap","getSitemapPath","pathname","lang","prefix","replace","path","props","location","settings","language","isMultilingual","renderItems","items","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","item","_item$items","key","url","className","length","to","title","getComponent","name","component","id","intl","formatMessage","propTypes","func","isRequired","object","string","array","__test__","state","navigation","locale","promise","store","dispatch","getState","__SERVER__"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/Sitemap/Sitemap.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { asyncConnect } from '@plone/volto/helpers/AsyncConnect';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Container as SemanticContainer } from 'semantic-ui-react';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { toBackendLang } from '@plone/volto/helpers/Utils/Utils';\nimport { Link } from 'react-router-dom';\nimport config from '@plone/volto/registry';\n\nimport { getNavigation } from '@plone/volto/actions/navigation/navigation';\n\nconst messages = defineMessages({\n  Sitemap: {\n    id: 'Sitemap',\n    defaultMessage: 'Sitemap',\n  },\n});\n\nexport function getSitemapPath(pathname = '', lang) {\n  const prefix = pathname.replace(/\\/sitemap$/gm, '').replace(/^\\//, '');\n  const path = prefix || lang || '';\n  return path;\n}\n\n/**\n * Sitemap function component.\n * @function Sitemap\n * @param {Object} props - Component properties.\n * @returns {JSX.Element} - Rendered component.\n */\nfunction Sitemap(props) {\n  const {\n    location: { pathname },\n    lang,\n    getNavigation,\n  } = props;\n\n  useEffect(() => {\n    const { settings } = config;\n    const language = settings.isMultilingual ? `${toBackendLang(lang)}` : null;\n    const path = getSitemapPath(pathname, language);\n    getNavigation(path, 4);\n  }, [pathname, lang, getNavigation]);\n\n  const renderItems = (items) => {\n    return (\n      <ul>\n        {items.map((item) => (\n          <li\n            key={item.url}\n            className={item.items?.length > 0 ? 'with-children' : ''}\n          >\n            <Link to={item.url}>{item.title}</Link>\n            {item.items && renderItems(item.items)}\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  const Container =\n    config.getComponent({ name: 'Container' }).component || SemanticContainer;\n\n  return (\n    <div id=\"page-sitemap\">\n      <Helmet title={props.intl.formatMessage(messages.Sitemap)} />\n      <Container className=\"view-wrapper\">\n        <h1>{props.intl.formatMessage(messages.Sitemap)} </h1>\n        {props.items && renderItems(props.items)}\n      </Container>\n    </div>\n  );\n}\n\nSitemap.propTypes = {\n  getNavigation: PropTypes.func.isRequired,\n  location: PropTypes.object.isRequired,\n  intl: PropTypes.object.isRequired,\n  lang: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nexport const __test__ = compose(\n  injectIntl,\n  connect(\n    (state) => ({\n      items: state.navigation.items,\n      lang: state.intl.locale,\n    }),\n    { getNavigation },\n  ),\n)(Sitemap);\n\nexport default compose(\n  injectIntl,\n  connect(\n    (state) => ({\n      items: state.navigation.items,\n      lang: state.intl.locale,\n    }),\n    { getNavigation },\n  ),\n  asyncConnect([\n    {\n      key: 'navigation',\n      promise: ({ location, store: { dispatch, getState } }) => {\n        if (!__SERVER__) return;\n        const { settings } = config;\n        const path = getSitemapPath(\n          location.pathname,\n          settings.isMultilingual\n            ? toBackendLang(getState().intl.locale)\n            : null,\n        );\n        return dispatch(getNavigation(path, 4));\n      },\n    },\n  ]),\n)(Sitemap);\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Sitemap","defaultMessage":"Sitemap"}]}},"sourceType":"module","externalDependencies":[]}