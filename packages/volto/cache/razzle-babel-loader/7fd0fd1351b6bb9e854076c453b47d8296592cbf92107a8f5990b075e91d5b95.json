{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/PasswordReset/RequestPasswordReset.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport { FormattedMessage, defineMessages, useIntl } from 'react-intl';\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { usePrevious } from '@plone/volto/helpers/Utils/usePrevious';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { resetPassword } from '@plone/volto/actions/users/users';\nimport config from '@plone/volto/registry';\nconst messages = defineMessages({\n  title: {\n    \"id\": \"box_forgot_password_option\",\n    \"defaultMessage\": \"Forgot your password?\"\n  },\n  description: {\n    \"id\": \"description_lost_password\",\n    \"defaultMessage\": \"For security reasons, we store your password encrypted, and cannot mail it to you. If you would like to reset your password, fill out the form below and we will send you an email at the address you gave when you registered to start the process of resetting your password.\"\n  },\n  default: {\n    \"id\": \"Default\",\n    \"defaultMessage\": \"Default\"\n  },\n  usernameTitle: {\n    \"id\": \"label_my_username_is\",\n    \"defaultMessage\": \"My user name is\"\n  },\n  emailTitle: {\n    \"id\": \"label_my_email_is\",\n    \"defaultMessage\": \"My email is\"\n  },\n  sendEmail: {\n    \"id\": \"Start password reset\",\n    \"defaultMessage\": \"Start password reset\"\n  },\n  usernameRequired: {\n    \"id\": \"Your usernaame is required for reset your password.\",\n    \"defaultMessage\": \"Your username is required for reset your password.\"\n  },\n  emailRequired: {\n    \"id\": \"Your email is required for reset your password.\",\n    \"defaultMessage\": \"Your email is required for reset your password.\"\n  },\n  passwordReset: {\n    \"id\": \"Password reset\",\n    \"defaultMessage\": \"Password reset\"\n  }\n});\nconst useUsers = () => {\n  const loading = useSelector(state => state.users.reset.loading);\n  const loaded = useSelector(state => state.users.reset.loaded);\n  const error = useSelector(state => state.users.reset.error);\n  return {\n    loading,\n    loaded,\n    error\n  };\n};\nconst RequestPasswordReset = () => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: isSuccessful,\n    1: setisSuccessful\n  } = useState(false);\n  const history = useHistory();\n  const identifierTitle = useRef();\n  const identifierRequiredMessage = useRef();\n  const {\n    loaded,\n    loading,\n    error: props_error\n  } = useUsers();\n  const prevloading = usePrevious(loading);\n  const identifierField = config.settings.useEmailAsLogin ? 'email' : 'username';\n  if (identifierField === 'email') {\n    identifierTitle.current = intl.formatMessage(messages.emailTitle);\n    identifierRequiredMessage.current = intl.formatMessage(messages.emailRequired);\n  } else {\n    identifierTitle.current = intl.formatMessage(messages.usernameTitle);\n    identifierRequiredMessage.current = intl.formatMessage(messages.usernameRequired);\n  }\n  useEffect(() => {\n    if (prevloading && loaded) setisSuccessful(true);\n  }, [prevloading, loaded]);\n  const onSubmit = data => {\n    if (data[identifierField]) {\n      dispatch(resetPassword(data[identifierField]));\n      setError(null);\n    } else {\n      setError({\n        message: identifierRequiredMessage.current\n      });\n    }\n  };\n  const onCancel = () => {\n    history.goBack();\n  };\n  if (isSuccessful) {\n    return __jsx(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }\n    }, __jsx(\"h1\", {\n      className: \"documentFirstHeading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, __jsx(FormattedMessage, {\n      id: \"heading_sent_password\",\n      defaultMessage: \"Password reset confirmation sent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    })), __jsx(\"p\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, __jsx(FormattedMessage, {\n      id: \"description_sent_password\",\n      defaultMessage: \"Your password reset request has been mailed. It should arrive in your mailbox shortly. When you receive the message, visit the address it contains to reset your password.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    })));\n  }\n  return __jsx(\"div\", {\n    id: \"page-password-reset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }\n  }, __jsx(Helmet, {\n    title: intl.formatMessage(messages.passwordReset),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, __jsx(Form, {\n    title: intl.formatMessage(messages.title),\n    description: intl.formatMessage(messages.description),\n    onSubmit: onSubmit,\n    onCancel: onCancel,\n    error: error || props_error,\n    schema: {\n      fieldsets: [{\n        id: 'default',\n        title: intl.formatMessage(messages.default),\n        fields: [identifierField]\n      }],\n      properties: {\n        [identifierField]: {\n          type: 'string',\n          title: identifierTitle.current\n        }\n      },\n      submitLabel: intl.formatMessage(messages.sendEmail),\n      required: [identifierField]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  })));\n};\nexport default RequestPasswordReset;","map":{"version":3,"names":["useState","useEffect","useRef","useDispatch","useSelector","useHistory","Container","FormattedMessage","defineMessages","useIntl","Helmet","usePrevious","Form","resetPassword","config","messages","title","description","default","usernameTitle","emailTitle","sendEmail","usernameRequired","emailRequired","passwordReset","useUsers","loading","state","users","reset","loaded","error","RequestPasswordReset","intl","dispatch","setError","isSuccessful","setisSuccessful","history","identifierTitle","identifierRequiredMessage","props_error","prevloading","identifierField","settings","useEmailAsLogin","current","formatMessage","onSubmit","data","message","onCancel","goBack","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","id","defaultMessage","schema","fieldsets","fields","properties","type","submitLabel","required"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/theme/PasswordReset/RequestPasswordReset.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport { FormattedMessage, defineMessages, useIntl } from 'react-intl';\n\nimport Helmet from '@plone/volto/helpers/Helmet/Helmet';\nimport { usePrevious } from '@plone/volto/helpers/Utils/usePrevious';\nimport { Form } from '@plone/volto/components/manage/Form';\nimport { resetPassword } from '@plone/volto/actions/users/users';\nimport config from '@plone/volto/registry';\n\nconst messages = defineMessages({\n  title: {\n    id: 'box_forgot_password_option',\n    defaultMessage: 'Forgot your password?',\n  },\n  description: {\n    id: 'description_lost_password',\n    defaultMessage:\n      'For security reasons, we store your password encrypted, and cannot mail it to you. If you would like to reset your password, fill out the form below and we will send you an email at the address you gave when you registered to start the process of resetting your password.',\n  },\n  default: {\n    id: 'Default',\n    defaultMessage: 'Default',\n  },\n  usernameTitle: {\n    id: 'label_my_username_is',\n    defaultMessage: 'My user name is',\n  },\n  emailTitle: {\n    id: 'label_my_email_is',\n    defaultMessage: 'My email is',\n  },\n  sendEmail: {\n    id: 'Start password reset',\n    defaultMessage: 'Start password reset',\n  },\n  usernameRequired: {\n    id: 'Your usernaame is required for reset your password.',\n    defaultMessage: 'Your username is required for reset your password.',\n  },\n  emailRequired: {\n    id: 'Your email is required for reset your password.',\n    defaultMessage: 'Your email is required for reset your password.',\n  },\n  passwordReset: {\n    id: 'Password reset',\n    defaultMessage: 'Password reset',\n  },\n});\n\nconst useUsers = () => {\n  const loading = useSelector((state) => state.users.reset.loading);\n  const loaded = useSelector((state) => state.users.reset.loaded);\n  const error = useSelector((state) => state.users.reset.error);\n\n  return { loading, loaded, error };\n};\n\nconst RequestPasswordReset = () => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const [error, setError] = useState(null);\n  const [isSuccessful, setisSuccessful] = useState(false);\n  const history = useHistory();\n  const identifierTitle = useRef();\n  const identifierRequiredMessage = useRef();\n  const { loaded, loading, error: props_error } = useUsers();\n  const prevloading = usePrevious(loading);\n\n  const identifierField = config.settings.useEmailAsLogin\n    ? 'email'\n    : 'username';\n\n  if (identifierField === 'email') {\n    identifierTitle.current = intl.formatMessage(messages.emailTitle);\n    identifierRequiredMessage.current = intl.formatMessage(\n      messages.emailRequired,\n    );\n  } else {\n    identifierTitle.current = intl.formatMessage(messages.usernameTitle);\n    identifierRequiredMessage.current = intl.formatMessage(\n      messages.usernameRequired,\n    );\n  }\n\n  useEffect(() => {\n    if (prevloading && loaded) setisSuccessful(true);\n  }, [prevloading, loaded]);\n\n  const onSubmit = (data) => {\n    if (data[identifierField]) {\n      dispatch(resetPassword(data[identifierField]));\n      setError(null);\n    } else {\n      setError({\n        message: identifierRequiredMessage.current,\n      });\n    }\n  };\n\n  const onCancel = () => {\n    history.goBack();\n  };\n\n  if (isSuccessful) {\n    return (\n      <Container>\n        <h1 className=\"documentFirstHeading\">\n          <FormattedMessage\n            id=\"heading_sent_password\"\n            defaultMessage=\"Password reset confirmation sent\"\n          />\n        </h1>\n        <p className=\"description\">\n          <FormattedMessage\n            id=\"description_sent_password\"\n            defaultMessage=\"Your password reset request has been mailed. It should arrive in your mailbox shortly. When you receive the message, visit the address it contains to reset your password.\"\n          />\n        </p>\n      </Container>\n    );\n  }\n\n  return (\n    <div id=\"page-password-reset\">\n      <Helmet title={intl.formatMessage(messages.passwordReset)} />\n      <Container>\n        <Form\n          title={intl.formatMessage(messages.title)}\n          description={intl.formatMessage(messages.description)}\n          onSubmit={onSubmit}\n          onCancel={onCancel}\n          error={error || props_error}\n          schema={{\n            fieldsets: [\n              {\n                id: 'default',\n                title: intl.formatMessage(messages.default),\n                fields: [identifierField],\n              },\n            ],\n            properties: {\n              [identifierField]: {\n                type: 'string',\n                title: identifierTitle.current,\n              },\n            },\n            submitLabel: intl.formatMessage(messages.sendEmail),\n            required: [identifierField],\n          }}\n        />\n      </Container>\n    </div>\n  );\n};\n\nexport default RequestPasswordReset;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"box_forgot_password_option","defaultMessage":"Forgot your password?"},{"id":"description_lost_password","defaultMessage":"For security reasons, we store your password encrypted, and cannot mail it to you. If you would like to reset your password, fill out the form below and we will send you an email at the address you gave when you registered to start the process of resetting your password."},{"id":"Default","defaultMessage":"Default"},{"id":"label_my_username_is","defaultMessage":"My user name is"},{"id":"label_my_email_is","defaultMessage":"My email is"},{"id":"Start password reset","defaultMessage":"Start password reset"},{"id":"Your usernaame is required for reset your password.","defaultMessage":"Your username is required for reset your password."},{"id":"Your email is required for reset your password.","defaultMessage":"Your email is required for reset your password."},{"id":"Password reset","defaultMessage":"Password reset"},{"id":"heading_sent_password","defaultMessage":"Password reset confirmation sent"},{"id":"description_sent_password","defaultMessage":"Your password reset request has been mailed. It should arrive in your mailbox shortly. When you receive the message, visit the address it contains to reset your password."}]}},"sourceType":"module","externalDependencies":[]}