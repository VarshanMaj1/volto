{"ast":null,"code":"import _objectSpread from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _extends from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _objectDestructuringEmpty from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";\nvar _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/helpers/Extensions/withBlockSchemaEnhancer.jsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { defineMessages } from 'react-intl';\nimport { useIntl } from 'react-intl';\nimport find from 'lodash/find';\nimport isEmpty from 'lodash/isEmpty';\nimport config from '@plone/volto/registry';\nimport { cloneDeepSchema } from '@plone/volto/helpers/Utils/Utils';\nconst messages = defineMessages({\n  variation: {\n    \"id\": \"Variation\",\n    \"defaultMessage\": \"Variation\"\n  },\n  styling: {\n    \"id\": \"Styling\",\n    \"defaultMessage\": \"Styling\"\n  }\n});\n\n/**\n * Sets the field name as first field in schema\n */\nfunction _addField(schema, name) {\n  if (schema.fieldsets[0].fields.indexOf(name) === -1) {\n    schema.fieldsets[0].fields.unshift(name);\n  }\n}\n\n/**\n * Gets the blocksConfig from the props or from the global config object\n */\nfunction getBlocksConfig(props) {\n  const {\n    blocks\n  } = config;\n  if (props.blocksConfig) {\n    return props.blocksConfig;\n  }\n  return blocks === null || blocks === void 0 ? void 0 : blocks.blocksConfig;\n}\n\n/**\n * Utility function that adds the Select dropdown field to a schema\n */\nexport const addExtensionFieldToSchema = ({\n  schema,\n  name,\n  items,\n  intl,\n  title,\n  description = '',\n  insertFieldToOrder = _addField\n}) => {\n  const _ = intl.formatMessage;\n  insertFieldToOrder(schema, name);\n  const hasDefaultExtension = (items === null || items === void 0 ? void 0 : items.findIndex(({\n    isDefault\n  }) => isDefault)) > -1;\n  if (!hasDefaultExtension) {\n    // eslint-disable-next-line\n    console.warn('You should provide a default extension in extension:', name);\n  }\n  schema.properties[name] = {\n    title: _(title),\n    // TODO: is description sensible in here? The argument is not used anywhere\n    // description: _(description),\n    choices: items === null || items === void 0 ? void 0 : items.map(({\n      id,\n      title\n    }) => [id, _({\n      id: title,\n      defaultMessage: title\n    })]),\n    noValueOption: false,\n    default: hasDefaultExtension ? items === null || items === void 0 ? void 0 : items.find(item => item.isDefault).id : null\n  };\n  return schema;\n};\n\n/**\n * A generic HOC that provides \"schema enhancer functionality\" for any custom\n * block extension.\n *\n * This enables blocks to have additional \"variations\", beyond the usual\n * `variations` field. This function is not directly used by Volto.\n *\n * To be used with a block configuration like:\n *\n * ```\n *  {\n *    id: 'someBlockId',\n *    extensions: {\n *      '<someExtensionName>': {\n *        items: [\n *          {\n *            id: 'selectFacet',\n *            title: 'Select',\n *            view: SelectFacet,\n *            isDefault: true,\n *          },\n *          {\n *            id: 'checkboxFacet',\n *            title: 'Checkbox',\n *            view: CheckboxFacet,\n *            isDefault: false,\n *          },\n *        ]\n *      }\n *     }\n *  }\n * ```\n */\nexport const withBlockSchemaEnhancer = (FormComponent, extensionName = 'vendor', insertFieldToOrder = _addField) => {\n  var _s = $RefreshSig$();\n  return _s(_ref => {\n    var _blocksConfig$blockTy, _blocksConfig$blockTy2, _extensionConfig$item, _extensionConfig$item2, _activeItem, _blocksConfig$blockTy3, _extensionConfig$item3;\n    _s();\n    let props = Object.assign({}, (_objectDestructuringEmpty(_ref), _ref));\n    const {\n      formData,\n      schema: originalSchema\n    } = props;\n    const intl = useIntl();\n    const blocksConfig = getBlocksConfig(props);\n    const blockType = formData['@type'];\n    const extensionConfig = blocksConfig === null || blocksConfig === void 0 ? void 0 : (_blocksConfig$blockTy = blocksConfig[blockType]) === null || _blocksConfig$blockTy === void 0 ? void 0 : (_blocksConfig$blockTy2 = _blocksConfig$blockTy.extensions) === null || _blocksConfig$blockTy2 === void 0 ? void 0 : _blocksConfig$blockTy2[extensionName];\n    if (!extensionConfig) return __jsx(FormComponent, _extends({}, props, {\n      schema: originalSchema,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 14\n      }\n    }));\n    const activeItemName = formData === null || formData === void 0 ? void 0 : formData[extensionName];\n    let activeItem = (_extensionConfig$item = extensionConfig.items) === null || _extensionConfig$item === void 0 ? void 0 : _extensionConfig$item.find(item => item.id === activeItemName);\n    if (!activeItem) activeItem = (_extensionConfig$item2 = extensionConfig.items) === null || _extensionConfig$item2 === void 0 ? void 0 : _extensionConfig$item2.find(item => item.isDefault);\n    const schemaEnhancer =\n    // For the main \"variation\" of blocks, allow simply passing a\n    // schemaEnhancer in the block configuration\n    ((_activeItem = activeItem) === null || _activeItem === void 0 ? void 0 : _activeItem['schemaEnhancer']) || extensionName === 'variation' && (blocksConfig === null || blocksConfig === void 0 ? void 0 : (_blocksConfig$blockTy3 = blocksConfig[blockType]) === null || _blocksConfig$blockTy3 === void 0 ? void 0 : _blocksConfig$blockTy3.schemaEnhancer);\n    let schema = schemaEnhancer ? schemaEnhancer({\n      schema: cloneDeepSchema(originalSchema),\n      formData,\n      intl\n    }) : cloneDeepSchema(originalSchema);\n    const {\n      title = messages.variation,\n      description\n    } = extensionConfig;\n    if (((_extensionConfig$item3 = extensionConfig.items) === null || _extensionConfig$item3 === void 0 ? void 0 : _extensionConfig$item3.length) > 1) {\n      addExtensionFieldToSchema({\n        schema,\n        name: extensionName,\n        items: extensionConfig.items || [],\n        intl,\n        title,\n        description,\n        insertFieldToOrder\n      });\n    }\n    return __jsx(FormComponent, _extends({}, props, {\n      schema: schema,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 12\n      }\n    }));\n  }, \"rlSgSjbewJ1PrR/Ile8g/kr050o=\", false, function () {\n    return [useIntl];\n  });\n};\n\n/**\n * Apply block variation schema enhancers to the provided schema, using block\n * information from the provided block data (as `formData`).\n *\n * Blocks can be enhanced with variations declared like:\n *\n * ```\n *  {\n *    id: 'searchBlock',\n *    schemaEnhancer: ({schema, formData, intl}) => schema,\n *    variations: [\n *      {\n *        id: 'facetsRightSide',\n *        title: 'Facets on right side',\n *        view: RightColumnFacets,\n *        isDefault: true,\n *      },\n *      {\n *        id: 'facetsLeftSide',\n *        title: 'Facets on left side',\n *        view: LeftColumnFacets,\n *        isDefault: false,\n *        schemaEnhancer: ({schema, formData, intl}) => schema,\n *      },\n *    ],\n *\n * ```\n * Notice that each variation can declare an option schema enhancer, and each\n * block supports an optional `schemaEnhancer` function.\n */\nexport const applySchemaEnhancer = ({\n  schema: originalSchema,\n  formData,\n  intl,\n  blocksConfig = config.blocks.blocksConfig,\n  navRoot,\n  contentType\n}) => {\n  var _blocksConfig$blockTy4, _activeItem2, _blocksConfig$blockTy6;\n  let schema, schemaEnhancer;\n  const blockType = formData['@type'];\n  const variations = (blocksConfig === null || blocksConfig === void 0 ? void 0 : (_blocksConfig$blockTy4 = blocksConfig[blockType]) === null || _blocksConfig$blockTy4 === void 0 ? void 0 : _blocksConfig$blockTy4.variations) || [];\n  if (variations.length === 0) {\n    var _blocksConfig$blockTy5;\n    // No variations present but we finalize the schema with a schemaEnhancer\n    // in the block config (if present)\n    schemaEnhancer = blocksConfig === null || blocksConfig === void 0 ? void 0 : (_blocksConfig$blockTy5 = blocksConfig[blockType]) === null || _blocksConfig$blockTy5 === void 0 ? void 0 : _blocksConfig$blockTy5.schemaEnhancer;\n    if (schemaEnhancer) schema = schemaEnhancer({\n      schema: cloneDeepSchema(originalSchema),\n      formData,\n      intl,\n      navRoot,\n      contentType\n    });\n    return schema || originalSchema;\n  }\n  const activeItemName = formData === null || formData === void 0 ? void 0 : formData.variation;\n  let activeItem = variations.find(item => item.id === activeItemName);\n  if (!activeItem) activeItem = variations.find(item => item.isDefault);\n  schemaEnhancer = (_activeItem2 = activeItem) === null || _activeItem2 === void 0 ? void 0 : _activeItem2['schemaEnhancer'];\n  schema = schemaEnhancer ? schemaEnhancer({\n    schema: cloneDeepSchema(originalSchema),\n    formData,\n    intl,\n    navRoot,\n    contentType\n  }) : cloneDeepSchema(originalSchema);\n\n  // Finalize the schema with a schemaEnhancer in the block config;\n  schemaEnhancer = blocksConfig === null || blocksConfig === void 0 ? void 0 : (_blocksConfig$blockTy6 = blocksConfig[blockType]) === null || _blocksConfig$blockTy6 === void 0 ? void 0 : _blocksConfig$blockTy6.schemaEnhancer;\n  if (schemaEnhancer) schema = schemaEnhancer({\n    schema,\n    formData,\n    intl,\n    navRoot,\n    contentType\n  });\n  return schema || originalSchema;\n};\n\n/**\n * A HOC that enhances the incoming schema prop with block variations support\n * by:\n *\n * - applies the selected variation's schema enhancer\n * - adds the variation selection input (as a choice widget)\n */\nexport const withVariationSchemaEnhancer = FormComponent => {\n  var _s2 = $RefreshSig$();\n  return _s2(props => {\n    var _blocksConfig$blockTy7;\n    _s2();\n    const {\n      formData,\n      schema: originalSchema,\n      navRoot,\n      contentType\n    } = props;\n    const intl = useIntl();\n    const blocksConfig = getBlocksConfig(props);\n    const blockType = formData['@type'];\n    const variations = ((_blocksConfig$blockTy7 = blocksConfig[blockType]) === null || _blocksConfig$blockTy7 === void 0 ? void 0 : _blocksConfig$blockTy7.variations) || [];\n    let schema = cloneDeepSchema(originalSchema);\n    if (variations.length > 1) {\n      schema = addExtensionFieldToSchema({\n        schema,\n        name: 'variation',\n        items: variations,\n        intl,\n        title: messages.variation,\n        insertFieldToOrder: _addField\n      });\n    }\n    schema = applySchemaEnhancer({\n      schema,\n      formData,\n      intl,\n      blocksConfig,\n      navRoot,\n      contentType\n    });\n    return __jsx(FormComponent, _extends({}, props, {\n      schema: schema,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 10\n      }\n    }));\n  }, \"rlSgSjbewJ1PrR/Ile8g/kr050o=\", false, function () {\n    return [useIntl];\n  });\n};\nexport const EMPTY_STYLES_SCHEMA = {\n  fieldsets: [{\n    id: 'default',\n    title: 'Default',\n    fields: []\n  }],\n  properties: {},\n  required: []\n};\n\n/**\n * Adds the `styles` field and 'styling' fieldset in a given schema\n */\nexport const addStyling = ({\n  schema,\n  formData,\n  intl\n}) => {\n  if (isEmpty(find(schema.fieldsets, {\n    id: 'styling'\n  }))) {\n    schema.fieldsets.push({\n      id: 'styling',\n      title: intl.formatMessage(messages.styling),\n      fields: ['styles']\n    });\n    schema.properties.styles = {\n      widget: 'object',\n      title: intl.formatMessage(messages.styling),\n      schema: cloneDeepSchema(EMPTY_STYLES_SCHEMA)\n    };\n  }\n  return schema;\n};\n\n/**\n * Allows compose-like declaration of schema enhancers\n *\n * Example usage:\n * const schemaEnhancer = composeSchema(schemaEnhancerA, schemaEnhancerB)\n *\n * where each enhancer is a function with signature\n * ({schema, formData, ...rest}) => schema\n *\n */\nexport function composeSchema() {\n  const enhancers = Array.from(arguments);\n  const composer = args => {\n    const props = enhancers.reduce((acc, enhancer) => enhancer ? _objectSpread(_objectSpread({}, acc), {}, {\n      schema: enhancer(acc)\n    }) : acc, _objectSpread({}, args));\n    return props.schema;\n  };\n  return composer;\n}","map":{"version":3,"names":["React","defineMessages","useIntl","find","isEmpty","config","cloneDeepSchema","messages","variation","styling","_addField","schema","name","fieldsets","fields","indexOf","unshift","getBlocksConfig","props","blocks","blocksConfig","addExtensionFieldToSchema","items","intl","title","description","insertFieldToOrder","_","formatMessage","hasDefaultExtension","findIndex","isDefault","console","warn","properties","choices","map","id","defaultMessage","noValueOption","default","item","withBlockSchemaEnhancer","FormComponent","extensionName","_s","$RefreshSig$","_ref","_blocksConfig$blockTy","_blocksConfig$blockTy2","_extensionConfig$item","_extensionConfig$item2","_activeItem","_blocksConfig$blockTy3","_extensionConfig$item3","Object","assign","_objectDestructuringEmpty","formData","originalSchema","blockType","extensionConfig","extensions","__jsx","_extends","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","activeItemName","activeItem","schemaEnhancer","length","applySchemaEnhancer","navRoot","contentType","_blocksConfig$blockTy4","_activeItem2","_blocksConfig$blockTy6","variations","_blocksConfig$blockTy5","withVariationSchemaEnhancer","_s2","_blocksConfig$blockTy7","EMPTY_STYLES_SCHEMA","required","addStyling","push","styles","widget","composeSchema","enhancers","Array","from","arguments","composer","args","reduce","acc","enhancer","_objectSpread"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/helpers/Extensions/withBlockSchemaEnhancer.jsx"],"sourcesContent":["import React from 'react';\nimport { defineMessages } from 'react-intl';\nimport { useIntl } from 'react-intl';\nimport find from 'lodash/find';\nimport isEmpty from 'lodash/isEmpty';\nimport config from '@plone/volto/registry';\nimport { cloneDeepSchema } from '@plone/volto/helpers/Utils/Utils';\n\nconst messages = defineMessages({\n  variation: {\n    id: 'Variation',\n    defaultMessage: 'Variation',\n  },\n  styling: {\n    id: 'Styling',\n    defaultMessage: 'Styling',\n  },\n});\n\n/**\n * Sets the field name as first field in schema\n */\nfunction _addField(schema, name) {\n  if (schema.fieldsets[0].fields.indexOf(name) === -1) {\n    schema.fieldsets[0].fields.unshift(name);\n  }\n}\n\n/**\n * Gets the blocksConfig from the props or from the global config object\n */\nfunction getBlocksConfig(props) {\n  const { blocks } = config;\n\n  if (props.blocksConfig) {\n    return props.blocksConfig;\n  }\n\n  return blocks?.blocksConfig;\n}\n\n/**\n * Utility function that adds the Select dropdown field to a schema\n */\nexport const addExtensionFieldToSchema = ({\n  schema,\n  name,\n  items,\n  intl,\n  title,\n  description = '',\n  insertFieldToOrder = _addField,\n}) => {\n  const _ = intl.formatMessage;\n\n  insertFieldToOrder(schema, name);\n\n  const hasDefaultExtension =\n    items?.findIndex(({ isDefault }) => isDefault) > -1;\n\n  if (!hasDefaultExtension) {\n    // eslint-disable-next-line\n    console.warn('You should provide a default extension in extension:', name);\n  }\n\n  schema.properties[name] = {\n    title: _(title),\n    // TODO: is description sensible in here? The argument is not used anywhere\n    // description: _(description),\n    choices: items?.map(({ id, title }) => [\n      id,\n      _({ id: title, defaultMessage: title }),\n    ]),\n    noValueOption: false,\n    default: hasDefaultExtension\n      ? items?.find((item) => item.isDefault).id\n      : null,\n  };\n\n  return schema;\n};\n\n/**\n * A generic HOC that provides \"schema enhancer functionality\" for any custom\n * block extension.\n *\n * This enables blocks to have additional \"variations\", beyond the usual\n * `variations` field. This function is not directly used by Volto.\n *\n * To be used with a block configuration like:\n *\n * ```\n *  {\n *    id: 'someBlockId',\n *    extensions: {\n *      '<someExtensionName>': {\n *        items: [\n *          {\n *            id: 'selectFacet',\n *            title: 'Select',\n *            view: SelectFacet,\n *            isDefault: true,\n *          },\n *          {\n *            id: 'checkboxFacet',\n *            title: 'Checkbox',\n *            view: CheckboxFacet,\n *            isDefault: false,\n *          },\n *        ]\n *      }\n *     }\n *  }\n * ```\n */\nexport const withBlockSchemaEnhancer =\n  (FormComponent, extensionName = 'vendor', insertFieldToOrder = _addField) =>\n  ({ ...props }) => {\n    const { formData, schema: originalSchema } = props;\n    const intl = useIntl();\n\n    const blocksConfig = getBlocksConfig(props);\n\n    const blockType = formData['@type'];\n    const extensionConfig =\n      blocksConfig?.[blockType]?.extensions?.[extensionName];\n\n    if (!extensionConfig)\n      return <FormComponent {...props} schema={originalSchema} />;\n\n    const activeItemName = formData?.[extensionName];\n    let activeItem = extensionConfig.items?.find(\n      (item) => item.id === activeItemName,\n    );\n    if (!activeItem)\n      activeItem = extensionConfig.items?.find((item) => item.isDefault);\n\n    const schemaEnhancer =\n      // For the main \"variation\" of blocks, allow simply passing a\n      // schemaEnhancer in the block configuration\n      activeItem?.['schemaEnhancer'] ||\n      (extensionName === 'variation' &&\n        blocksConfig?.[blockType]?.schemaEnhancer);\n\n    let schema = schemaEnhancer\n      ? schemaEnhancer({\n          schema: cloneDeepSchema(originalSchema),\n          formData,\n          intl,\n        })\n      : cloneDeepSchema(originalSchema);\n\n    const { title = messages.variation, description } = extensionConfig;\n\n    if (extensionConfig.items?.length > 1) {\n      addExtensionFieldToSchema({\n        schema,\n        name: extensionName,\n        items: extensionConfig.items || [],\n        intl,\n        title,\n        description,\n        insertFieldToOrder,\n      });\n    }\n\n    return <FormComponent {...props} schema={schema} />;\n  };\n\n/**\n * Apply block variation schema enhancers to the provided schema, using block\n * information from the provided block data (as `formData`).\n *\n * Blocks can be enhanced with variations declared like:\n *\n * ```\n *  {\n *    id: 'searchBlock',\n *    schemaEnhancer: ({schema, formData, intl}) => schema,\n *    variations: [\n *      {\n *        id: 'facetsRightSide',\n *        title: 'Facets on right side',\n *        view: RightColumnFacets,\n *        isDefault: true,\n *      },\n *      {\n *        id: 'facetsLeftSide',\n *        title: 'Facets on left side',\n *        view: LeftColumnFacets,\n *        isDefault: false,\n *        schemaEnhancer: ({schema, formData, intl}) => schema,\n *      },\n *    ],\n *\n * ```\n * Notice that each variation can declare an option schema enhancer, and each\n * block supports an optional `schemaEnhancer` function.\n */\nexport const applySchemaEnhancer = ({\n  schema: originalSchema,\n  formData,\n  intl,\n  blocksConfig = config.blocks.blocksConfig,\n  navRoot,\n  contentType,\n}) => {\n  let schema, schemaEnhancer;\n\n  const blockType = formData['@type'];\n  const variations = blocksConfig?.[blockType]?.variations || [];\n\n  if (variations.length === 0) {\n    // No variations present but we finalize the schema with a schemaEnhancer\n    // in the block config (if present)\n    schemaEnhancer = blocksConfig?.[blockType]?.schemaEnhancer;\n\n    if (schemaEnhancer)\n      schema = schemaEnhancer({\n        schema: cloneDeepSchema(originalSchema),\n        formData,\n        intl,\n        navRoot,\n        contentType,\n      });\n    return schema || originalSchema;\n  }\n\n  const activeItemName = formData?.variation;\n  let activeItem = variations.find((item) => item.id === activeItemName);\n  if (!activeItem) activeItem = variations.find((item) => item.isDefault);\n\n  schemaEnhancer = activeItem?.['schemaEnhancer'];\n\n  schema = schemaEnhancer\n    ? schemaEnhancer({\n        schema: cloneDeepSchema(originalSchema),\n        formData,\n        intl,\n        navRoot,\n        contentType,\n      })\n    : cloneDeepSchema(originalSchema);\n\n  // Finalize the schema with a schemaEnhancer in the block config;\n  schemaEnhancer = blocksConfig?.[blockType]?.schemaEnhancer;\n  if (schemaEnhancer)\n    schema = schemaEnhancer({ schema, formData, intl, navRoot, contentType });\n\n  return schema || originalSchema;\n};\n\n/**\n * A HOC that enhances the incoming schema prop with block variations support\n * by:\n *\n * - applies the selected variation's schema enhancer\n * - adds the variation selection input (as a choice widget)\n */\nexport const withVariationSchemaEnhancer = (FormComponent) => (props) => {\n  const { formData, schema: originalSchema, navRoot, contentType } = props;\n  const intl = useIntl();\n\n  const blocksConfig = getBlocksConfig(props);\n\n  const blockType = formData['@type'];\n  const variations = blocksConfig[blockType]?.variations || [];\n\n  let schema = cloneDeepSchema(originalSchema);\n\n  if (variations.length > 1) {\n    schema = addExtensionFieldToSchema({\n      schema,\n      name: 'variation',\n      items: variations,\n      intl,\n      title: messages.variation,\n      insertFieldToOrder: _addField,\n    });\n  }\n\n  schema = applySchemaEnhancer({\n    schema,\n    formData,\n    intl,\n    blocksConfig,\n    navRoot,\n    contentType,\n  });\n\n  return <FormComponent {...props} schema={schema} />;\n};\n\nexport const EMPTY_STYLES_SCHEMA = {\n  fieldsets: [\n    {\n      id: 'default',\n      title: 'Default',\n      fields: [],\n    },\n  ],\n  properties: {},\n  required: [],\n};\n\n/**\n * Adds the `styles` field and 'styling' fieldset in a given schema\n */\nexport const addStyling = ({ schema, formData, intl }) => {\n  if (isEmpty(find(schema.fieldsets, { id: 'styling' }))) {\n    schema.fieldsets.push({\n      id: 'styling',\n      title: intl.formatMessage(messages.styling),\n      fields: ['styles'],\n    });\n\n    schema.properties.styles = {\n      widget: 'object',\n      title: intl.formatMessage(messages.styling),\n      schema: cloneDeepSchema(EMPTY_STYLES_SCHEMA),\n    };\n  }\n\n  return schema;\n};\n\n/**\n * Allows compose-like declaration of schema enhancers\n *\n * Example usage:\n * const schemaEnhancer = composeSchema(schemaEnhancerA, schemaEnhancerB)\n *\n * where each enhancer is a function with signature\n * ({schema, formData, ...rest}) => schema\n *\n */\nexport function composeSchema() {\n  const enhancers = Array.from(arguments);\n  const composer = (args) => {\n    const props = enhancers.reduce(\n      (acc, enhancer) => (enhancer ? { ...acc, schema: enhancer(acc) } : acc),\n      { ...args },\n    );\n    return props.schema;\n  };\n  return composer;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Variation","defaultMessage":"Variation"},{"id":"Styling","defaultMessage":"Styling"}]}},"sourceType":"module","externalDependencies":[]}