{"ast":null,"code":"import _extends from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js\";\nimport _objectSpread from \"/Users/varshanmaji/Projects/volto/node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Multilingual/TranslationObject.jsx\",\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport map from 'lodash/map';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Form as UiForm, Menu, Segment } from 'semantic-ui-react';\nimport { Provider } from 'react-intl-redux';\nimport { Form, Field } from '@plone/volto/components/manage/Form';\nimport config from '@plone/volto/registry';\nimport configureStore from '@plone/volto/store';\nimport Api from '@plone/volto/helpers/Api/Api';\nimport { flattenToAppURL } from '@plone/volto/helpers/Url/Url';\nimport langmap from '@plone/volto/helpers/LanguageMap/LanguageMap';\nimport { toGettextLang, toReactIntlLang } from '@plone/volto/helpers/Utils/Utils';\nimport { createBrowserHistory } from 'history';\nconst messages = defineMessages({\n  document: {\n    \"id\": \"Document\",\n    \"defaultMessage\": \"Document\"\n  }\n});\nconst TranslationObject = ({\n  translationObject,\n  schema,\n  pathname,\n  visual,\n  isFormSelected,\n  onSelectForm\n}) => {\n  _s();\n  const intl = useIntl();\n  const {\n    0: locales,\n    1: setLocales\n  } = useState({});\n  const {\n    0: loadingLocale,\n    1: setLoadingLocale\n  } = useState(false);\n  const {\n    0: activeMenu,\n    1: setActiveMenu\n  } = useState('language');\n  const handleMenuClick = (e, {\n    name\n  }) => {\n    setActiveMenu(name);\n  };\n  useEffect(() => {\n    if (!loadingLocale && Object.keys(locales).length < config.settings.supportedLanguages.length) {\n      setLoadingLocale(true);\n      let lang = config.settings.supportedLanguages[Object.keys(locales).length];\n      const langFileName = toGettextLang(lang);\n      import(/* @vite-ignore */'@root/../locales/' + langFileName + '.json').then(locale => {\n        setLocales(_objectSpread(_objectSpread({}, locales), {}, {\n          [toReactIntlLang(lang)]: locale.default\n        }));\n        setLoadingLocale(false);\n      });\n    }\n  }, [loadingLocale, locales]);\n  const api = new Api();\n  const history = createBrowserHistory();\n  const store = configureStore(_objectSpread(_objectSpread({}, window.__data), {}, {\n    intl: {\n      defaultLocale: config.settings.defaultLanguage,\n      locale: translationObject.language.token,\n      messages: locales[translationObject.language.token]\n    }\n  }), history, api);\n  const lang = translationObject.language.token;\n  return translationObject && Object.keys(locales).length > 0 ? __jsx(Provider, {\n    store: store,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, __jsx(React.Fragment, null, __jsx(Menu, {\n    pointing: true,\n    secondary: true,\n    attached: true,\n    tabular: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, __jsx(Menu.Item, {\n    name: \"language\",\n    active: activeMenu === 'language',\n    onClick: handleMenuClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, langmap[lang].nativeName), visual && __jsx(Menu.Item, {\n    name: \"properties\",\n    active: activeMenu === 'properties',\n    onClick: handleMenuClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, intl.formatMessage(messages.document))), activeMenu === 'language' && __jsx(Form, {\n    key: \"translation-object-form\",\n    schema: schema,\n    formData: translationObject,\n    type: translationObject['@type'],\n    onSubmit: () => {\n      /*do nothing*/\n    },\n    hideActions: true,\n    pathname: flattenToAppURL(translationObject['@id']),\n    visual: visual,\n    title: langmap[lang].nativeName,\n    loading: false,\n    isFormSelected: isFormSelected,\n    onSelectForm: onSelectForm,\n    editable: false,\n    onChange: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), activeMenu === 'properties' && __jsx(UiForm, {\n    method: \"post\",\n    onSubmit: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, __jsx(\"fieldset\", {\n    className: \"invisible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, schema && map(schema.fieldsets, item => [__jsx(Segment, {\n    secondary: true,\n    attached: true,\n    key: item.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, item.title), __jsx(Segment, {\n    attached: true,\n    key: `fieldset-contents-${item.title}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, map(item.fields, (field, index) => __jsx(Field, _extends({}, schema.properties[field], {\n    id: field,\n    formData: translationObject,\n    focus: false,\n    value: translationObject[field],\n    required: schema.required.indexOf(field) !== -1,\n    key: field,\n    onChange: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }\n  }))))]))))) : null;\n};\n_s(TranslationObject, \"CwZm/BTilhg5sYN5p/xfu9waNCg=\", false, function () {\n  return [useIntl];\n});\n_c = TranslationObject;\nexport default TranslationObject;\nvar _c;\n$RefreshReg$(_c, \"TranslationObject\");","map":{"version":3,"names":["React","useEffect","useState","map","defineMessages","useIntl","Form","UiForm","Menu","Segment","Provider","Field","config","configureStore","Api","flattenToAppURL","langmap","toGettextLang","toReactIntlLang","createBrowserHistory","messages","document","TranslationObject","translationObject","schema","pathname","visual","isFormSelected","onSelectForm","_s","intl","locales","setLocales","loadingLocale","setLoadingLocale","activeMenu","setActiveMenu","handleMenuClick","e","name","Object","keys","length","settings","supportedLanguages","lang","langFileName","then","locale","_objectSpread","default","api","history","store","window","__data","defaultLocale","defaultLanguage","language","token","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","pointing","secondary","attached","tabular","Item","active","onClick","nativeName","formatMessage","key","formData","type","onSubmit","hideActions","title","loading","editable","onChange","method","className","fieldsets","item","fields","field","index","_extends","properties","id","focus","value","required","indexOf","_c","$RefreshReg$"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Multilingual/TranslationObject.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport map from 'lodash/map';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { Form as UiForm, Menu, Segment } from 'semantic-ui-react';\nimport { Provider } from 'react-intl-redux';\nimport { Form, Field } from '@plone/volto/components/manage/Form';\nimport config from '@plone/volto/registry';\nimport configureStore from '@plone/volto/store';\nimport Api from '@plone/volto/helpers/Api/Api';\nimport { flattenToAppURL } from '@plone/volto/helpers/Url/Url';\nimport langmap from '@plone/volto/helpers/LanguageMap/LanguageMap';\nimport {\n  toGettextLang,\n  toReactIntlLang,\n} from '@plone/volto/helpers/Utils/Utils';\nimport { createBrowserHistory } from 'history';\n\nconst messages = defineMessages({\n  document: {\n    id: 'Document',\n    defaultMessage: 'Document',\n  },\n});\n\nconst TranslationObject = ({\n  translationObject,\n  schema,\n  pathname,\n  visual,\n  isFormSelected,\n  onSelectForm,\n}) => {\n  const intl = useIntl();\n\n  const [locales, setLocales] = useState({});\n  const [loadingLocale, setLoadingLocale] = useState(false);\n  const [activeMenu, setActiveMenu] = useState('language');\n  const handleMenuClick = (e, { name }) => {\n    setActiveMenu(name);\n  };\n\n  useEffect(() => {\n    if (\n      !loadingLocale &&\n      Object.keys(locales).length < config.settings.supportedLanguages.length\n    ) {\n      setLoadingLocale(true);\n      let lang =\n        config.settings.supportedLanguages[Object.keys(locales).length];\n      const langFileName = toGettextLang(lang);\n      import(\n        /* @vite-ignore */ '@root/../locales/' + langFileName + '.json'\n      ).then((locale) => {\n        setLocales({ ...locales, [toReactIntlLang(lang)]: locale.default });\n        setLoadingLocale(false);\n      });\n    }\n  }, [loadingLocale, locales]);\n\n  const api = new Api();\n  const history = createBrowserHistory();\n  const store = configureStore(\n    {\n      ...window.__data,\n      intl: {\n        defaultLocale: config.settings.defaultLanguage,\n        locale: translationObject.language.token,\n        messages: locales[translationObject.language.token],\n      },\n    },\n    history,\n    api,\n  );\n\n  const lang = translationObject.language.token;\n\n  return translationObject && Object.keys(locales).length > 0 ? (\n    <Provider store={store}>\n      <>\n        <Menu pointing secondary attached tabular>\n          <Menu.Item\n            name=\"language\"\n            active={activeMenu === 'language'}\n            onClick={handleMenuClick}\n          >\n            {langmap[lang].nativeName}\n          </Menu.Item>\n          {visual && (\n            <Menu.Item\n              name=\"properties\"\n              active={activeMenu === 'properties'}\n              onClick={handleMenuClick}\n            >\n              {intl.formatMessage(messages.document)}\n            </Menu.Item>\n          )}\n        </Menu>\n        {activeMenu === 'language' && (\n          <Form\n            key=\"translation-object-form\"\n            schema={schema}\n            formData={translationObject}\n            type={translationObject['@type']}\n            onSubmit={() => {\n              /*do nothing*/\n            }}\n            hideActions\n            pathname={flattenToAppURL(translationObject['@id'])}\n            visual={visual}\n            title={langmap[lang].nativeName}\n            loading={false}\n            isFormSelected={isFormSelected}\n            onSelectForm={onSelectForm}\n            editable={false}\n            onChange={() => {}}\n          />\n        )}\n        {activeMenu === 'properties' && (\n          <UiForm method=\"post\" onSubmit={() => {}}>\n            <fieldset className=\"invisible\">\n              {schema &&\n                map(schema.fieldsets, (item) => [\n                  <Segment secondary attached key={item.title}>\n                    {item.title}\n                  </Segment>,\n                  <Segment attached key={`fieldset-contents-${item.title}`}>\n                    {map(item.fields, (field, index) => (\n                      <Field\n                        {...schema.properties[field]}\n                        id={field}\n                        formData={translationObject}\n                        focus={false}\n                        value={translationObject[field]}\n                        required={schema.required.indexOf(field) !== -1}\n                        key={field}\n                        onChange={() => {}}\n                      />\n                    ))}\n                  </Segment>,\n                ])}\n            </fieldset>\n          </UiForm>\n        )}\n      </>\n    </Provider>\n  ) : null;\n};\n\nexport default TranslationObject;\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[{"id":"Document","defaultMessage":"Document"}]}},"sourceType":"module","externalDependencies":[]}