{"ast":null,"code":"var _jsxFileName = \"/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Image/Edit.jsx\";\nvar __jsx = React.createElement;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * Edit image block.\n * @module components/manage/Blocks/Image/Edit\n */\n\nimport React from 'react';\nimport cx from 'classnames';\nimport ImageSidebar from '@plone/volto/components/manage/Blocks/Image/ImageSidebar';\nimport SidebarPortal from '@plone/volto/components/manage/Sidebar/SidebarPortal';\nimport { flattenToAppURL, isInternalURL } from '@plone/volto/helpers/Url/Url';\nimport { withBlockExtensions } from '@plone/volto/helpers/Extensions';\nimport config from '@plone/volto/registry';\nimport { ImageInput } from '@plone/volto/components/manage/Widgets/ImageWidget';\nfunction Edit(props) {\n  const {\n    data\n  } = props;\n  const Image = config.getComponent({\n    name: 'Image'\n  }).component;\n  const handleChange = React.useCallback(async (id, image, {\n    title,\n    image_field,\n    image_scales\n  } = {}) => {\n    const url = image ? image['@id'] || image : '';\n    props.onChangeBlock(props.block, _objectSpread(_objectSpread({}, props.data), {}, {\n      url: flattenToAppURL(url),\n      image_field,\n      image_scales,\n      alt: props.data.alt || title || ''\n    }));\n  }, [props]);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: cx('block image align', {\n      center: !Boolean(data.align)\n    }, data.align),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, data.url ? __jsx(Image, {\n    className: cx({\n      'full-width': data.align === 'full',\n      large: data.size === 'l',\n      medium: data.size === 'm',\n      small: data.size === 's'\n    }),\n    item: data.image_scales ? {\n      '@id': data.url,\n      image_field: data.image_field,\n      image_scales: data.image_scales\n    } : undefined,\n    src: data.image_scales ? undefined : isInternalURL(data.url) ?\n    // Backwards compat in the case that the block is storing the full server URL\n    (() => {\n      if (data.size === 'l') return `${flattenToAppURL(data.url)}/@@images/image`;\n      if (data.size === 'm') return `${flattenToAppURL(data.url)}/@@images/image/preview`;\n      if (data.size === 's') return `${flattenToAppURL(data.url)}/@@images/image/mini`;\n      return `${flattenToAppURL(data.url)}/@@images/image`;\n    })() : data.url,\n    sizes: config.blocks.blocksConfig.image.getSizes(data),\n    alt: data.alt || '',\n    loading: \"lazy\",\n    responsive: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }) : __jsx(ImageInput, {\n    onChange: handleChange,\n    placeholderLinkInput: data.placeholder,\n    block: props.block,\n    id: props.block,\n    objectBrowserPickerType: 'image',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }), __jsx(SidebarPortal, {\n    selected: props.selected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(ImageSidebar, _extends({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  })))));\n}\nexport default withBlockExtensions(Edit);","map":{"version":3,"names":["React","cx","ImageSidebar","SidebarPortal","flattenToAppURL","isInternalURL","withBlockExtensions","config","ImageInput","Edit","props","data","Image","getComponent","name","component","handleChange","useCallback","id","image","title","image_field","image_scales","url","onChangeBlock","block","_objectSpread","alt","__jsx","Fragment","className","center","Boolean","align","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","large","size","medium","small","item","undefined","src","sizes","blocks","blocksConfig","getSizes","loading","responsive","onChange","placeholderLinkInput","placeholder","objectBrowserPickerType","selected","_extends"],"sources":["/Users/varshanmaji/Projects/volto/packages/volto/src/components/manage/Blocks/Image/Edit.jsx"],"sourcesContent":["/**\n * Edit image block.\n * @module components/manage/Blocks/Image/Edit\n */\n\nimport React from 'react';\nimport cx from 'classnames';\nimport ImageSidebar from '@plone/volto/components/manage/Blocks/Image/ImageSidebar';\nimport SidebarPortal from '@plone/volto/components/manage/Sidebar/SidebarPortal';\n\nimport { flattenToAppURL, isInternalURL } from '@plone/volto/helpers/Url/Url';\nimport { withBlockExtensions } from '@plone/volto/helpers/Extensions';\nimport config from '@plone/volto/registry';\n\nimport { ImageInput } from '@plone/volto/components/manage/Widgets/ImageWidget';\n\nfunction Edit(props) {\n  const { data } = props;\n  const Image = config.getComponent({ name: 'Image' }).component;\n\n  const handleChange = React.useCallback(\n    async (id, image, { title, image_field, image_scales } = {}) => {\n      const url = image ? image['@id'] || image : '';\n\n      props.onChangeBlock(props.block, {\n        ...props.data,\n        url: flattenToAppURL(url),\n        image_field,\n        image_scales,\n        alt: props.data.alt || title || '',\n      });\n    },\n    [props],\n  );\n\n  return (\n    <>\n      <div\n        className={cx(\n          'block image align',\n          {\n            center: !Boolean(data.align),\n          },\n          data.align,\n        )}\n      >\n        {data.url ? (\n          <Image\n            className={cx({\n              'full-width': data.align === 'full',\n              large: data.size === 'l',\n              medium: data.size === 'm',\n              small: data.size === 's',\n            })}\n            item={\n              data.image_scales\n                ? {\n                    '@id': data.url,\n                    image_field: data.image_field,\n                    image_scales: data.image_scales,\n                  }\n                : undefined\n            }\n            src={\n              data.image_scales\n                ? undefined\n                : isInternalURL(data.url)\n                  ? // Backwards compat in the case that the block is storing the full server URL\n                    (() => {\n                      if (data.size === 'l')\n                        return `${flattenToAppURL(data.url)}/@@images/image`;\n                      if (data.size === 'm')\n                        return `${flattenToAppURL(\n                          data.url,\n                        )}/@@images/image/preview`;\n                      if (data.size === 's')\n                        return `${flattenToAppURL(data.url)}/@@images/image/mini`;\n                      return `${flattenToAppURL(data.url)}/@@images/image`;\n                    })()\n                  : data.url\n            }\n            sizes={config.blocks.blocksConfig.image.getSizes(data)}\n            alt={data.alt || ''}\n            loading=\"lazy\"\n            responsive={true}\n          />\n        ) : (\n          <ImageInput\n            onChange={handleChange}\n            placeholderLinkInput={data.placeholder}\n            block={props.block}\n            id={props.block}\n            objectBrowserPickerType={'image'}\n          />\n        )}\n        <SidebarPortal selected={props.selected}>\n          <ImageSidebar {...props} />\n        </SidebarPortal>\n      </div>\n    </>\n  );\n}\n\nexport default withBlockExtensions(Edit);\n"],"mappings":"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","ignoreList":[]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}